/*! For license information please see main.01e2fe70.js.LICENSE.txt */
!function(){"use strict";var e={463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function j(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function z(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case x:return"Portal";case I:return"Profiler";case E:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function X(e,t){J(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ae(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,_e=null,Ee=null;function Ie(e){if(e=ki(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),xe(e.stateNode,e.type,t))}}function Se(e){_e?Ee?Ee.push(e):Ee=[e]:_e=e}function Te(){if(_e){var e=_e,t=Ee;if(Ee=_e=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function Re(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==_e||null!==Ee)&&(Ne(),Te())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Pe=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){Pe=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,je=!1,Ue=null,Ve={onError:function(e){Me=!0,Fe=e}};function ze(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(Be(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,_t,Et,It,St=!1,Tt=[],Ct=null,Nt=null,At=null,Rt=new Map,Dt=new Map,Pt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void It(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){jt(e)&&n.delete(t)}function Vt(){St=!1,null!==Ct&&jt(Ct)&&(Ct=null),null!==Nt&&jt(Nt)&&(Nt=null),null!==At&&jt(At)&&(At=null),Rt.forEach(Ut),Dt.forEach(Ut)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Tt.length){zt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&zt(Ct,e),null!==Nt&&zt(Nt,e),null!==At&&zt(At,e),Rt.forEach(t),Dt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Pt.shift()}var qt=b.ReactCurrentBatchConfig,Kt=!0;function Gt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Wt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Ht(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Wt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Wt(e,t,n,r){if(Kt){var i=Yt(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Dt.set(a,Mt(Dt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&Kr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),mn=an(F({},fn,{relatedTarget:0})),yn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function In(){return En}var Sn=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(Sn),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In})),An=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=an(Rn),Pn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!On||Ln&&8<Ln&&11>=Ln),jn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Gn(e,t,n,r){Se(r),0<(t=Hr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Wn=null;function Qn(e){jr(e,0)}function Yn(e){if(W(bi(e)))return e}function $n(e,t){if("change"===e)return t}var Jn=!1;if(l){var Xn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Wn=Hn=null)}function nr(e){if("value"===e.propertyName&&Yn(Wn)){var t=[];Gn(t,Wn,e,we(e)),Re(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Wn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Hr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},_r={},Er={};function Ir(e){if(_r[e])return _r[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return _r[e]=n[t];return e}l&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Sr=Ir("animationend"),Tr=Ir("animationiteration"),Cr=Ir("animationstart"),Nr=Ir("transitionend"),Ar=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Ar.set(e,t),s(t,[e])}for(var Pr=0;Pr<Rr.length;Pr++){var Or=Rr[Pr];Dr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Dr(Sr,"onAnimationEnd"),Dr(Tr,"onAnimationIteration"),Dr(Cr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(ze.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,je||(je=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(je)throw e=Ue,je=!1,Ue=null,e}function Ur(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch($t(t)){case 1:var i=Gt;break;case 4:i=Ht;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Re((function(){var r=a,i=we(n),o=[];e:{var u=Ar.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=mn;break;case"focusout":c="blur",s=mn;break;case"beforeblur":case"afterblur":s=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Nn;break;case Sr:case Tr:case Cr:s=yn;break;case Nr:s=An;break;case"scroll":s=hn;break;case"wheel":s=Dn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=De(p,h))&&l.push(Gr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Wr(d))p++;for(d=0,v=h;v;v=Wr(v))d++;for(;0<p-d;)l=Wr(l),p--;for(;0<d-p;)h=Wr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Wr(l),h=Wr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=$n;else if(Kn(u))if(Jn)m=or;else{m=ir;var y=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ar);switch(m&&(m=m(e,r))?Gn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ee(u,"number",u.value)),y=r?bi(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Bn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Bn&&(g=en()):(Xt="value"in(Jt=i)?Jt.value:Jt.textContent,Bn=!0)),0<(y=Hr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=zn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Un=!0,jn);case"textInput":return(e=t.data)===jn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),Zt=Xt=Jt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}jr(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=De(e,n))&&r.unshift(Gr(e,a,i)),null!=(a=De(e,t))&&r.push(Gr(e,a,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=De(n,a))&&o.unshift(Gr(n,s,u)):i||null!=(s=De(n,a))&&o.push(Gr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,yi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var xi=[],_i=-1;function Ei(e){return{current:e}}function Ii(e){0>_i||(e.current=xi[_i],xi[_i]=null,_i--)}function Si(e,t){_i++,xi[_i]=e.current,e.current=t}var Ti={},Ci=Ei(Ti),Ni=Ei(!1),Ai=Ti;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Di(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){Ii(Ni),Ii(Ci)}function Oi(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Si(Ci,t),Si(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ai=Ci.current,Si(Ci,e),Si(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ii(Ni),Ii(Ci),Si(Ci,e)):Ii(Ni),Si(Ni,n)}var ji=null,Ui=!1,Vi=!1;function zi(e){null===ji?ji=[e]:ji.push(e)}function Bi(){if(!Vi&&null!==ji){Vi=!0;var e=0,t=kt;try{var n=ji;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ji=null,Ui=!1}catch(i){throw null!==ji&&(ji=ji.slice(e+1)),We(Ze,Bi),i}finally{kt=t,Vi=!1}}return null}var qi=[],Ki=0,Gi=null,Hi=0,Wi=[],Qi=0,Yi=null,$i=1,Ji="";function Xi(e,t){qi[Ki++]=Hi,qi[Ki++]=Gi,Gi=e,Hi=t}function Zi(e,t,n){Wi[Qi++]=$i,Wi[Qi++]=Ji,Wi[Qi++]=Yi,Yi=e;var r=$i;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Ji=a+e}else $i=1<<a|n<<i|r,Ji=e}function ea(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ta(e){for(;e===Gi;)Gi=qi[--Ki],qi[Ki]=null,Hi=qi[--Ki],qi[Ki]=null;for(;e===Yi;)Yi=Wi[--Qi],Wi[Qi]=null,Ji=Wi[--Qi],Wi[Qi]=null,$i=Wi[--Qi],Wi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Dc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:$i,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Dc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Ei(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function xa(e){var t=ya.current;Ii(ya),e._currentValue=t}function _a(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ea(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bu=!0),e.firstContext=null)}function Ia(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Sa=null;function Ta(e){null===Sa?Sa=[e]:Sa.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Aa=!1;function Ra(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Da(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Pa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ns)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Aa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Aa=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Fs|=o,e.lanes=o,e.memoizedState=f}}function ja(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ua=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var za={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Pa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Pa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Pa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Oa(e,i,r))&&(rc(t,e,r,n),La(t,e,r))}};function Ba(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function qa(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Ia(a):(i=Di(t)?Ai:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=za,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ka(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&za.enqueueReplaceState(t,t.state,null)}function Ga(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ua,Ra(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ia(a):(a=Di(t)?Ai:Ci.current,i.context=Ri(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&za.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ha(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Wa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===_?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===D&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ha(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Ha(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=jc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Ha(e,null,t),n.return=e,n;case x:return(t=Uc(t,e.mode,n)).return=e,t;case D:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Wa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null;case D:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Wa(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Wa(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===u.length)return n(i,f),ia&&Xi(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Xi(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),ia&&Xi(i,v),c}function m(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),ia&&Xi(i,m),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return ia&&Xi(i,m),l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Xi(i,m),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===_){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ha(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===_?((a=Mc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Lc(o.type,o.key,o.props,null,r.mode,s)).ref=Ha(r,a,o),s.return=r,r=s)}return u(r);case x:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,s)).return=r,r=a}return u(r);case D:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return m(r,a,o,s);Wa(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=jc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var $a=Ya(!0),Ja=Ya(!1),Xa={},Za=Ei(Xa),eo=Ei(Xa),to=Ei(Xa);function no(e){if(e===Xa)throw Error(a(174));return e}function ro(e,t){switch(Si(to,t),Si(eo,e),Si(Za,Xa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ii(Za),Si(Za,t)}function io(){Ii(Za),Ii(eo),Ii(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Si(eo,e),Si(Za,n))}function oo(e){eo.current===e&&(Ii(Za),Ii(eo))}var uo=Ei(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,po=0,vo=null,mo=null,yo=null,go=!1,ko=!1,bo=0,wo=0;function xo(){throw Error(a(321))}function _o(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Eo(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==mo&&null!==mo.next,po=0,yo=mo=vo=null,go=!1,t)throw Error(a(300));return e}function Io(){var e=0!==bo;return bo=0,e}function So(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?vo.memoizedState=yo=e:yo=yo.next=e,yo}function To(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?vo.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?vo.memoizedState=yo=e:yo=yo.next=e}return yo}function Co(e,t){return"function"===typeof t?t(e):t}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,Fs|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(bu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Fs|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(bu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ro(){}function Do(e,t){var n=vo,r=To(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,bu=!0),r=r.queue,Ko(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,Uo(9,Oo.bind(null,n,r,i,t),void 0,null),null===As)throw Error(a(349));0!==(30&po)||Po(n,t,i)}return i}function Po(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Na(e,1);null!==t&&rc(t,e,1,-1)}function jo(e){var t=So();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return To().memoizedState}function zo(e,t,n,r){var i=So();vo.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&_o(r,o.deps))return void(i.memoizedState=Uo(t,n,a,r))}vo.flags|=e,i.memoizedState=Uo(1|t,n,a,r)}function qo(e,t){return zo(8390656,8,e,t)}function Ko(e,t){return Bo(2048,8,e,t)}function Go(e,t){return Bo(4,2,e,t)}function Ho(e,t){return Bo(4,4,e,t)}function Wo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Wo.bind(null,t,e),n)}function Yo(){}function $o(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Fs|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return To().memoizedState}function tu(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){rc(n,e,r,tc()),au(n,t,r)}}function nu(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ta(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(rc(n,e,r,i=tc()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Ia,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},uu={readContext:Ia,useCallback:function(e,t){return So().memoizedState=[e,void 0===t?null:t],e},useContext:Ia,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4194308,4,Wo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return zo(4,2,e,t)},useMemo:function(e,t){var n=So();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=So();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},So().memoizedState=e},useState:jo,useDebugValue:Yo,useDeferredValue:function(e){return So().memoizedState=e},useTransition:function(){var e=jo(!1),t=e[0];return e=Zo.bind(null,e[1]),So().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=So();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===As)throw Error(a(349));0!==(30&po)||Po(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=So(),t=As.identifierPrefix;if(ia){var n=Ji;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Ia,useCallback:$o,useContext:Ia,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Ho,useMemo:Jo,useReducer:No,useRef:Vo,useState:function(){return No(Co)},useDebugValue:Yo,useDeferredValue:function(e){return Xo(To(),mo.memoizedState,e)},useTransition:function(){return[No(Co)[0],To().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Do,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Ia,useCallback:$o,useContext:Ia,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Ho,useMemo:Jo,useReducer:Ao,useRef:Vo,useState:function(){return Ao(Co)},useDebugValue:Yo,useDeferredValue:function(e){var t=To();return null===mo?t.memoizedState=e:Xo(t,mo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],To().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Do,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Pa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gs||(Gs=!0,Hs=r),hu(0,t)},n}function vu(e,t,n){(n=Pa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Ws?Ws=new Set([this]):Ws.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function yu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Pa(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=b.ReactCurrentOwner,bu=!1;function wu(e,t,n,r){t.child=null===e?Ja(t,null,n,r):$a(t,e.child,n,r)}function xu(e,t,n,r,i){n=n.render;var a=t.ref;return Ea(t,i),r=Eo(e,t,n,r,a,i),n=Io(),null===e||bu?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gu(e,t,i))}function _u(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Pc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Eu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Gu(e,t,i)}return t.flags|=1,(e=Oc(a,r)).ref=t.ref,e.return=t,t.child=e}function Eu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(bu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Gu(e,t,i);0!==(131072&e.flags)&&(bu=!0)}}return Tu(e,t,n,r,i)}function Iu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(Os,Ps),Ps|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(Os,Ps),Ps|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Si(Os,Ps),Ps|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Si(Os,Ps),Ps|=r;return wu(e,t,i,n),t.child}function Su(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,i){var a=Di(n)?Ai:Ci.current;return a=Ri(t,a),Ea(t,i),n=Eo(e,t,n,r,a,i),r=Io(),null===e||bu?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gu(e,t,i))}function Cu(e,t,n,r,i){if(Di(n)){var a=!0;Mi(t)}else a=!1;if(Ea(t,i),null===t.stateNode)Ku(e,t),qa(t,n,r),Ga(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ia(c):c=Ri(t,c=Di(n)?Ai:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ka(t,o,r,c),Aa=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ni.current||Aa?("function"===typeof l&&(Va(t,n,l,r),s=t.memoizedState),(u=Aa||Ba(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Da(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ma(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Ia(s):s=Ri(t,s=Di(n)?Ai:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ka(t,o,r,s),Aa=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ni.current||Aa?("function"===typeof d&&(Va(t,n,d,r),p=t.memoizedState),(c=Aa||Ba(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Nu(e,t,n,r,a,i)}function Nu(e,t,n,r,i,a){Su(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Gu(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$a(t,e.child,null,a),t.child=$a(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Au(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Ru(e,t,n,r,i){return da(),pa(i),t.flags|=256,wu(e,t,n,r),t.child}var Du,Pu,Ou,Lu,Mu={dehydrated:null,treeContext:null,retryLane:0};function Fu(e){return{baseLanes:e,cachePool:null,transitions:null}}function ju(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Si(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Fc(s,i,0,null),e=Mc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Fu(n),t.memoizedState=Mu,e):Uu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Vu(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$a(t,e.child,null,u),t.child.memoizedState=Fu(u),t.memoizedState=Mu,o);if(0===(1&t.mode))return Vu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Vu(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),bu||s){if(null!==(r=As)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),rc(r,e,i,-1))}return mc(),Vu(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Wi[Qi++]=$i,Wi[Qi++]=Ji,Wi[Qi++]=Yi,$i=e.id,Ji=e.overflow,Yi=t),t=Uu(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Oc(r,u):(u=Mc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Fu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Mu,i}return e=(u=e.child).sibling,i=Oc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Uu(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vu(e,t,n,r){return null!==r&&pa(r),$a(t,e.child,null,n),(e=Uu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_a(e.return,t,n)}function Bu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zu(e,n,t);else if(19===e.tag)zu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bu(t,!0,n,null,a);break;case"together":Bu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ku(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fs|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Hu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wu(t),null;case 1:case 17:return Di(t.type)&&Pi(),Wu(t),null;case 3:return r=t.stateNode,io(),Ii(Ni),Ii(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(uc(aa),aa=null))),Pu(e,t),Wu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ou(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Wu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":$(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Ur("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Du(e,t,!1,!1),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Ur("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wu(t),null;case 6:if(e&&null!=t.stateNode)Lu(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Wu(t),null;case 13:if(Ii(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wu(t),o=!1}else null!==aa&&(uc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Ls&&(Ls=3):mc())),null!==t.updateQueue&&(t.flags|=4),Wu(t),null);case 4:return io(),Pu(e,t),null===e&&Br(t.stateNode.containerInfo),Wu(t),null;case 10:return xa(t.type._context),Wu(t),null;case 19:if(Ii(uo),null===(o=t.memoizedState))return Wu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Hu(o,!1);else{if(0!==Ls||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Hu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>qs&&(t.flags|=128,r=!0,Hu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Hu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Wu(t),null}else 2*Je()-o.renderingStartTime>qs&&1073741824!==n&&(t.flags|=128,r=!0,Hu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=uo.current,Si(uo,r?1&n|2:1&n),t):(Wu(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ps)&&(Wu(t),6&t.subtreeFlags&&(t.flags|=8192)):Wu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Yu(e,t){switch(ta(t),t.tag){case 1:return Di(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ii(Ni),Ii(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ii(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ii(uo),null;case 4:return io(),null;case 10:return xa(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Du=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Pu=function(){},Ou=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Ur("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Lu=function(e,t,n,r){n!==r&&(t.flags|=4)};var $u=!1,Ju=!1,Xu="function"===typeof WeakSet?WeakSet:Set,Zu=null;function es(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ic(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){Ic(e,t,r)}}var ns=!1;function rs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ts(t,n,a)}i=i.next}while(i!==r)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function os(e){var t=e.alternate;null!==t&&(e.alternate=null,os(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function us(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||us(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}function ls(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ls(e,t,n),e=e.sibling;null!==e;)ls(e,t,n),e=e.sibling}var fs=null,hs=!1;function ds(e,t,n){for(n=n.child;null!==n;)ps(e,t,n),n=n.sibling}function ps(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Ju||es(n,t);case 6:var r=fs,i=hs;fs=null,ds(e,t,n),hs=i,null!==(fs=r)&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fs.removeChild(n.stateNode));break;case 18:null!==fs&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),Bt(e)):si(fs,n.stateNode));break;case 4:r=fs,i=hs,fs=n.stateNode.containerInfo,hs=!0,ds(e,t,n),fs=r,hs=i;break;case 0:case 11:case 14:case 15:if(!Ju&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&ts(n,t,o),i=i.next}while(i!==r)}ds(e,t,n);break;case 1:if(!Ju&&(es(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ic(n,t,u)}ds(e,t,n);break;case 21:ds(e,t,n);break;case 22:1&n.mode?(Ju=(r=Ju)||null!==n.memoizedState,ds(e,t,n),Ju=r):ds(e,t,n);break;default:ds(e,t,n)}}function vs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xu),t.forEach((function(t){var r=Nc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ms(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:fs=s.stateNode,hs=!1;break e;case 3:case 4:fs=s.stateNode.containerInfo,hs=!0;break e}s=s.return}if(null===fs)throw Error(a(160));ps(o,u,i),fs=null,hs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ic(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ys(t,e),t=t.sibling}function ys(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ms(t,e),gs(e),4&r){try{rs(3,e,e.return),is(3,e)}catch(m){Ic(e,e.return,m)}try{rs(5,e,e.return)}catch(m){Ic(e,e.return,m)}}break;case 1:ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return);break;case 5:if(ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Ic(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&J(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":X(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Ic(e,e.return,m)}}break;case 6:if(ms(t,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Ic(e,e.return,m)}}break;case 3:if(ms(t,e),gs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(m){Ic(e,e.return,m)}break;case 4:default:ms(t,e),gs(e);break;case 13:ms(t,e),gs(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bs=Je())),4&r&&vs(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Ju=(l=Ju)||f,ms(t,e),Ju=l):ms(t,e),gs(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Zu=e,f=e.child;null!==f;){for(h=Zu=f;null!==Zu;){switch(p=(d=Zu).child,d.tag){case 0:case 11:case 14:case 15:rs(4,d,d.return);break;case 1:es(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Ic(r,n,m)}}break;case 5:es(d,d.return);break;case 22:if(null!==d.memoizedState){xs(h);continue}}null!==p?(p.return=d,Zu=p):xs(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(m){Ic(e,e.return,m)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(m){Ic(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ms(t,e),gs(e),4&r&&vs(e);case 21:}}function gs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(us(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ls(e,ss(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cs(e,ss(e),o);break;default:throw Error(a(161))}}catch(u){Ic(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ks(e,t,n){Zu=e,bs(e,t,n)}function bs(e,t,n){for(var r=0!==(1&e.mode);null!==Zu;){var i=Zu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$u;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Ju;u=$u;var c=Ju;if($u=o,(Ju=s)&&!c)for(Zu=i;null!==Zu;)s=(o=Zu).child,22===o.tag&&null!==o.memoizedState?_s(i):null!==s?(s.return=o,Zu=s):_s(i);for(;null!==a;)Zu=a,bs(a,t,n),a=a.sibling;Zu=i,$u=u,Ju=c}ws(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zu=a):ws(e)}}function ws(e){for(;null!==Zu;){var t=Zu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ju||is(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ju)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&ja(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}ja(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(a(163))}Ju||512&t.flags&&as(t)}catch(d){Ic(t,t.return,d)}}if(t===e){Zu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zu=n;break}Zu=t.return}}function xs(e){for(;null!==Zu;){var t=Zu;if(t===e){Zu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zu=n;break}Zu=t.return}}function _s(e){for(;null!==Zu;){var t=Zu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{is(4,t)}catch(s){Ic(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Ic(t,i,s)}}var a=t.return;try{as(t)}catch(s){Ic(t,a,s)}break;case 5:var o=t.return;try{as(t)}catch(s){Ic(t,o,s)}}}catch(s){Ic(t,t.return,s)}if(t===e){Zu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Zu=u;break}Zu=t.return}}var Es,Is=Math.ceil,Ss=b.ReactCurrentDispatcher,Ts=b.ReactCurrentOwner,Cs=b.ReactCurrentBatchConfig,Ns=0,As=null,Rs=null,Ds=0,Ps=0,Os=Ei(0),Ls=0,Ms=null,Fs=0,js=0,Us=0,Vs=null,zs=null,Bs=0,qs=1/0,Ks=null,Gs=!1,Hs=null,Ws=null,Qs=!1,Ys=null,$s=0,Js=0,Xs=null,Zs=-1,ec=0;function tc(){return 0!==(6&Ns)?Je():-1!==Zs?Zs:Zs=Je()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Ns)&&0!==Ds?Ds&-Ds:null!==va.transition?(0===ec&&(ec=vt()),ec):0!==(e=kt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function rc(e,t,n,r){if(50<Js)throw Js=0,Xs=null,Error(a(185));yt(e,n,r),0!==(2&Ns)&&e===As||(e===As&&(0===(2&Ns)&&(js|=n),4===Ls&&sc(e,Ds)),ic(e,r),1===n&&0===Ns&&0===(1&t.mode)&&(qs=Je()+500,Ui&&Bi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===As?Ds:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,zi(e)}(cc.bind(null,e)):zi(cc.bind(null,e)),oi((function(){0===(6&Ns)&&Bi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zs=-1,ec=0,0!==(6&Ns))throw Error(a(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ht(e,e===As?Ds:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Ns;Ns|=2;var o=vc();for(As===e&&Ds===t||(Ks=null,qs=Je()+500,dc(e,t));;)try{kc();break}catch(s){pc(e,s)}wa(),Ss.current=o,Ns=i,null!==Rs?t=0:(As=null,Ds=0,t=Ls)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ms,dc(e,0),sc(e,r),ic(e,Je()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ms,dc(e,0),sc(e,r),ic(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:xc(e,zs,Ks);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=Bs+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xc.bind(null,e,zs,Ks),t);break}xc(e,zs,Ks);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Is(r/1960))-r)){e.timeoutHandle=ri(xc.bind(null,e,zs,Ks),r);break}xc(e,zs,Ks);break;default:throw Error(a(329))}}}return ic(e,Je()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=Vs;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=zs,zs=n,null!==t&&uc(t)),e}function uc(e){null===zs?zs=e:zs.push.apply(zs,e)}function sc(e,t){for(t&=~Us,t&=~js,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Ns))throw Error(a(327));_c();var t=ht(e,0);if(0===(1&t))return ic(e,Je()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ms,dc(e,0),sc(e,t),ic(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,zs,Ks),ic(e,Je()),null}function lc(e,t){var n=Ns;Ns|=1;try{return e(t)}finally{0===(Ns=n)&&(qs=Je()+500,Ui&&Bi())}}function fc(e){null!==Ys&&0===Ys.tag&&0===(6&Ns)&&_c();var t=Ns;Ns|=1;var n=Cs.transition,r=kt;try{if(Cs.transition=null,kt=1,e)return e()}finally{kt=r,Cs.transition=n,0===(6&(Ns=t))&&Bi()}}function hc(){Ps=Os.current,Ii(Os)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Rs)for(n=Rs.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:io(),Ii(Ni),Ii(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ii(uo);break;case 10:xa(r.type._context);break;case 22:case 23:hc()}n=n.return}if(As=e,Rs=e=Oc(e.current,null),Ds=Ps=t,Ls=0,Ms=null,Us=js=Fs=0,zs=Vs=null,null!==Sa){for(t=0;t<Sa.length;t++)if(null!==(r=(n=Sa[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Sa=null}return e}function pc(e,t){for(;;){var n=Rs;try{if(wa(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,yo=mo=vo=null,ko=!1,bo=0,Ts.current=null,null===n||null===n.return){Ls=1,Ms=t,Rs=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Ds,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=yu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&mu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){mu(o,l,t),mc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var y=yu(u);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gu(y,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Ls&&(Ls=2),null===Vs?Vs=[o]:Vs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Ws||!Ws.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(b){t=b,Rs===n&&null!==n&&(Rs=n=n.return);continue}break}}function vc(){var e=Ss.current;return Ss.current=ou,null===e?ou:e}function mc(){0!==Ls&&3!==Ls&&2!==Ls||(Ls=4),null===As||0===(268435455&Fs)&&0===(268435455&js)||sc(As,Ds)}function yc(e,t){var n=Ns;Ns|=2;var r=vc();for(As===e&&Ds===t||(Ks=null,dc(e,t));;)try{gc();break}catch(i){pc(e,i)}if(wa(),Ns=n,Ss.current=r,null!==Rs)throw Error(a(261));return As=null,Ds=0,Ls}function gc(){for(;null!==Rs;)bc(Rs)}function kc(){for(;null!==Rs&&!Ye();)bc(Rs)}function bc(e){var t=Es(e.alternate,e,Ps);e.memoizedProps=e.pendingProps,null===t?wc(e):Rs=t,Ts.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qu(n,t,Ps)))return void(Rs=n)}else{if(null!==(n=Yu(n,t)))return n.flags&=32767,void(Rs=n);if(null===e)return Ls=6,void(Rs=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rs=t);Rs=t=e}while(null!==t);0===Ls&&(Ls=5)}function xc(e,t,n){var r=kt,i=Cs.transition;try{Cs.transition=null,kt=1,function(e,t,n,r){do{_c()}while(null!==Ys);if(0!==(6&Ns))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===As&&(Rs=As=null,Ds=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qs||(Qs=!0,Ac(tt,(function(){return _c(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cs.transition,Cs.transition=null;var u=kt;kt=1;var s=Ns;Ns|=4,Ts.current=null,function(e,t){if(ei=Kt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Zu=t;null!==Zu;)if(e=(t=Zu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zu=e;else for(;null!==Zu;){t=Zu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Ic(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zu=e;break}Zu=t.return}v=ns,ns=!1}(e,n),ys(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,ks(n,e,i),$e(),Ns=s,kt=u,Cs.transition=o}else e.current=n;if(Qs&&(Qs=!1,Ys=e,$s=i),o=e.pendingLanes,0===o&&(Ws=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gs)throw Gs=!1,e=Hs,Hs=null,e;0!==(1&$s)&&0!==e.tag&&_c(),o=e.pendingLanes,0!==(1&o)?e===Xs?Js++:(Js=0,Xs=e):Js=0,Bi()}(e,t,n,r)}finally{Cs.transition=i,kt=r}return null}function _c(){if(null!==Ys){var e=bt($s),t=Cs.transition,n=kt;try{if(Cs.transition=null,kt=16>e?16:e,null===Ys)var r=!1;else{if(e=Ys,Ys=null,$s=0,0!==(6&Ns))throw Error(a(331));var i=Ns;for(Ns|=4,Zu=e.current;null!==Zu;){var o=Zu,u=o.child;if(0!==(16&Zu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Zu=l;null!==Zu;){var f=Zu;switch(f.tag){case 0:case 11:case 15:rs(8,f,o)}var h=f.child;if(null!==h)h.return=f,Zu=h;else for(;null!==Zu;){var d=(f=Zu).sibling,p=f.return;if(os(f),f===l){Zu=null;break}if(null!==d){d.return=p,Zu=d;break}Zu=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Zu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Zu=u;else e:for(;null!==Zu;){if(0!==(2048&(o=Zu).flags))switch(o.tag){case 0:case 11:case 15:rs(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zu=g;break e}Zu=o.return}}var k=e.current;for(Zu=k;null!==Zu;){var b=(u=Zu).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Zu=b;else e:for(u=k;null!==Zu;){if(0!==(2048&(s=Zu).flags))try{switch(s.tag){case 0:case 11:case 15:is(9,s)}}catch(x){Ic(s,s.return,x)}if(s===u){Zu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Zu=w;break e}Zu=s.return}}if(Ns=i,Bi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{kt=n,Cs.transition=t}}return!1}function Ec(e,t,n){e=Oa(e,t=pu(0,t=lu(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function Ic(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ws||!Ws.has(r))){t=Oa(t,e=vu(t,e=lu(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,As===e&&(Ds&n)===n&&(4===Ls||3===Ls&&(130023424&Ds)===Ds&&500>Je()-Bs?dc(e,0):Us|=n),ic(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Na(e,t))&&(yt(e,t,n),ic(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Nc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tc(e,n)}function Ac(e,t){return We(e,t)}function Rc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dc(e,t,n,r){return new Rc(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Dc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Pc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case _:return Mc(n.children,i,o,t);case E:u=8,i|=8;break;case I:return(e=Dc(12,n,t,2|i)).elementType=I,e.lanes=o,e;case N:return(e=Dc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Dc(19,n,t,i)).elementType=A,e.lanes=o,e;case P:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:u=10;break e;case T:u=9;break e;case C:u=11;break e;case R:u=14;break e;case D:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Dc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Dc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Dc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function jc(e,t,n){return(e=Dc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Dc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,i,a,o,u,s){return e=new Vc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Dc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ra(a),e}function Bc(e){if(!e)return Ti;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Di(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,a,o,u,s){return(e=zc(n,r,!0,e,0,a,0,u,s)).context=Bc(null),n=e.current,(a=Pa(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Oa(n,a,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function Kc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Pa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oa(i,t,o))&&(rc(e,i,o,a),La(e,i,o)),o}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}Es=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)bu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bu=!1,function(e,t,n){switch(t.tag){case 3:Au(t),da();break;case 5:ao(t);break;case 1:Di(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?ju(e,t,n):(Si(uo,1&uo.current),null!==(e=Gu(e,t,n))?e.sibling:null);Si(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Iu(e,t,n)}return Gu(e,t,n)}(e,t,n);bu=0!==(131072&e.flags)}else bu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ku(e,t),e=t.pendingProps;var i=Ri(t,Ci.current);Ea(t,n),i=Eo(null,t,r,e,i,n);var o=Io();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ra(t),i.updater=za,t.stateNode=i,i._reactInternals=t,Ga(t,r,e,n),t=Nu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ku(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===R)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=xu(null,t,r,e,n);break e;case 14:t=_u(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Au(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Da(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ru(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Ru(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ja(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Gu(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Su(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return ju(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$a(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Si(ya,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ni.current){t=Gu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Pa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),_a(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),_a(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ea(t,n),r=r(i=Ia(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),_u(e,t,r,i=ma(r.type,i),n);case 15:return Eu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Ku(e,t),t.tag=1,Di(r)?(e=!0,Mi(t)):e=!1,Ea(t,n),qa(t,r,i),Ga(t,r,i,n),Nu(null,t,r,!0,e,n);case 19:return qu(e,t,n);case 22:return Iu(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Gc(o);u.call(e)}}Kc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Gc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),fc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Gc(s);u.call(e)}}var s=zc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,Br(8===e.nodeType?e.parentNode:e),fc((function(){Kc(t,s,n,r)})),s}(n,t,e,i,r);return Gc(o)}$c.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Kc(e,t,null,null)},$c.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Kc(null,e,null,null)})),t[pi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,Je()),0===(6&Ns)&&(qs=Je()+500,Bi()))}break;case 13:fc((function(){var t=Na(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Wc(e,1)}},xt=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)rc(t,e,134217728,tc());Wc(e,134217728)}},_t=function(e){if(13===e.tag){var t=nc(e),n=Na(e,t);if(null!==n)rc(n,e,t,tc());Wc(e,t)}},Et=function(){return kt},It=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},xe=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));W(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=lc,Ne=fc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Se,Te,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(a(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var b=k.prototype=new g;b.constructor=k,v(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,_={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!E.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:_.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},P={transition:null},O={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:P,ReactCurrentOwner:_};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)x.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,b(e),!v)if(null!==r(c))v=!0,P(x);else{var t=r(l);null!==t&&O(w,t.startTime-e)}}function x(e,n){v=!1,m&&(m=!1,g(S),S=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&O(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,E=!1,I=null,S=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function A(){if(null!==I){var e=t.unstable_now();C=e;var n=!0;try{n=I(!0,e)}finally{n?_():(E=!1,I=null)}}else E=!1}if("function"===typeof k)_=function(){k(A)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,D=R.port2;R.port1.onmessage=A,_=function(){D.postMessage(null)}}else _=function(){y(A,0)};function P(e){I=e,E||(E=!0,_())}function O(e,n){S=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,P(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(S),S=-1):m=!0,O(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,P(x))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)},839:function(e){var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,i){for(var a,o,u=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),s=1;s<arguments.length;s++){for(var c in a=Object(arguments[s]))n.call(a,c)&&(u[c]=a[c]);if(t){o=t(a);for(var l=0;l<o.length;l++)r.call(a,o[l])&&(u[o[l]]=a[o[l]])}}return u}},483:function(e,t,n){var r=n(839),i=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,u=60110,s=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var f=Symbol.for;i=f("react.element"),a=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),o=f("react.provider"),u=f("react.context"),s=f("react.forward_ref"),t.Suspense=f("react.suspense"),c=f("react.memo"),l=f("react.lazy")}var h="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function m(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function y(){}function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=m.prototype;var k=g.prototype=new y;k.constructor=g,r(k,m.prototype),k.isPureReactComponent=!0;var b={current:null},w=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,n){var r,a={},o=null,u=null;if(null!=t)for(r in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,r)&&!x.hasOwnProperty(r)&&(a[r]=t[r]);var s=arguments.length-2;if(1===s)a.children=n;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===a[r]&&(a[r]=s[r]);return{$$typeof:i,type:e,key:o,ref:u,props:a,_owner:b.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var I=/\/+/g;function S(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,n,r,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case i:case a:s=!0}}if(s)return o=o(s=e),e=""===r?"."+S(s,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(I,"$&/")+"/"),T(o,t,n,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(I,"$&/")+"/")+e)),t.push(o)),1;if(s=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+S(u=e[c],c);s+=T(u,t,n,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=T(u=u.value,t,n,l=r+S(u,c++),o);else if("object"===u)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return s}function C(e,t,n){if(null==e)return e;var r=[],i=0;return T(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var A={current:null};function R(){var e=A.current;if(null===e)throw Error(d(321));return e}var D={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error(d(143));return e}},t.Component=m,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var a=r({},e.props),o=e.key,u=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(u=t.ref,s=b.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)w.call(t,l)&&!x.hasOwnProperty(l)&&(a[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];a.children=c}return{$$typeof:i,type:e.type,key:o,ref:u,props:a,_owner:s}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:u,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:s,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return R().useCallback(e,t)},t.useContext=function(e,t){return R().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return R().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return R().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return R().useLayoutEffect(e,t)},t.useMemo=function(e,t){return R().useMemo(e,t)},t.useReducer=function(e,t,n){return R().useReducer(e,t,n)},t.useRef=function(e){return R().useRef(e)},t.useState=function(e){return R().useState(e)},t.version="17.0.2"},653:function(e,t,n){e.exports=n(483)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var u=2&i&&r;"object"==typeof u&&!~e.indexOf(u);u=t(u))Object.getOwnPropertyNames(u).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".58d0a9c0.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="amazon-clon-app:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){u=f;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var h=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=h.bind(null,u.onerror),u.onload=h.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/amazon-clon-app/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkamazon_clon_app=self.webpackChunkamazon_clon_app||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){var e={};n.r(e),n.d(e,{FirebaseError:function(){return xr},SDK_VERSION:function(){return Di},_DEFAULT_ENTRY_NAME:function(){return ki},_addComponent:function(){return _i},_addOrOverwriteComponent:function(){return Ei},_apps:function(){return wi},_clearComponents:function(){return Ci},_components:function(){return xi},_getProvider:function(){return Si},_registerComponent:function(){return Ii},_removeServiceInstance:function(){return Ti},deleteApp:function(){return Mi},getApp:function(){return Oi},getApps:function(){return Li},initializeApp:function(){return Pi},onLog:function(){return Ui},registerVersion:function(){return ji},setLogLevel:function(){return Vi}});var t=n(791),r=n.t(t,2),i=n(250);function a(e){if(Array.isArray(e))return e}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){return a(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||u(e,t)||s()}var l,f=n(653),h={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},d=f.createContext&&f.createContext(h),p=function(){return p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},p.apply(this,arguments)},v=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function m(e){return e&&e.map((function(e,t){return f.createElement(e.tag,p({key:t},e.attr),m(e.child))}))}function y(e){return function(t){return f.createElement(g,p({attr:p({},e.attr)},t),m(e.child))}}function g(e){var t=function(t){var n,r=e.attr,i=e.size,a=e.title,o=v(e,["attr","size","title"]),u=i||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),f.createElement("svg",p({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,o,{className:n,style:p(p({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),a&&f.createElement("title",null,a),e.children)};return void 0!==d?f.createElement(d.Consumer,null,(function(e){return t(e)})):t(h)}function k(e){return y({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"}}]})(e)}function b(e){return y({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M922.9 701.9H327.4l29.9-60.9 496.8-.9c16.8 0 31.2-12 34.2-28.6l68.8-385.1c1.8-10.1-.9-20.5-7.5-28.4a34.99 34.99 0 0 0-26.6-12.5l-632-2.1-5.4-25.4c-3.4-16.2-18-28-34.6-28H96.5a35.3 35.3 0 1 0 0 70.6h125.9L246 312.8l58.1 281.3-74.8 122.1a34.96 34.96 0 0 0-3 36.8c6 11.9 18.1 19.4 31.5 19.4h62.8a102.43 102.43 0 0 0-20.6 61.7c0 56.6 46 102.6 102.6 102.6s102.6-46 102.6-102.6c0-22.3-7.4-44-20.6-61.7h161.1a102.43 102.43 0 0 0-20.6 61.7c0 56.6 46 102.6 102.6 102.6s102.6-46 102.6-102.6c0-22.3-7.4-44-20.6-61.7H923c19.4 0 35.3-15.8 35.3-35.3a35.42 35.42 0 0 0-35.4-35.2zM305.7 253l575.8 1.9-56.4 315.8-452.3.8L305.7 253zm96.9 612.7c-17.4 0-31.6-14.2-31.6-31.6 0-17.4 14.2-31.6 31.6-31.6s31.6 14.2 31.6 31.6a31.6 31.6 0 0 1-31.6 31.6zm325.1 0c-17.4 0-31.6-14.2-31.6-31.6 0-17.4 14.2-31.6 31.6-31.6s31.6 14.2 31.6 31.6a31.6 31.6 0 0 1-31.6 31.6z"}}]})(e)}function w(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function x(e){return function(e){if(Array.isArray(e))return o(e)}(e)||w(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function I(e){var t=function(e,t){if("object"!==E(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===E(t)?t:String(t)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,I(r.key),r)}}function T(e,t,n){return t&&S(e.prototype,t),n&&S(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function C(e,t){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},C(e,t)}function N(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}function R(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){var t=R();return function(){var n,r=A(e);if(t){var i=A(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===E(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return D(e)}(this,n)}}function O(e,t,n){return O=R()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&C(i,n.prototype),i},O.apply(null,arguments)}function L(e){var t="function"===typeof Map?new Map:void 0;return L=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return O(e,arguments,A(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),C(n,e)},L(e)}function M(e){return a(e)||w(e)||u(e)||s()}function F(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},j.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(l||(l={}));var U,V="popstate";function z(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function B(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function q(e,t){return{usr:e.state,key:e.key,idx:t}}function K(e,t,n,r){return void 0===n&&(n=null),j({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?H(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function G(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function H(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function W(e,t,n,r){void 0===r&&(r={});var i=r,a=i.window,o=void 0===a?document.defaultView:a,u=i.v5Compat,s=void 0!==u&&u,c=o.history,f=l.Pop,h=null,d=p();function p(){return(c.state||{idx:null}).idx}function v(){f=l.Pop;var e=p(),t=null==e?null:e-d;d=e,h&&h({action:f,location:y.location,delta:t})}function m(e){var t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:G(e);return z(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==d&&(d=0,c.replaceState(j({},c.state,{idx:d}),""));var y={get action(){return f},get location(){return e(o,c)},listen:function(e){if(h)throw new Error("A history only accepts one active listener");return o.addEventListener(V,v),h=e,function(){o.removeEventListener(V,v),h=null}},createHref:function(e){return t(o,e)},createURL:m,encodeLocation:function(e){var t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){f=l.Push;var r=K(y.location,e,t);n&&n(r,e);var i=q(r,d=p()+1),a=y.createHref(r);try{c.pushState(i,"",a)}catch(u){if(u instanceof DOMException&&"DataCloneError"===u.name)throw u;o.location.assign(a)}s&&h&&h({action:f,location:y.location,delta:1})},replace:function(e,t){f=l.Replace;var r=K(y.location,e,t);n&&n(r,e);var i=q(r,d=p()),a=y.createHref(r);c.replaceState(i,"",a),s&&h&&h({action:f,location:y.location,delta:0})},go:function(e){return c.go(e)}};return y}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(U||(U={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function Q(e,t,n){void 0===n&&(n="/");var r=se(("string"===typeof t?H(t):t).pathname||"/",n);if(null==r)return null;var i=Y(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=ae(i[o],ue(r));return a}function Y(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(z(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var u=he([r,o.relativePath]),s=n.concat(o);e.children&&e.children.length>0&&(z(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+u+'".'),Y(e.children,t,s,u)),(null!=e.path||e.index)&&t.push({path:u,score:ie(u,e.index),routesMeta:s})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=F($(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(u){a.e(u)}finally{a.f()}}else i(e,t)})),t}function $(e){var t=e.split("/");if(0===t.length)return[];var n=M(t),r=n[0],i=n.slice(1),a=r.endsWith("?"),o=r.replace(/\?$/,"");if(0===i.length)return a?[o,""]:[o];var u=$(i.join("/")),s=[];return s.push.apply(s,x(u.map((function(e){return""===e?o:[o,e].join("/")})))),a&&s.push.apply(s,x(u)),s.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var J=/^:\w+$/,X=3,Z=2,ee=1,te=10,ne=-2,re=function(e){return"*"===e};function ie(e,t){var n=e.split("/"),r=n.length;return n.some(re)&&(r+=ne),t&&(r+=Z),n.filter((function(e){return!re(e)})).reduce((function(e,t){return e+(J.test(t)?X:""===t?ee:te)}),r)}function ae(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=oe({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:he([i,l.pathname]),pathnameBase:de(he([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=he([i,l.pathnameBase]))}return a}function oe(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);B("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=c(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),l=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return B(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(l[n]||"",t),e}),{}),pathname:u,pathnameBase:s,pattern:e}}function ue(e){try{return decodeURI(e)}catch(t){return B(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function se(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function ce(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function le(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function fe(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=H(e):(z(!(i=j({},e)).pathname||!i.pathname.includes("?"),ce("?","pathname","search",i)),z(!i.pathname||!i.pathname.includes("#"),ce("#","pathname","hash",i)),z(!i.search||!i.search.includes("#"),ce("#","search","hash",i)));var a,o=""===e||""===i.pathname,u=o?"/":i.pathname;if(r||null==u)a=n;else{var s=t.length-1;if(u.startsWith("..")){for(var c=u.split("/");".."===c[0];)c.shift(),s-=1;i.pathname=c.join("/")}a=s>=0?t[s]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?H(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:pe(a),hash:ve(u)}}(i,a),f=u&&"/"!==u&&u.endsWith("/"),h=(o||"."===u)&&n.endsWith("/");return l.pathname.endsWith("/")||!f&&!h||(l.pathname+="/"),l}var he=function(e){return e.join("/").replace(/\/\/+/g,"/")},de=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},pe=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},ve=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},me=function(e){N(n,e);var t=P(n);function n(){return _(this,n),t.apply(this,arguments)}return T(n)}(L(Error));function ye(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var ge=["post","put","patch","delete"],ke=(new Set(ge),["get"].concat(ge));new Set(ke),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function be(){return be=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},be.apply(this,arguments)}var we=t.createContext(null);var xe=t.createContext(null);var _e=t.createContext(null);var Ee=t.createContext(null);var Ie=t.createContext(null);var Se=t.createContext({outlet:null,matches:[],isDataRoute:!1});var Te=t.createContext(null);function Ce(){return null!=t.useContext(Ie)}function Ne(){return Ce()||z(!1),t.useContext(Ie).location}function Ae(e){t.useContext(Ee).static||t.useLayoutEffect(e)}function Re(){return t.useContext(Se).isDataRoute?function(){var e=ze(Le.UseNavigateStable).router,n=qe(Me.UseNavigateStable),r=t.useRef(!1);Ae((function(){r.current=!0}));var i=t.useCallback((function(t,i){void 0===i&&(i={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,be({fromRouteId:n},i)))}),[e,n]);return i}():function(){Ce()||z(!1);var e=t.useContext(we),n=t.useContext(Ee),r=n.basename,i=n.navigator,a=t.useContext(Se).matches,o=Ne().pathname,u=JSON.stringify(le(a).map((function(e){return e.pathnameBase}))),s=t.useRef(!1);Ae((function(){s.current=!0}));var c=t.useCallback((function(t,n){if(void 0===n&&(n={}),s.current)if("number"!==typeof t){var a=fe(t,JSON.parse(u),o,"path"===n.relative);null==e&&"/"!==r&&(a.pathname="/"===a.pathname?r:he([r,a.pathname])),(n.replace?i.replace:i.push)(a,n.state,n)}else i.go(t)}),[r,i,u,o,e]);return c}()}function De(e,n){var r=(void 0===n?{}:n).relative,i=t.useContext(Se).matches,a=Ne().pathname,o=JSON.stringify(le(i).map((function(e){return e.pathnameBase})));return t.useMemo((function(){return fe(e,JSON.parse(o),a,"path"===r)}),[e,o,a,r])}function Pe(e,n,r){Ce()||z(!1);var i,a=t.useContext(Ee).navigator,o=t.useContext(Se).matches,u=o[o.length-1],s=u?u.params:{},c=(u&&u.pathname,u?u.pathnameBase:"/"),f=(u&&u.route,Ne());if(n){var h,d="string"===typeof n?H(n):n;"/"===c||(null==(h=d.pathname)?void 0:h.startsWith(c))||z(!1),i=d}else i=f;var p=i.pathname||"/",v=Q(e,{pathname:"/"===c?p:p.slice(c.length)||"/"});var m=Ve(v&&v.map((function(e){return Object.assign({},e,{params:Object.assign({},s,e.params),pathname:he([c,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:he([c,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),o,r);return n&&m?t.createElement(Ie.Provider,{value:{location:be({pathname:"/",search:"",hash:"",state:null,key:"default"},i),navigationType:l.Pop}},m):m}function Oe(){var e=function(){var e,n=t.useContext(Te),r=Be(Me.UseRouteError),i=qe(Me.UseRouteError);if(n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=ye(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:a},r):null,null)}var Le,Me,Fe=t.createElement(Oe,null),je=function(e){N(r,e);var n=P(r);function r(e){var t;return _(this,r),(t=n.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},t}return T(r,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?t.createElement(Se.Provider,{value:this.props.routeContext},t.createElement(Te.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),r}(t.Component);function Ue(e){var n=e.routeContext,r=e.match,i=e.children,a=t.useContext(we);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(Se.Provider,{value:n},i)}function Ve(e,n,r){var i;if(void 0===n&&(n=[]),void 0===r&&(r=null),null==e){var a;if(null==(a=r)||!a.errors)return null;e=r.matches}var o=e,u=null==(i=r)?void 0:i.errors;if(null!=u){var s=o.findIndex((function(e){return e.route.id&&(null==u?void 0:u[e.route.id])}));s>=0||z(!1),o=o.slice(0,Math.min(o.length,s+1))}return o.reduceRight((function(e,i,a){var s=i.route.id?null==u?void 0:u[i.route.id]:null,c=null;r&&(c=i.route.errorElement||Fe);var l=n.concat(o.slice(0,a+1)),f=function(){var n;return n=s?c:i.route.Component?t.createElement(i.route.Component,null):i.route.element?i.route.element:e,t.createElement(Ue,{match:i,routeContext:{outlet:e,matches:l,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===a)?t.createElement(je,{location:r.location,revalidation:r.revalidation,component:c,error:s,children:f(),routeContext:{outlet:null,matches:l,isDataRoute:!0}}):f()}),null)}function ze(e){var n=t.useContext(we);return n||z(!1),n}function Be(e){var n=t.useContext(xe);return n||z(!1),n}function qe(e){var n=function(e){var n=t.useContext(Se);return n||z(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||z(!1),r.route.id}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"}(Le||(Le={})),function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"}(Me||(Me={}));var Ke;r.startTransition;function Ge(e){z(!1)}function He(e){var n=e.basename,r=void 0===n?"/":n,i=e.children,a=void 0===i?null:i,o=e.location,u=e.navigationType,s=void 0===u?l.Pop:u,c=e.navigator,f=e.static,h=void 0!==f&&f;Ce()&&z(!1);var d=r.replace(/^\/*/,"/"),p=t.useMemo((function(){return{basename:d,navigator:c,static:h}}),[d,c,h]);"string"===typeof o&&(o=H(o));var v=o,m=v.pathname,y=void 0===m?"/":m,g=v.search,k=void 0===g?"":g,b=v.hash,w=void 0===b?"":b,x=v.state,_=void 0===x?null:x,E=v.key,I=void 0===E?"default":E,S=t.useMemo((function(){var e=se(y,d);return null==e?null:{location:{pathname:e,search:k,hash:w,state:_,key:I},navigationType:s}}),[d,y,k,w,_,I,s]);return null==S?null:t.createElement(Ee.Provider,{value:p},t.createElement(Ie.Provider,{children:a,value:S}))}function We(e){var t=e.children,n=e.location;return Pe(Ye(t),n)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(Ke||(Ke={}));var Qe=new Promise((function(){}));t.Component;function Ye(e,n){void 0===n&&(n=[]);var r=[];return t.Children.forEach(e,(function(e,i){if(t.isValidElement(e)){var a=[].concat(x(n),[i]);if(e.type!==t.Fragment){e.type!==Ge&&z(!1),e.props.index&&e.props.children&&z(!1);var o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=Ye(e.props.children,a)),r.push(o)}else r.push.apply(r,Ye(e.props.children,a))}})),r}function $e(){return $e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$e.apply(this,arguments)}function Je(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);var Xe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];var Ze=r.startTransition;function et(e){var n,r=e.basename,i=e.children,a=e.future,o=e.window,u=t.useRef();null==u.current&&(u.current=(void 0===(n={window:o,v5Compat:!0})&&(n={}),W((function(e,t){var n=e.location;return K("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:G(t)}),null,n)));var s=u.current,l=c(t.useState({action:s.action,location:s.location}),2),f=l[0],h=l[1],d=(a||{}).v7_startTransition,p=t.useCallback((function(e){d&&Ze?Ze((function(){return h(e)})):h(e)}),[h,d]);return t.useLayoutEffect((function(){return s.listen(p)}),[s,p]),t.createElement(He,{basename:r,children:i,location:f.location,navigationType:f.action,navigator:s})}var tt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,nt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rt=t.forwardRef((function(e,n){var r,i=e.onClick,a=e.relative,o=e.reloadDocument,u=e.replace,s=e.state,c=e.target,l=e.to,f=e.preventScrollReset,h=Je(e,Xe),d=t.useContext(Ee).basename,p=!1;if("string"===typeof l&&nt.test(l)&&(r=l,tt))try{var v=new URL(window.location.href),m=l.startsWith("//")?new URL(v.protocol+l):new URL(l),y=se(m.pathname,d);m.origin===v.origin&&null!=y?l=y+m.search+m.hash:p=!0}catch(b){}var g=function(e,n){var r=(void 0===n?{}:n).relative;Ce()||z(!1);var i=t.useContext(Ee),a=i.basename,o=i.navigator,u=De(e,{relative:r}),s=u.hash,c=u.pathname,l=u.search,f=c;return"/"!==a&&(f="/"===c?a:he([a,c])),o.createHref({pathname:f,search:l,hash:s})}(l,{relative:a}),k=function(e,n){var r=void 0===n?{}:n,i=r.target,a=r.replace,o=r.state,u=r.preventScrollReset,s=r.relative,c=Re(),l=Ne(),f=De(e,{relative:s});return t.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,i)){t.preventDefault();var n=void 0!==a?a:G(l)===G(f);c(e,{replace:n,state:o,preventScrollReset:u,relative:s})}}),[l,c,f,a,o,i,e,u,s])}(l,{replace:u,state:s,target:c,preventScrollReset:f,relative:a});return t.createElement("a",$e({},h,{href:r||g,onClick:p||o?i:function(e){i&&i(e),e.defaultPrevented||k(e)},ref:n,target:c}))}));var it,at;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(it||(it={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(at||(at={}));var ot=n(184),ut=(0,t.createContext)(),st=function(e){var n=e.reducer,r=e.initialState,i=e.children;return(0,ot.jsx)(ut.Provider,{value:(0,t.useReducer)(n,r),children:i})},ct=function(){return(0,t.useContext)(ut)},lt=function(){var e=c(ct(),2),n=e[0].basket,r=(e[1],c((0,t.useState)("All"),2)),i=r[0],a=r[1];return(0,ot.jsx)(ot.Fragment,{children:(0,ot.jsxs)("div",{className:"header",children:[(0,ot.jsx)(rt,{to:"/",children:(0,ot.jsx)("img",{className:"header_logo",src:"https://pngimg.com/uploads/amazon/amazon_PNG11.png",alt:""})}),(0,ot.jsxs)("div",{className:"header_search",children:[(0,ot.jsx)("select",{value:i,onChange:function(e){a(e.target.value)},children:["All","Electronics","Books","Clothing","Home & Kitchen","Toys"].map((function(e){return(0,ot.jsx)("option",{value:e,children:e},e)}))}),(0,ot.jsx)("input",{className:"header_searchInput",type:"text"}),(0,ot.jsx)(k,{className:"header_searchIcon"})]}),(0,ot.jsxs)("div",{className:"header_nav",children:[(0,ot.jsx)(rt,{to:"/Signin",children:(0,ot.jsxs)("div",{className:"header_option",children:[(0,ot.jsx)("span",{className:"header_optionLineOne",children:"Hello Guest"}),(0,ot.jsx)("span",{className:"header_optionLineTwo",children:"Sign In"})]})}),(0,ot.jsxs)("div",{className:"header_option",children:[(0,ot.jsx)("span",{className:"header_optionLineOne",children:"Return"}),(0,ot.jsx)("span",{className:"header_optionLineTwo",children:"& Order"})]}),(0,ot.jsxs)("div",{className:"header_option",children:[(0,ot.jsx)("span",{className:"header_optionLineOne",children:"Your"}),(0,ot.jsx)("span",{className:"header_optionLineTwo",children:"Prime"})]}),(0,ot.jsx)(rt,{to:"/checkout",children:(0,ot.jsxs)("div",{className:"header_optionBasket",children:[(0,ot.jsx)("span",{className:"header_optionBasketCount",children:n.length}),(0,ot.jsx)(b,{className:"header_optionBasketIcon"})]})})]})]})})};function ft(){ft=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(N){s=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof h?t:h,o=Object.create(a.prototype),u=new S(i||[]);return r(o,"_invoke",{value:w(e,n,u)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(N){return{type:"throw",arg:N}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var v={};s(v,a,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(T([])));y&&y!==t&&n.call(y,a)&&(v=y);var g=p.prototype=h.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(r,a,o,u){var s=l(e[r],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==E(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,o,u)}),(function(e){i("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,u)}))}u(s.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return C()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=x(o,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function x(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return d.prototype=p,r(g,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:d,configurable:!0}),d.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,u,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},k(b.prototype),s(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new b(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(g),s(g,u,"Generator"),s(g,a,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function ht(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function dt(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){ht(a,r,i,o,u,"next",e)}function u(e){ht(a,r,i,o,u,"throw",e)}o(void 0)}))}}var pt=function(e){var t=e.id,n=e.title,r=e.price,i=e.image,a=e.rating,o=c(ct(),2),u=(o[0].basket,o[1]);return(0,ot.jsx)(ot.Fragment,{children:(0,ot.jsxs)("div",{className:"product",children:[(0,ot.jsxs)("div",{className:"product_info",children:[(0,ot.jsx)("p",{children:n}),(0,ot.jsxs)("p",{className:"product_price",children:[(0,ot.jsx)("small",{children:"\u20b9"}),(0,ot.jsx)("strong",{children:r})]}),(0,ot.jsx)("div",{className:"product_rating",children:Array(a).fill().map((function(e,t){return(0,ot.jsx)("p",{children:"\ud83c\udf1f"})}))})]}),(0,ot.jsx)("img",{className:"product_image",src:i,alt:""}),(0,ot.jsx)("button",{onClick:function(){u({type:"ADD_TO_BASKET",item:{id:t,title:n,image:i,price:r,rating:a}})},children:"Add to Basket"})]})})};function vt(e,t){return function(){return e.apply(t,arguments)}}var mt,yt=Object.prototype.toString,gt=Object.getPrototypeOf,kt=(mt=Object.create(null),function(e){var t=yt.call(e);return mt[t]||(mt[t]=t.slice(8,-1).toLowerCase())}),bt=function(e){return e=e.toLowerCase(),function(t){return kt(t)===e}},wt=function(e){return function(t){return typeof t===e}},xt=Array.isArray,_t=wt("undefined");var Et=bt("ArrayBuffer");var It=wt("string"),St=wt("function"),Tt=wt("number"),Ct=function(e){return null!==e&&"object"===typeof e},Nt=function(e){if("object"!==kt(e))return!1;var t=gt(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},At=bt("Date"),Rt=bt("File"),Dt=bt("Blob"),Pt=bt("FileList"),Ot=bt("URLSearchParams");function Lt(e,t){var n,r,i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).allOwnKeys,a=void 0!==i&&i;if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),xt(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{var o,u=a?Object.getOwnPropertyNames(e):Object.keys(e),s=u.length;for(n=0;n<s;n++)o=u[n],t.call(null,e[o],o,e)}}function Mt(e,t){t=t.toLowerCase();for(var n,r=Object.keys(e),i=r.length;i-- >0;)if(t===(n=r[i]).toLowerCase())return n;return null}var Ft="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,jt=function(e){return!_t(e)&&e!==Ft};var Ut,Vt=(Ut="undefined"!==typeof Uint8Array&&gt(Uint8Array),function(e){return Ut&&e instanceof Ut}),zt=bt("HTMLFormElement"),Bt=function(e){var t=Object.prototype.hasOwnProperty;return function(e,n){return t.call(e,n)}}(),qt=bt("RegExp"),Kt=function(e,t){var n=Object.getOwnPropertyDescriptors(e),r={};Lt(n,(function(n,i){!1!==t(n,i,e)&&(r[i]=n)})),Object.defineProperties(e,r)},Gt="abcdefghijklmnopqrstuvwxyz",Ht="0123456789",Wt={DIGIT:Ht,ALPHA:Gt,ALPHA_DIGIT:Gt+Gt.toUpperCase()+Ht};var Qt=bt("AsyncFunction"),Yt={isArray:xt,isArrayBuffer:Et,isBuffer:function(e){return null!==e&&!_t(e)&&null!==e.constructor&&!_t(e.constructor)&&St(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:function(e){var t;return e&&("function"===typeof FormData&&e instanceof FormData||St(e.append)&&("formdata"===(t=kt(e))||"object"===t&&St(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Et(e.buffer)},isString:It,isNumber:Tt,isBoolean:function(e){return!0===e||!1===e},isObject:Ct,isPlainObject:Nt,isUndefined:_t,isDate:At,isFile:Rt,isBlob:Dt,isRegExp:qt,isFunction:St,isStream:function(e){return Ct(e)&&St(e.pipe)},isURLSearchParams:Ot,isTypedArray:Vt,isFileList:Pt,forEach:Lt,merge:function e(){for(var t=(jt(this)&&this||{}).caseless,n={},r=function(r,i){var a=t&&Mt(n,i)||i;Nt(n[a])&&Nt(r)?n[a]=e(n[a],r):Nt(r)?n[a]=e({},r):xt(r)?n[a]=r.slice():n[a]=r},i=0,a=arguments.length;i<a;i++)arguments[i]&&Lt(arguments[i],r);return n},extend:function(e,t,n){return Lt(t,(function(t,r){n&&St(t)?e[r]=vt(t,n):e[r]=t}),{allOwnKeys:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).allOwnKeys}),e},trim:function(e){return e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n,r){var i,a,o,u={};if(t=t||{},null==e)return t;do{for(a=(i=Object.getOwnPropertyNames(e)).length;a-- >0;)o=i[a],r&&!r(o,e,t)||u[o]||(t[o]=e[o],u[o]=!0);e=!1!==n&&gt(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:kt,kindOfTest:bt,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;if(xt(e))return e;var t=e.length;if(!Tt(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},forEachEntry:function(e,t){for(var n,r=(e&&e[Symbol.iterator]).call(e);(n=r.next())&&!n.done;){var i=n.value;t.call(e,i[0],i[1])}},matchAll:function(e,t){for(var n,r=[];null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:zt,hasOwnProperty:Bt,hasOwnProp:Bt,reduceDescriptors:Kt,freezeMethods:function(e){Kt(e,(function(t,n){if(St(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;var r=e[n];St(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=function(){throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:function(e,t){var n={},r=function(e){e.forEach((function(e){n[e]=!0}))};return xt(e)?r(e):r(String(e).split(t)),n},toCamelCase:function(e){return e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))},noop:function(){},toFiniteNumber:function(e,t){return e=+e,Number.isFinite(e)?e:t},findKey:Mt,global:Ft,isContextDefined:jt,ALPHABET:Wt,generateString:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wt.ALPHA_DIGIT,n="",r=t.length;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&St(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:function(e){var t=new Array(10);return function e(n,r){if(Ct(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[r]=n;var i=xt(n)?[]:{};return Lt(n,(function(t,n){var a=e(t,r+1);!_t(a)&&(i[n]=a)})),t[r]=void 0,i}}return n}(e,0)},isAsyncFn:Qt,isThenable:function(e){return e&&(Ct(e)||St(e))&&St(e.then)&&St(e.catch)}};function $t(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}Yt.inherits($t,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Yt.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var Jt=$t.prototype,Xt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((function(e){Xt[e]={value:e}})),Object.defineProperties($t,Xt),Object.defineProperty(Jt,"isAxiosError",{value:!0}),$t.from=function(e,t,n,r,i,a){var o=Object.create(Jt);return Yt.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(function(e){return"isAxiosError"!==e})),$t.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,a&&Object.assign(o,a),o};var Zt=$t;function en(e){return Yt.isPlainObject(e)||Yt.isArray(e)}function tn(e){return Yt.endsWith(e,"[]")?e.slice(0,-2):e}function nn(e,t,n){return e?e.concat(t).map((function(e,t){return e=tn(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}var rn=Yt.toFlatObject(Yt,{},null,(function(e){return/^is[A-Z]/.test(e)}));var an=function(e,t,n){if(!Yt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;var r=(n=Yt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Yt.isUndefined(t[e])}))).metaTokens,i=n.visitor||c,a=n.dots,o=n.indexes,u=(n.Blob||"undefined"!==typeof Blob&&Blob)&&Yt.isSpecCompliantForm(t);if(!Yt.isFunction(i))throw new TypeError("visitor must be a function");function s(e){if(null===e)return"";if(Yt.isDate(e))return e.toISOString();if(!u&&Yt.isBlob(e))throw new Zt("Blob is not supported. Use a Buffer instead.");return Yt.isArrayBuffer(e)||Yt.isTypedArray(e)?u&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,i){var u=e;if(e&&!i&&"object"===typeof e)if(Yt.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(Yt.isArray(e)&&function(e){return Yt.isArray(e)&&!e.some(en)}(e)||(Yt.isFileList(e)||Yt.endsWith(n,"[]"))&&(u=Yt.toArray(e)))return n=tn(n),u.forEach((function(e,r){!Yt.isUndefined(e)&&null!==e&&t.append(!0===o?nn([n],r,a):null===o?n:n+"[]",s(e))})),!1;return!!en(e)||(t.append(nn(i,n,a),s(e)),!1)}var l=[],f=Object.assign(rn,{defaultVisitor:c,convertValue:s,isVisitable:en});if(!Yt.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!Yt.isUndefined(n)){if(-1!==l.indexOf(n))throw Error("Circular reference detected in "+r.join("."));l.push(n),Yt.forEach(n,(function(n,a){!0===(!(Yt.isUndefined(n)||null===n)&&i.call(t,n,Yt.isString(a)?a.trim():a,r,f))&&e(n,r?r.concat(a):[a])})),l.pop()}}(e),t};function on(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function un(e,t){this._pairs=[],e&&an(e,this,t)}var sn=un.prototype;sn.append=function(e,t){this._pairs.push([e,t])},sn.toString=function(e){var t=e?function(t){return e.call(this,t,on)}:on;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var cn=un;function ln(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function fn(e,t,n){if(!t)return e;var r,i=n&&n.encode||ln,a=n&&n.serialize;if(r=a?a(t,n):Yt.isURLSearchParams(t)?t.toString():new cn(t,n).toString(i)){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}var hn=function(){function e(){_(this,e),this.handlers=[]}return T(e,[{key:"use",value:function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}},{key:"eject",value:function(e){this.handlers[e]&&(this.handlers[e]=null)}},{key:"clear",value:function(){this.handlers&&(this.handlers=[])}},{key:"forEach",value:function(e){Yt.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}]),e}(),dn=hn,pn={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},vn={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:cn,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},isStandardBrowserEnv:function(){var e;return("undefined"===typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&("undefined"!==typeof window&&"undefined"!==typeof document)}(),isStandardBrowserWebWorkerEnv:"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,protocols:["http","https","file","blob","url","data"]};var mn=function(e){function t(e,n,r,i){var a=e[i++],o=Number.isFinite(+a),u=i>=e.length;return a=!a&&Yt.isArray(r)?r.length:a,u?(Yt.hasOwnProp(r,a)?r[a]=[r[a],n]:r[a]=n,!o):(r[a]&&Yt.isObject(r[a])||(r[a]=[]),t(e,n,r[a],i)&&Yt.isArray(r[a])&&(r[a]=function(e){var t,n,r={},i=Object.keys(e),a=i.length;for(t=0;t<a;t++)r[n=i[t]]=e[n];return r}(r[a])),!o)}if(Yt.isFormData(e)&&Yt.isFunction(e.entries)){var n={};return Yt.forEachEntry(e,(function(e,r){t(function(e){return Yt.matchAll(/\w+|\[(\w*)]/g,e).map((function(e){return"[]"===e[0]?"":e[1]||e[0]}))}(e),r,n,0)})),n}return null},yn={"Content-Type":void 0};var gn={transitional:pn,adapter:["xhr","http"],transformRequest:[function(e,t){var n,r=t.getContentType()||"",i=r.indexOf("application/json")>-1,a=Yt.isObject(e);if(a&&Yt.isHTMLForm(e)&&(e=new FormData(e)),Yt.isFormData(e))return i&&i?JSON.stringify(mn(e)):e;if(Yt.isArrayBuffer(e)||Yt.isBuffer(e)||Yt.isStream(e)||Yt.isFile(e)||Yt.isBlob(e))return e;if(Yt.isArrayBufferView(e))return e.buffer;if(Yt.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return an(e,new vn.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return vn.isNode&&Yt.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((n=Yt.isFileList(e))||r.indexOf("multipart/form-data")>-1){var o=this.env&&this.env.FormData;return an(n?{"files[]":e}:e,o&&new o,this.formSerializer)}}return a||i?(t.setContentType("application/json",!1),function(e,t,n){if(Yt.isString(e))try{return(t||JSON.parse)(e),Yt.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||gn.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&Yt.isString(e)&&(n&&!this.responseType||r)){var i=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(a){if(i){if("SyntaxError"===a.name)throw Zt.from(a,Zt.ERR_BAD_RESPONSE,this,null,this.response);throw a}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:vn.classes.FormData,Blob:vn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Yt.forEach(["delete","get","head"],(function(e){gn.headers[e]={}})),Yt.forEach(["post","put","patch"],(function(e){gn.headers[e]=Yt.merge(yn)}));var kn=gn,bn=Yt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),wn=Symbol("internals");function xn(e){return e&&String(e).trim().toLowerCase()}function _n(e){return!1===e||null==e?e:Yt.isArray(e)?e.map(_n):String(e)}function En(e,t,n,r,i){return Yt.isFunction(r)?r.call(this,t,n):(i&&(t=n),Yt.isString(t)?Yt.isString(r)?-1!==t.indexOf(r):Yt.isRegExp(r)?r.test(t):void 0:void 0)}var In=function(e,t){function n(e){_(this,n),e&&this.set(e)}return T(n,[{key:"set",value:function(e,t,n){var r=this;function i(e,t,n){var i=xn(t);if(!i)throw new Error("header name must be a non-empty string");var a=Yt.findKey(r,i);(!a||void 0===r[a]||!0===n||void 0===n&&!1!==r[a])&&(r[a||t]=_n(e))}var a=function(e,t){return Yt.forEach(e,(function(e,n){return i(e,n,t)}))};return Yt.isPlainObject(e)||e instanceof this.constructor?a(e,t):Yt.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?a(function(e){var t,n,r,i={};return e&&e.split("\n").forEach((function(e){r=e.indexOf(":"),t=e.substring(0,r).trim().toLowerCase(),n=e.substring(r+1).trim(),!t||i[t]&&bn[t]||("set-cookie"===t?i[t]?i[t].push(n):i[t]=[n]:i[t]=i[t]?i[t]+", "+n:n)})),i}(e),t):null!=e&&i(t,e,n),this}},{key:"get",value:function(e,t){if(e=xn(e)){var n=Yt.findKey(this,e);if(n){var r=this[n];if(!t)return r;if(!0===t)return function(e){for(var t,n=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;t=r.exec(e);)n[t[1]]=t[2];return n}(r);if(Yt.isFunction(t))return t.call(this,r,n);if(Yt.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}},{key:"has",value:function(e,t){if(e=xn(e)){var n=Yt.findKey(this,e);return!(!n||void 0===this[n]||t&&!En(0,this[n],n,t))}return!1}},{key:"delete",value:function(e,t){var n=this,r=!1;function i(e){if(e=xn(e)){var i=Yt.findKey(n,e);!i||t&&!En(0,n[i],i,t)||(delete n[i],r=!0)}}return Yt.isArray(e)?e.forEach(i):i(e),r}},{key:"clear",value:function(e){for(var t=Object.keys(this),n=t.length,r=!1;n--;){var i=t[n];e&&!En(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}},{key:"normalize",value:function(e){var t=this,n={};return Yt.forEach(this,(function(r,i){var a=Yt.findKey(n,i);if(a)return t[a]=_n(r),void delete t[i];var o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))}(i):String(i).trim();o!==i&&delete t[i],t[o]=_n(r),n[o]=!0})),this}},{key:"concat",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.constructor).concat.apply(e,[this].concat(n))}},{key:"toJSON",value:function(e){var t=Object.create(null);return Yt.forEach(this,(function(n,r){null!=n&&!1!==n&&(t[r]=e&&Yt.isArray(n)?n.join(", "):n)})),t}},{key:Symbol.iterator,value:function(){return Object.entries(this.toJSON())[Symbol.iterator]()}},{key:"toString",value:function(){return Object.entries(this.toJSON()).map((function(e){var t=c(e,2);return t[0]+": "+t[1]})).join("\n")}},{key:Symbol.toStringTag,get:function(){return"AxiosHeaders"}}],[{key:"from",value:function(e){return e instanceof this?e:new this(e)}},{key:"concat",value:function(e){for(var t=new this(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((function(e){return t.set(e)})),t}},{key:"accessor",value:function(e){var t=(this[wn]=this[wn]={accessors:{}}).accessors,n=this.prototype;function r(e){var r=xn(e);t[r]||(!function(e,t){var n=Yt.toCamelCase(" "+t);["get","set","has"].forEach((function(r){Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return Yt.isArray(e)?e.forEach(r):r(e),this}}]),n}();In.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Yt.freezeMethods(In.prototype),Yt.freezeMethods(In);var Sn=In;function Tn(e,t){var n=this||kn,r=t||n,i=Sn.from(r.headers),a=r.data;return Yt.forEach(e,(function(e){a=e.call(n,a,i.normalize(),t?t.status:void 0)})),i.normalize(),a}function Cn(e){return!(!e||!e.__CANCEL__)}function Nn(e,t,n){Zt.call(this,null==e?"canceled":e,Zt.ERR_CANCELED,t,n),this.name="CanceledError"}Yt.inherits(Nn,Zt,{__CANCEL__:!0});var An=Nn;var Rn=vn.isStandardBrowserEnv?{write:function(e,t,n,r,i,a){var o=[];o.push(e+"="+encodeURIComponent(t)),Yt.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Yt.isString(r)&&o.push("path="+r),Yt.isString(i)&&o.push("domain="+i),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function Dn(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}var Pn=vn.isStandardBrowserEnv?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=Yt.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0};var On=function(e,t){e=e||10;var n,r=new Array(e),i=new Array(e),a=0,o=0;return t=void 0!==t?t:1e3,function(u){var s=Date.now(),c=i[o];n||(n=s),r[a]=u,i[a]=s;for(var l=o,f=0;l!==a;)f+=r[l++],l%=e;if((a=(a+1)%e)===o&&(o=(o+1)%e),!(s-n<t)){var h=c&&s-c;return h?Math.round(1e3*f/h):void 0}}};function Ln(e,t){var n=0,r=On(50,250);return function(i){var a=i.loaded,o=i.lengthComputable?i.total:void 0,u=a-n,s=r(u);n=a;var c={loaded:a,total:o,progress:o?a/o:void 0,bytes:u,rate:s||void 0,estimated:s&&o&&a<=o?(o-a)/s:void 0,event:i};c[t?"download":"upload"]=!0,e(c)}}var Mn={http:null,xhr:"undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){var r,i=e.data,a=Sn.from(e.headers).normalize(),o=e.responseType;function u(){e.cancelToken&&e.cancelToken.unsubscribe(r),e.signal&&e.signal.removeEventListener("abort",r)}Yt.isFormData(i)&&(vn.isStandardBrowserEnv||vn.isStandardBrowserWebWorkerEnv?a.setContentType(!1):a.setContentType("multipart/form-data;",!1));var s=new XMLHttpRequest;if(e.auth){var c=e.auth.username||"",l=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";a.set("Authorization","Basic "+btoa(c+":"+l))}var f=Dn(e.baseURL,e.url);function h(){if(s){var r=Sn.from("getAllResponseHeaders"in s&&s.getAllResponseHeaders());!function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new Zt("Request failed with status code "+n.status,[Zt.ERR_BAD_REQUEST,Zt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),u()}),(function(e){n(e),u()}),{data:o&&"text"!==o&&"json"!==o?s.response:s.responseText,status:s.status,statusText:s.statusText,headers:r,config:e,request:s}),s=null}}if(s.open(e.method.toUpperCase(),fn(f,e.params,e.paramsSerializer),!0),s.timeout=e.timeout,"onloadend"in s?s.onloadend=h:s.onreadystatechange=function(){s&&4===s.readyState&&(0!==s.status||s.responseURL&&0===s.responseURL.indexOf("file:"))&&setTimeout(h)},s.onabort=function(){s&&(n(new Zt("Request aborted",Zt.ECONNABORTED,e,s)),s=null)},s.onerror=function(){n(new Zt("Network Error",Zt.ERR_NETWORK,e,s)),s=null},s.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||pn;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new Zt(t,r.clarifyTimeoutError?Zt.ETIMEDOUT:Zt.ECONNABORTED,e,s)),s=null},vn.isStandardBrowserEnv){var d=(e.withCredentials||Pn(f))&&e.xsrfCookieName&&Rn.read(e.xsrfCookieName);d&&a.set(e.xsrfHeaderName,d)}void 0===i&&a.setContentType(null),"setRequestHeader"in s&&Yt.forEach(a.toJSON(),(function(e,t){s.setRequestHeader(t,e)})),Yt.isUndefined(e.withCredentials)||(s.withCredentials=!!e.withCredentials),o&&"json"!==o&&(s.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&s.addEventListener("progress",Ln(e.onDownloadProgress,!0)),"function"===typeof e.onUploadProgress&&s.upload&&s.upload.addEventListener("progress",Ln(e.onUploadProgress)),(e.cancelToken||e.signal)&&(r=function(t){s&&(n(!t||t.type?new An(null,e,s):t),s.abort(),s=null)},e.cancelToken&&e.cancelToken.subscribe(r),e.signal&&(e.signal.aborted?r():e.signal.addEventListener("abort",r)));var p=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(f);p&&-1===vn.protocols.indexOf(p)?n(new Zt("Unsupported protocol "+p+":",Zt.ERR_BAD_REQUEST,e)):s.send(i||null)}))}};Yt.forEach(Mn,(function(e,t){if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}}));var Fn=function(e){for(var t,n,r=(e=Yt.isArray(e)?e:[e]).length,i=0;i<r&&(t=e[i],!(n=Yt.isString(t)?Mn[t.toLowerCase()]:t));i++);if(!n){if(!1===n)throw new Zt("Adapter ".concat(t," is not supported by the environment"),"ERR_NOT_SUPPORT");throw new Error(Yt.hasOwnProp(Mn,t)?"Adapter '".concat(t,"' is not available in the build"):"Unknown adapter '".concat(t,"'"))}if(!Yt.isFunction(n))throw new TypeError("adapter is not a function");return n};function jn(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new An(null,e)}function Un(e){return jn(e),e.headers=Sn.from(e.headers),e.data=Tn.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Fn(e.adapter||kn.adapter)(e).then((function(t){return jn(e),t.data=Tn.call(e,e.transformResponse,t),t.headers=Sn.from(t.headers),t}),(function(t){return Cn(t)||(jn(e),t&&t.response&&(t.response.data=Tn.call(e,e.transformResponse,t.response),t.response.headers=Sn.from(t.response.headers))),Promise.reject(t)}))}var Vn=function(e){return e instanceof Sn?e.toJSON():e};function zn(e,t){t=t||{};var n={};function r(e,t,n){return Yt.isPlainObject(e)&&Yt.isPlainObject(t)?Yt.merge.call({caseless:n},e,t):Yt.isPlainObject(t)?Yt.merge({},t):Yt.isArray(t)?t.slice():t}function i(e,t,n){return Yt.isUndefined(t)?Yt.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function a(e,t){if(!Yt.isUndefined(t))return r(void 0,t)}function o(e,t){return Yt.isUndefined(t)?Yt.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function u(n,i,a){return a in t?r(n,i):a in e?r(void 0,n):void 0}var s={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:u,headers:function(e,t){return i(Vn(e),Vn(t),!0)}};return Yt.forEach(Object.keys(Object.assign({},e,t)),(function(r){var a=s[r]||i,o=a(e[r],t[r],r);Yt.isUndefined(o)&&a!==u||(n[r]=o)})),n}var Bn="1.4.0",qn={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){qn[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var Kn={};qn.transitional=function(e,t,n){function r(e,t){return"[Axios v1.4.0] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,i,a){if(!1===e)throw new Zt(r(i," has been removed"+(t?" in "+t:"")),Zt.ERR_DEPRECATED);return t&&!Kn[i]&&(Kn[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,a)}};var Gn={assertOptions:function(e,t,n){if("object"!==typeof e)throw new Zt("options must be an object",Zt.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),i=r.length;i-- >0;){var a=r[i],o=t[a];if(o){var u=e[a],s=void 0===u||o(u,a,e);if(!0!==s)throw new Zt("option "+a+" must be "+s,Zt.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Zt("Unknown option "+a,Zt.ERR_BAD_OPTION)}},validators:qn},Hn=Gn.validators,Wn=function(){function e(t){_(this,e),this.defaults=t,this.interceptors={request:new dn,response:new dn}}return T(e,[{key:"request",value:function(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{};var n,r=t=zn(this.defaults,t),i=r.transitional,a=r.paramsSerializer,o=r.headers;void 0!==i&&Gn.assertOptions(i,{silentJSONParsing:Hn.transitional(Hn.boolean),forcedJSONParsing:Hn.transitional(Hn.boolean),clarifyTimeoutError:Hn.transitional(Hn.boolean)},!1),null!=a&&(Yt.isFunction(a)?t.paramsSerializer={serialize:a}:Gn.assertOptions(a,{encode:Hn.function,serialize:Hn.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase(),(n=o&&Yt.merge(o.common,o[t.method]))&&Yt.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete o[e]})),t.headers=Sn.concat(n,o);var u=[],s=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,u.unshift(e.fulfilled,e.rejected))}));var c,l=[];this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));var f,h=0;if(!s){var d=[Un.bind(this),void 0];for(d.unshift.apply(d,u),d.push.apply(d,l),f=d.length,c=Promise.resolve(t);h<f;)c=c.then(d[h++],d[h++]);return c}f=u.length;var p=t;for(h=0;h<f;){var v=u[h++],m=u[h++];try{p=v(p)}catch(y){m.call(this,y);break}}try{c=Un.call(this,p)}catch(y){return Promise.reject(y)}for(h=0,f=l.length;h<f;)c=c.then(l[h++],l[h++]);return c}},{key:"getUri",value:function(e){return fn(Dn((e=zn(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}]),e}();Yt.forEach(["delete","get","head","options"],(function(e){Wn.prototype[e]=function(t,n){return this.request(zn(n||{},{method:e,url:t,data:(n||{}).data}))}})),Yt.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(zn(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Wn.prototype[e]=t(),Wn.prototype[e+"Form"]=t(!0)}));var Qn=Wn,Yn=function(){function e(t){if(_(this,e),"function"!==typeof t)throw new TypeError("executor must be a function.");var n;this.promise=new Promise((function(e){n=e}));var r=this;this.promise.then((function(e){if(r._listeners){for(var t=r._listeners.length;t-- >0;)r._listeners[t](e);r._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},t((function(e,t,i){r.reason||(r.reason=new An(e,t,i),n(r.reason))}))}return T(e,[{key:"throwIfRequested",value:function(){if(this.reason)throw this.reason}},{key:"subscribe",value:function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}},{key:"unsubscribe",value:function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}}}],[{key:"source",value:function(){var t;return{token:new e((function(e){t=e})),cancel:t}}}]),e}();var $n={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries($n).forEach((function(e){var t=c(e,2),n=t[0],r=t[1];$n[r]=n}));var Jn=$n;var Xn=function e(t){var n=new Qn(t),r=vt(Qn.prototype.request,n);return Yt.extend(r,Qn.prototype,n,{allOwnKeys:!0}),Yt.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(zn(t,n))},r}(kn);Xn.Axios=Qn,Xn.CanceledError=An,Xn.CancelToken=Yn,Xn.isCancel=Cn,Xn.VERSION=Bn,Xn.toFormData=an,Xn.AxiosError=Zt,Xn.Cancel=Xn.CanceledError,Xn.all=function(e){return Promise.all(e)},Xn.spread=function(e){return function(t){return e.apply(null,t)}},Xn.isAxiosError=function(e){return Yt.isObject(e)&&!0===e.isAxiosError},Xn.mergeConfig=zn,Xn.AxiosHeaders=Sn,Xn.formToJSON=function(e){return mn(Yt.isHTMLForm(e)?new FormData(e):e)},Xn.HttpStatusCode=Jn,Xn.default=Xn;var Zn=Xn,er=function(){var e=dt(ft().mark((function e(){var t;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zn.get("https://fakestoreapi.com/products");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),tr=function(){var e=c((0,t.useState)([]),2),n=e[0],r=e[1],i=function(){var e=dt(ft().mark((function e(){var t;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,er();case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,t.useEffect)((function(){i()}),[]),(0,ot.jsx)(ot.Fragment,{children:(0,ot.jsx)("div",{className:"home",children:(0,ot.jsxs)("div",{className:"home_container",children:[(0,ot.jsx)("img",{className:"home_containerLogo",src:"https://m.media-amazon.com/images/I/81cP1IAxf-L._SX3000_.jpg",alt:""}),(0,ot.jsx)("div",{className:"home_row1",children:n.map((function(e){return(0,ot.jsxs)("div",{className:"product_container",children:[(0,ot.jsx)(pt,{id:e.id,title:e.title,price:e.price,image:e.image,rating:Math.floor(e.rating.rate)}),console.log(Math.floor(e.rating.rate))]})}))}),(0,ot.jsx)("div",{className:"home_row"})]})})})},nr=function(){var e=c(ct(),2),n=e[0].basket,r=(e[1],c((0,t.useState)(),2)),i=r[0],a=r[1];return(0,t.useEffect)((function(){a(n.reduce((function(e,t){return e+t.price}),0))})),(0,ot.jsxs)("div",{className:"subtotal",children:[(0,ot.jsxs)("p",{children:["Subtotal (",n.length," items):",(0,ot.jsxs)("strong",{children:["Rs.",i]})]}),(0,ot.jsxs)("small",{className:"subtotal_gift",children:[(0,ot.jsx)("input",{type:"checkbox"}),"This order contains a gift"]}),(0,ot.jsx)("button",{children:"Proceed to Checkout"})]})},rr=function(e){var t=e.id,n=e.image,r=e.title,i=e.price,a=e.rating,o=c(ct(),2),u=(o[0].basket,o[1]);return(0,ot.jsx)(ot.Fragment,{children:(0,ot.jsxs)("div",{className:"checkoutProduct",children:[(0,ot.jsx)("img",{className:"checkoutProduct_image",src:n}),(0,ot.jsxs)("div",{className:"checkoutProduct_info",children:[(0,ot.jsx)("p",{className:"checkoutProduct_title",children:r}),(0,ot.jsxs)("p",{className:"checkoutProduc_price",children:[(0,ot.jsx)("small",{children:"Rs"}),(0,ot.jsx)("strong",{children:i})]}),(0,ot.jsx)("div",{className:"checkoutProduct_rating",children:Array(a).fill().map((function(e,t){return(0,ot.jsx)("p",{children:"\ud83c\udf1f"})}))}),(0,ot.jsx)("button",{onClick:function(){u({type:"Remove_From_Basket",id:t})},children:"remove from Basket"})]})]})})},ir=function(){var e=c(ct(),2),t=e[0].basket;e[1];return(0,ot.jsx)("div",{children:(0,ot.jsxs)("div",{className:"checkout",children:[(0,ot.jsxs)("div",{className:"checkout_left",children:[(0,ot.jsx)("img",{className:"checkout_add",src:"https://images-na.ssl-images-amazon.com/images/G/02/UK_CCMP/TM/OCC_Amazon1._CB423492668.JPG",alt:""}),(0,ot.jsxs)("div",{className:"checkout_title",children:[(0,ot.jsx)("h2",{children:"Your Shopping Basket"}),t.map((function(e){return(0,ot.jsx)(rr,{id:e.id,title:e.title,price:e.price,image:e.image,rating:e.rating})}))]})]}),(0,ot.jsxs)("div",{className:"checkout_right",children:[(0,ot.jsx)("h2",{children:"The subtotal will go here"}),(0,ot.jsx)(nr,{})]})]})})};function ar(e,t,n){return(t=I(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var or=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},ur={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(or(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new sr;var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},sr=function(e){N(n,e);var t=P(n);function n(){var e;return _(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return T(n)}(L(Error)),cr=function(e){return function(e){var t=or(e);return ur.encodeByteArray(t,!0)}(e).replace(/\./g,"")},lr=function(e){try{return ur.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function fr(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=fr(e[n],t[n]));return e}var hr=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},dr=function(){try{return hr()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/amazon-clon-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&lr(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},pr=function(){var e;return null===(e=dr())||void 0===e?void 0:e.config},vr=function(){function e(){var t=this;_(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return T(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function mr(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function yr(){var e,t=null===(e=dr())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function gr(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function kr(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function br(){var e=mr();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function wr(){try{return"object"===typeof indexedDB}catch(e){return!1}}var xr=function(e){N(n,e);var t=P(n);function n(e,r,i){var a;return _(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(D(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(D(a),_r.prototype.create),a}return T(n)}(L(Error)),_r=function(){function e(t,n,r){_(this,e),this.service=t,this.serviceName=n,this.errors=r}return T(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Er,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new xr(n,a,t)}}]),e}();var Er=/\{\$([^}]+)}/g;function Ir(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Sr(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Tr(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(Cr(u)&&Cr(s)){if(!Tr(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Cr(e){return null!==e&&"object"===typeof e}function Nr(e){for(var t=[],n=function(){var e=c(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Ar(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=c(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Rr(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Dr(e,t){var n=new Pr(e,t);return n.subscribe.bind(n)}var Pr=function(){function e(t,n){var r=this;_(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return T(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=F(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Or),void 0===r.error&&(r.error=Or),void 0===r.complete&&(r.complete=Or);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Or(){}function Lr(e){return e&&e._delegate?e._delegate:e}var Mr=function(){function e(t,n,r){_(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return T(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Fr="[DEFAULT]",jr=function(){function e(t,n){_(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return T(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new vr;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Fr})}catch(s){}var t,n=F(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=c(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fr;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=dt(ft().mark((function e(){var t;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(x(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),x(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fr;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fr;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=F(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=c(i.value,2),s=u[0],l=u[1];r===this.normalizeInstanceIdentifier(s)&&l.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=F(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(yT){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Fr?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(yT){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fr;return this.component?this.component.multipleInstances?e:Fr:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Ur,Vr,zr=function(){function e(t){_(this,e),this.name=t,this.providers=new Map}return T(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new jr(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Br=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Vr||(Vr={}));var qr={debug:Vr.DEBUG,verbose:Vr.VERBOSE,info:Vr.INFO,warn:Vr.WARN,error:Vr.ERROR,silent:Vr.SILENT},Kr=Vr.INFO,Gr=(ar(Ur={},Vr.DEBUG,"log"),ar(Ur,Vr.VERBOSE,"log"),ar(Ur,Vr.INFO,"info"),ar(Ur,Vr.WARN,"warn"),ar(Ur,Vr.ERROR,"error"),Ur),Hr=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Gr[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Wr=function(){function e(t){_(this,e),this.name=t,this._logLevel=Kr,this._logHandler=Hr,this._userLogHandler=null,Br.push(this)}return T(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Vr))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?qr[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Vr.DEBUG].concat(t)),this._logHandler.apply(this,[this,Vr.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Vr.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Vr.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Vr.INFO].concat(t)),this._logHandler.apply(this,[this,Vr.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Vr.WARN].concat(t)),this._logHandler.apply(this,[this,Vr.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Vr.ERROR].concat(t)),this._logHandler.apply(this,[this,Vr.ERROR].concat(t))}}]),e}();function Qr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qr(Object(n),!0).forEach((function(t){ar(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $r,Jr,Xr=function(e,t){return t.some((function(t){return e instanceof t}))};var Zr=new WeakMap,ei=new WeakMap,ti=new WeakMap,ni=new WeakMap,ri=new WeakMap;var ii={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ei.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ti.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ui(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function ai(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Jr||(Jr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(si(this),n),ui(Zr.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ui(e.apply(si(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[si(this),t].concat(r));return ti.set(a,t.sort?t.sort():[t]),ui(a)}}function oi(e){return"function"===typeof e?ai(e):(e instanceof IDBTransaction&&function(e){if(!ei.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));ei.set(e,t)}}(e),Xr(e,$r||($r=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,ii):e)}function ui(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(ui(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Zr.set(t,e)})).catch((function(){})),ri.set(t,e),t}(e);if(ni.has(e))return ni.get(e);var t=oi(e);return t!==e&&(ni.set(e,t),ri.set(t,e)),t}var si=function(e){return ri.get(e)};var ci,li,fi=["get","getKey","getAll","getAllKeys","count"],hi=["put","add","delete","clear"],di=new Map;function pi(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(di.get(t))return di.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=hi.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||fi.includes(n))){var a=function(){var e=dt(ft().mark((function e(t){var a,o,u,s,c,l,f=arguments;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return di.set(t,a),a}}}ii=function(e){return Yr(Yr({},e),{},{get:function(t,n,r){return pi(t,n)||e.get(t,n,r)},has:function(t,n){return!!pi(t,n)||e.has(t,n)}})}(ii);var vi=function(){function e(t){_(this,e),this.container=t}return T(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var mi="@firebase/app",yi="0.9.13",gi=new Wr("@firebase/app"),ki="[DEFAULT]",bi=(ar(ci={},mi,"fire-core"),ar(ci,"@firebase/app-compat","fire-core-compat"),ar(ci,"@firebase/analytics","fire-analytics"),ar(ci,"@firebase/analytics-compat","fire-analytics-compat"),ar(ci,"@firebase/app-check","fire-app-check"),ar(ci,"@firebase/app-check-compat","fire-app-check-compat"),ar(ci,"@firebase/auth","fire-auth"),ar(ci,"@firebase/auth-compat","fire-auth-compat"),ar(ci,"@firebase/database","fire-rtdb"),ar(ci,"@firebase/database-compat","fire-rtdb-compat"),ar(ci,"@firebase/functions","fire-fn"),ar(ci,"@firebase/functions-compat","fire-fn-compat"),ar(ci,"@firebase/installations","fire-iid"),ar(ci,"@firebase/installations-compat","fire-iid-compat"),ar(ci,"@firebase/messaging","fire-fcm"),ar(ci,"@firebase/messaging-compat","fire-fcm-compat"),ar(ci,"@firebase/performance","fire-perf"),ar(ci,"@firebase/performance-compat","fire-perf-compat"),ar(ci,"@firebase/remote-config","fire-rc"),ar(ci,"@firebase/remote-config-compat","fire-rc-compat"),ar(ci,"@firebase/storage","fire-gcs"),ar(ci,"@firebase/storage-compat","fire-gcs-compat"),ar(ci,"@firebase/firestore","fire-fst"),ar(ci,"@firebase/firestore-compat","fire-fst-compat"),ar(ci,"fire-js","fire-js"),ar(ci,"firebase","fire-js-all"),ci),wi=new Map,xi=new Map;function _i(e,t){try{e.container.addComponent(t)}catch(n){gi.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Ei(e,t){e.container.addOrOverwriteComponent(t)}function Ii(e){var t=e.name;if(xi.has(t))return gi.debug("There were multiple attempts to register component ".concat(t,".")),!1;xi.set(t,e);var n,r=F(wi.values());try{for(r.s();!(n=r.n()).done;){_i(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Si(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ti(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ki;Si(e,t).clearInstance(n)}function Ci(){xi.clear()}var Ni=(ar(li={},"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),ar(li,"bad-app-name","Illegal App name: '{$appName}"),ar(li,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),ar(li,"app-deleted","Firebase App named '{$appName}' already deleted"),ar(li,"no-options","Need to provide options, when not being deployed to hosting via source."),ar(li,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),ar(li,"invalid-log-argument","First argument to `onLog` must be null or a function."),ar(li,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),ar(li,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),ar(li,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),ar(li,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),li),Ai=new _r("app","Firebase",Ni),Ri=function(){function e(t,n,r){var i=this;_(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Mr("app",(function(){return i}),"PUBLIC"))}return T(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Ai.create("app-deleted",{appName:this._name})}}]),e}(),Di="9.23.0";function Pi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:ki,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Ai.create("bad-app-name",{appName:String(i)});if(n||(n=pr()),!n)throw Ai.create("no-options");var a=wi.get(i);if(a){if(Tr(n,a.options)&&Tr(r,a.config))return a;throw Ai.create("duplicate-app",{appName:i})}var o,u=new zr(i),s=F(xi.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new Ri(n,r,u);return wi.set(i,l),l}function Oi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ki,t=wi.get(e);if(!t&&e===ki&&pr())return Pi();if(!t)throw Ai.create("no-app",{appName:e});return t}function Li(){return Array.from(wi.values())}function Mi(e){return Fi.apply(this,arguments)}function Fi(){return(Fi=dt(ft().mark((function e(t){var n;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!wi.has(n)){e.next=6;break}return wi.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ji(e,t,n){var r,i=null!==(r=bi[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void gi.warn(u.join(" "))}Ii(new Mr("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Ui(e,t){if(null!==e&&"function"!==typeof e)throw Ai.create("invalid-log-argument");!function(e,t){var n,r=F(Br);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=qr[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Vr[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Vi(e){var t;t=e,Br.forEach((function(e){e.setLogLevel(t)}))}var zi="firebase-heartbeat-database",Bi=1,qi="firebase-heartbeat-store",Ki=null;function Gi(){return Ki||(Ki=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=ui(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(ui(u.result),e.oldVersion,e.newVersion,ui(u.transaction),e)})),r&&u.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),s}(zi,Bi,{upgrade:function(e,t){if(0===t)e.createObjectStore(qi)}}).catch((function(e){throw Ai.create("idb-open",{originalErrorMessage:e.message})}))),Ki}function Hi(e){return Wi.apply(this,arguments)}function Wi(){return Wi=dt(ft().mark((function e(t){var n,r,i;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Gi();case 3:return n=e.sent,e.next=6,n.transaction(qi).objectStore(qi).get($i(t));case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),e.t0 instanceof xr?gi.warn(e.t0.message):(i=Ai.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),gi.warn(i.message));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),Wi.apply(this,arguments)}function Qi(e,t){return Yi.apply(this,arguments)}function Yi(){return Yi=dt(ft().mark((function e(t,n){var r,i,a,o;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Gi();case 3:return r=e.sent,i=r.transaction(qi,"readwrite"),a=i.objectStore(qi),e.next=8,a.put(n,$i(t));case 8:return e.next=10,i.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof xr?gi.warn(e.t0.message):(o=Ai.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),gi.warn(o.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),Yi.apply(this,arguments)}function $i(e){return"".concat(e.name,"!").concat(e.options.appId)}var Ji=function(){function e(t){var n=this;_(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new na(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return T(e,[{key:"triggerHeartbeat",value:function(){var e=dt(ft().mark((function e(){var t,n,r;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Xi(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=dt(ft().mark((function e(){var t,n,r,i,a;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Xi(),n=Zi(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=cr(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Xi(){return(new Date).toISOString().substring(0,10)}function Zi(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=F(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),ra(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),ra(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var ea,ta,na=function(){function e(t){_(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return T(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=dt(ft().mark((function e(){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(wr()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=dt(ft().mark((function e(){var t;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Hi(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=dt(ft().mark((function e(t){var n,r;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Qi(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=dt(ft().mark((function e(t){var n,r;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Qi(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(x(r.heartbeats),x(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function ra(e){return cr(JSON.stringify({version:2,heartbeats:e})).length}ea="",Ii(new Mr("platform-logger",(function(e){return new vi(e)}),"PRIVATE")),Ii(new Mr("heartbeat",(function(e){return new Ji(e)}),"PRIVATE")),ji(mi,yi,ea),ji(mi,yi,"esm2017"),ji("fire-js","");var ia=function(){function e(t,n){var r=this;_(this,e),this._delegate=t,this.firebase=n,_i(t,new Mr("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return T(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Mi(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ki;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ki;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){_i(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Ei(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),aa=(ar(ta={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),ar(ta,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),ta),oa=new _r("app-compat","Firebase",aa);var ua=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Pi(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Ir(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:ji,setLogLevel:Vi,onLog:Ui,apps:null,SDK_VERSION:Di,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Ii(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw oa.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&fr(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Ir(n,e=e||ki))throw oa.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(ia);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){fr(n,e)},createSubscribe:Dr,ErrorFactory:_r,deepExtend:fr}),n}(),sa=new Wr("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){sa.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var ca=self.firebase.SDK_VERSION;ca&&ca.indexOf("LITE")>=0&&sa.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var la=ua;!function(e){ji("@firebase/app-compat","0.2.13",e)}();function fa(){return fa="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},fa.apply(this,arguments)}la.registerVersion("firebase","9.23.0","app-compat");function ha(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var da,pa={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},va="EMAIL_SIGNIN",ma="PASSWORD_RESET",ya="RECOVER_EMAIL",ga="REVERT_SECOND_FACTOR_ADDITION",ka="VERIFY_AND_CHANGE_EMAIL",ba="VERIFY_EMAIL";function wa(){return ar({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var xa=function(){var e;return ar(e={},"admin-restricted-operation","This operation is restricted to administrators only."),ar(e,"argument-error",""),ar(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),ar(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),ar(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),ar(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),ar(e,"cordova-not-ready","Cordova framework is not ready."),ar(e,"cors-unsupported","This browser is not supported."),ar(e,"credential-already-in-use","This credential is already associated with a different user account."),ar(e,"custom-token-mismatch","The custom token corresponds to a different audience."),ar(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),ar(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),ar(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),ar(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),ar(e,"email-already-in-use","The email address is already in use by another account."),ar(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),ar(e,"expired-action-code","The action code has expired."),ar(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),ar(e,"internal-error","An internal AuthError has occurred."),ar(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),ar(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),ar(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),ar(e,"invalid-auth-event","An internal AuthError has occurred."),ar(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),ar(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),ar(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),ar(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),ar(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),ar(e,"invalid-email","The email address is badly formatted."),ar(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),ar(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),ar(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),ar(e,"invalid-credential","The supplied auth credential is malformed or has expired."),ar(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),ar(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),ar(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),ar(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),ar(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),ar(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),ar(e,"wrong-password","The password is invalid or the user does not have a password."),ar(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),ar(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),ar(e,"invalid-provider-id","The specified provider ID is invalid."),ar(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),ar(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),ar(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),ar(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),ar(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),ar(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),ar(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),ar(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),ar(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),ar(e,"missing-continue-uri","A continue URL must be provided in the request."),ar(e,"missing-iframe-start","An internal AuthError has occurred."),ar(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),ar(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),ar(e,"missing-password","A non-empty password must be provided"),ar(e,"missing-multi-factor-info","No second factor identifier is provided."),ar(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),ar(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),ar(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),ar(e,"app-deleted","This instance of FirebaseApp has been deleted."),ar(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),ar(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),ar(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),ar(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),ar(e,"no-auth-event","An internal AuthError has occurred."),ar(e,"no-such-provider","User was not linked to an account with the given provider."),ar(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),ar(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),ar(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),ar(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),ar(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),ar(e,"provider-already-linked","User can only be linked to one identity for the given provider."),ar(e,"quota-exceeded","The project's quota for this operation has been exceeded."),ar(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),ar(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),ar(e,"rejected-credential","The request contains malformed or mismatching credentials."),ar(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),ar(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),ar(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),ar(e,"timeout","The operation has timed out."),ar(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),ar(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),ar(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),ar(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),ar(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),ar(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),ar(e,"unverified-email","The operation requires a verified email."),ar(e,"user-cancelled","The user did not grant your application the permissions it requested."),ar(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),ar(e,"user-disabled","The user account has been disabled by an administrator."),ar(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),ar(e,"user-signed-out",""),ar(e,"weak-password","The password must be 6 characters long or more."),ar(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),ar(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),ar(e,"missing-recaptcha-token","The reCAPTCHA token is missing when sending request to the backend."),ar(e,"invalid-recaptcha-token","The reCAPTCHA token is invalid when sending request to the backend."),ar(e,"invalid-recaptcha-action","The reCAPTCHA action is invalid when sending request to the backend."),ar(e,"recaptcha-not-enabled","reCAPTCHA Enterprise integration is not enabled for this project."),ar(e,"missing-client-type","The reCAPTCHA client type is missing when sending request to the backend."),ar(e,"missing-recaptcha-version","The reCAPTCHA version is missing when sending request to the backend."),ar(e,"invalid-req-type","Invalid request parameters."),ar(e,"invalid-recaptcha-version","The reCAPTCHA version is invalid when sending request to the backend."),e},_a=wa,Ea=new _r("auth","Firebase",wa()),Ia=new Wr("@firebase/auth");function Sa(e){if(Ia.logLevel<=Vr.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Ia.warn.apply(Ia,["Auth (".concat(Di,"): ").concat(e)].concat(n))}}function Ta(e){if(Ia.logLevel<=Vr.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Ia.error.apply(Ia,["Auth (".concat(Di,"): ").concat(e)].concat(n))}}function Ca(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Da.apply(void 0,[e].concat(n))}function Na(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Da.apply(void 0,[e].concat(n))}function Aa(e,t,n){var r=Object.assign(Object.assign({},_a()),ar({},t,n));return new _r("auth","Firebase",r).create(t,{appName:e.name})}function Ra(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Ca(e,"argument-error"),Aa(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Da(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=x(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(x(o)))}return Ea.create.apply(Ea,[e].concat(n))}function Pa(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Da.apply(void 0,[t].concat(r))}}function Oa(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Ta(t),new Error(t)}function La(e,t){e||Oa(t)}function Ma(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Fa(){return"http:"===ja()||"https:"===ja()}function ja(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Ua=function(){function e(t,n){_(this,e),this.shortDelay=t,this.longDelay=n,La(n>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mr())||kr()}return T(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Fa()||gr()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Va(e,t){La(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var za=function(){function e(){_(this,e)}return T(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Oa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Oa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Oa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Ba=(ar(da={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),ar(da,"MISSING_CUSTOM_TOKEN","internal-error"),ar(da,"INVALID_IDENTIFIER","invalid-email"),ar(da,"MISSING_CONTINUE_URI","internal-error"),ar(da,"INVALID_PASSWORD","wrong-password"),ar(da,"MISSING_PASSWORD","missing-password"),ar(da,"EMAIL_EXISTS","email-already-in-use"),ar(da,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),ar(da,"INVALID_IDP_RESPONSE","invalid-credential"),ar(da,"INVALID_PENDING_TOKEN","invalid-credential"),ar(da,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),ar(da,"MISSING_REQ_TYPE","internal-error"),ar(da,"EMAIL_NOT_FOUND","user-not-found"),ar(da,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),ar(da,"EXPIRED_OOB_CODE","expired-action-code"),ar(da,"INVALID_OOB_CODE","invalid-action-code"),ar(da,"MISSING_OOB_CODE","internal-error"),ar(da,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),ar(da,"INVALID_ID_TOKEN","invalid-user-token"),ar(da,"TOKEN_EXPIRED","user-token-expired"),ar(da,"USER_NOT_FOUND","user-token-expired"),ar(da,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),ar(da,"INVALID_CODE","invalid-verification-code"),ar(da,"INVALID_SESSION_INFO","invalid-verification-id"),ar(da,"INVALID_TEMPORARY_PROOF","invalid-credential"),ar(da,"MISSING_SESSION_INFO","missing-verification-id"),ar(da,"SESSION_EXPIRED","code-expired"),ar(da,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),ar(da,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),ar(da,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),ar(da,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),ar(da,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),ar(da,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),ar(da,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),ar(da,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),ar(da,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),ar(da,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),ar(da,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),ar(da,"RECAPTCHA_NOT_ENABLED","recaptcha-not-enabled"),ar(da,"MISSING_RECAPTCHA_TOKEN","missing-recaptcha-token"),ar(da,"INVALID_RECAPTCHA_TOKEN","invalid-recaptcha-token"),ar(da,"INVALID_RECAPTCHA_ACTION","invalid-recaptcha-action"),ar(da,"MISSING_CLIENT_TYPE","missing-client-type"),ar(da,"MISSING_RECAPTCHA_VERSION","missing-recaptcha-version"),ar(da,"INVALID_RECAPTCHA_VERSION","invalid-recaptcha-version"),ar(da,"INVALID_REQ_TYPE","invalid-req-type"),da),qa=new Ua(3e4,6e4);function Ka(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Ga(e,t,n,r){return Ha.apply(this,arguments)}function Ha(){return Ha=dt(ft().mark((function e(t,n,r,i){var a,o=arguments;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Wa(t,a,dt(ft().mark((function e(){var a,o,u,s;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=Nr(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",za.fetch()(Ja(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Ha.apply(this,arguments)}function Wa(e,t,n){return Qa.apply(this,arguments)}function Qa(){return Qa=dt(ft().mark((function e(t,n,r){var i,a,o,u,s,l,f,h,d,p;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Ba),n),e.prev=2,a=new Xa(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw Za(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,l=s.split(" : "),f=c(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw Za(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw Za(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw Za(t,"user-disabled",u);case 29:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw Aa(t,p,d);case 34:Ca(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof xr)){e.next=41;break}throw e.t0;case 41:Ca(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),Qa.apply(this,arguments)}function Ya(e,t,n,r){return $a.apply(this,arguments)}function $a(){return $a=dt(ft().mark((function e(t,n,r,i){var a,o,u=arguments;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,Ga(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Ca(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),$a.apply(this,arguments)}function Ja(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Va(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Xa=function(){function e(t){var n=this;_(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Na(n.auth,"network-request-failed"))}),qa.get())}))}return T(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Za(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Na(e,t,r);return i.customData._tokenResponse=n,i}function eo(e,t){return to.apply(this,arguments)}function to(){return to=dt(ft().mark((function e(t,n){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ga(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),to.apply(this,arguments)}function no(e,t){return ro.apply(this,arguments)}function ro(){return ro=dt(ft().mark((function e(t,n){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ga(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),ro.apply(this,arguments)}function io(e,t){return ao.apply(this,arguments)}function ao(){return ao=dt(ft().mark((function e(t,n){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ga(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),ao.apply(this,arguments)}function oo(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function uo(){return uo=dt(ft().mark((function e(t){var n,r,i,a,o,u,s=arguments;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=Lr(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Pa((a=co(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:oo(so(a.auth_time)),issuedAtTime:oo(so(a.iat)),expirationTime:oo(so(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),uo.apply(this,arguments)}function so(e){return 1e3*Number(e)}function co(e){var t=c(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return Ta("JWT malformed, contained fewer than 3 sections"),null;try{var a=lr(r);return a?JSON.parse(a):(Ta("Failed to decode base64 JWT payload"),null)}catch(o){return Ta("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function lo(e,t){return fo.apply(this,arguments)}function fo(){return fo=dt(ft().mark((function e(t,n){var r=arguments;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof xr&&ho(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),fo.apply(this,arguments)}function ho(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var po=function(){function e(t){_(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return T(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(dt(ft().mark((function t(){return ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=dt(ft().mark((function e(){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),vo=function(){function e(t,n){_(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return T(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=oo(this.lastLoginAt),this.creationTime=oo(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function mo(e){return yo.apply(this,arguments)}function yo(){return yo=dt(ft().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,lo(t,io(r,{idToken:i}));case 6:Pa(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((function(e){var t=e.providerId,n=ha(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],s=ko(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new vo(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),yo.apply(this,arguments)}function go(){return(go=dt(ft().mark((function e(t){var n;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Lr(t),e.next=3,mo(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ko(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(x(n),x(t))}function bo(e,t){return wo.apply(this,arguments)}function wo(){return wo=dt(ft().mark((function e(t,n){var r;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wa(t,{},dt(ft().mark((function e(){var r,i,a,o,u,s;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Nr({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=Ja(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",za.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),wo.apply(this,arguments)}var xo=function(){function e(){_(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return T(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Pa(e.idToken,"internal-error"),Pa("undefined"!==typeof e.idToken,"internal-error"),Pa("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=co(e);return Pa(t,"internal-error"),Pa("undefined"!==typeof t.exp,"internal-error"),Pa("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=dt(ft().mark((function e(t){var n,r=arguments;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Pa(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=dt(ft().mark((function e(t,n){var r,i,a,o;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bo(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Oa("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Pa("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Pa("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Pa("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function _o(e,t){Pa("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Eo=function(){function e(t){_(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=ha(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new po(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?x(a.providerData):[],this.metadata=new vo(a.createdAt||void 0,a.lastLoginAt||void 0)}return T(e,[{key:"getIdToken",value:function(){var e=dt(ft().mark((function e(t){var n;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lo(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Pa(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return uo.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return go.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Pa(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){Pa(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=dt(ft().mark((function e(t){var n,r,i=arguments;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,mo(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=dt(ft().mark((function e(){var t;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,lo(this,eo(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,m=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,x=n.providerData,_=n.stsTokenManager;Pa(k&&_,t,"internal-error");var E=xo.fromJSON(this.name,_);Pa("string"===typeof k,t,"internal-error"),_o(f,t.name),_o(h,t.name),Pa("boolean"===typeof b,t,"internal-error"),Pa("boolean"===typeof w,t,"internal-error"),_o(d,t.name),_o(p,t.name),_o(v,t.name),_o(m,t.name),_o(y,t.name),_o(g,t.name);var I=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:E,createdAt:y,lastLoginAt:g});return x&&Array.isArray(x)&&(I.providerData=x.map((function(e){return Object.assign({},e)}))),m&&(I._redirectEventId=m),I}},{key:"_fromIdTokenResponse",value:function(){var t=dt(ft().mark((function t(n,r){var i,a,o,u=arguments;return ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new xo).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,mo(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Io=new Map;function So(e){La(e instanceof Function,"Expected a class definition");var t=Io.get(e);return t?(La(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Io.set(e,t),t)}var To=function(){function e(){_(this,e),this.type="NONE",this.storage={}}return T(e,[{key:"_isAvailable",value:function(){var e=dt(ft().mark((function e(){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=dt(ft().mark((function e(t,n){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=dt(ft().mark((function e(t){var n;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=dt(ft().mark((function e(t){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();To.type="NONE";var Co=To;function No(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Ao=function(){function e(t,n,r){_(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=No(this.userKey,a.apiKey,o),this.fullPersistenceKey=No("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return T(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=dt(ft().mark((function e(){var t;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Eo._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=dt(ft().mark((function e(t){var n;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=dt(ft().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(So(Co),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=dt(ft().mark((function e(t){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||So(Co),u=No(i,n.config.apiKey,n.name),s=null,c=F(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=Eo._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=dt(ft().mark((function e(t){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Ro(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Lo(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Do(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Fo(t))return"Blackberry";if(jo(t))return"Webos";if(Po(t))return"Safari";if((t.includes("chrome/")||Oo(t))&&!t.includes("edge/"))return"Chrome";if(Mo(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Do(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mr();return/firefox\//i.test(e)}function Po(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:mr()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Oo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mr();return/crios\//i.test(e)}function Lo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mr();return/iemobile/i.test(e)}function Mo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mr();return/android/i.test(e)}function Fo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mr();return/blackberry/i.test(e)}function jo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mr();return/webos/i.test(e)}function Uo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mr();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Vo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mr();return Uo(e)||Mo(e)||jo(e)||Fo(e)||/windows phone/i.test(e)||Lo(e)}function zo(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ro(mr());break;case"Worker":t="".concat(Ro(mr()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Di,"/").concat(r)}function Bo(e){return qo.apply(this,arguments)}function qo(){return qo=dt(ft().mark((function e(t){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ga(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),qo.apply(this,arguments)}function Ko(e,t){return Go.apply(this,arguments)}function Go(){return Go=dt(ft().mark((function e(t,n){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ga(t,"GET","/v2/recaptchaConfig",Ka(t,n)));case 1:case"end":return e.stop()}}),e)}))),Go.apply(this,arguments)}function Ho(e){return void 0!==e&&void 0!==e.getResponse}function Wo(e){return void 0!==e&&void 0!==e.enterprise}var Qo=T((function e(t){if(_(this,e),this.siteKey="",this.emailPasswordEnabled=!1,void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.emailPasswordEnabled=t.recaptchaEnforcementState.some((function(e){return"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState}))}));function Yo(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Na("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function $o(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Jo=function(){function e(t){_(this,e),this.type="recaptcha-enterprise",this.auth=nu(t)}return T(e,[{key:"verify",value:function(){var e=dt(ft().mark((function e(){var t,n,r,i,a,o=this,u=arguments;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e,n,r){var i=window.grecaptcha;Wo(i)?i.enterprise.ready((function(){i.enterprise.execute(e,{action:t}).then((function(e){n(e)})).catch((function(){n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))},i=function(){return i=dt(ft().mark((function e(t){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}if(null!=t.tenantId||null==t._agentRecaptchaConfig){e.next=3;break}return e.abrupt("return",t._agentRecaptchaConfig.siteKey);case 3:if(null==t.tenantId||void 0===t._tenantRecaptchaConfigs[t.tenantId]){e.next=5;break}return e.abrupt("return",t._tenantRecaptchaConfigs[t.tenantId].siteKey);case 5:return e.abrupt("return",new Promise(function(){var e=dt(ft().mark((function e(n,r){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ko(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((function(e){if(void 0!==e.recaptchaKey){var i=new Qo(e);return null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,n(i.siteKey)}r(new Error("recaptcha Enterprise site key undefined"))})).catch((function(e){r(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)},r=function(e){return i.apply(this,arguments)},t=u.length>0&&void 0!==u[0]?u[0]:"verify",n=u.length>1&&void 0!==u[1]&&u[1],e.abrupt("return",new Promise((function(e,t){r(o.auth).then((function(r){if(!n&&Wo(window.grecaptcha))a(r,e,t);else{if("undefined"===typeof window)return void t(new Error("RecaptchaVerifier is only supported in browser"));Yo("https://www.google.com/recaptcha/enterprise.js?render="+r).then((function(){a(r,e,t)})).catch((function(e){t(e)}))}})).catch((function(e){t(e)}))})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Xo(e,t,n){return Zo.apply(this,arguments)}function Zo(){return Zo=dt(ft().mark((function e(t,n,r){var i,a,o,u,s=arguments;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.length>3&&void 0!==s[3]&&s[3],a=new Jo(t),e.prev=2,e.next=5,a.verify(r);case 5:o=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,a.verify(r,!0);case 12:o=e.sent;case 13:return u=Object.assign({},n),i?Object.assign(u,{captchaResp:o}):Object.assign(u,{captchaResponse:o}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),e.abrupt("return",u);case 18:case"end":return e.stop()}}),e,null,[[2,8]])}))),Zo.apply(this,arguments)}var eu=function(){function e(t){_(this,e),this.auth=t,this.queue=[]}return T(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=dt(ft().mark((function e(t){var n,r,i,a,o,u,s;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=F(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=F(n);try{for(o.s();!(u=o.n()).done;){s=u.value;try{s()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),tu=function(){function e(t,n,r,i){_(this,e),this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ru(this),this.idTokenSubscription=new ru(this),this.beforeStateQueue=new eu(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ea,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}return T(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=So(t)),this._initializationPromise=this.queue(dt(ft().mark((function r(){var i,a;return ft().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Ao.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=dt(ft().mark((function e(){var t;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=dt(ft().mark((function e(t){var n,r,i,a,o,u,s;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return Pa(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=dt(ft().mark((function e(t){var n;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=dt(ft().mark((function e(t){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,mo(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=dt(ft().mark((function e(){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=dt(ft().mark((function e(t){var n;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?Lr(t):null)&&Pa(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=dt(ft().mark((function e(t){var n,r=this,i=arguments;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&Pa(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(dt(ft().mark((function e(){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=dt(ft().mark((function e(){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(dt(ft().mark((function n(){return ft().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(So(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"initializeRecaptchaConfig",value:function(){var e=dt(ft().mark((function e(){var t,n;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ko(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"});case 2:t=e.sent,n=new Qo(t),null==this.tenantId?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new Jo(this).verify();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getRecaptchaConfig",value:function(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new _r("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=dt(ft().mark((function e(t,n){var r;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=dt(ft().mark((function e(t){var n;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Pa(n=t&&So(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Ao.create(this,[So(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=dt(ft().mark((function e(t){var n,r;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(dt(ft().mark((function e(){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=dt(ft().mark((function e(t){var n=this;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(dt(ft().mark((function e(){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Pa(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=dt(ft().mark((function e(t){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Pa(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zo(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=dt(ft().mark((function e(){var t,n,r,i;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ar({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.next=8,this._getAppCheckToken();case 8:return(i=e.sent)&&(n["X-Firebase-AppCheck"]=i),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=dt(ft().mark((function e(){var t,n;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();case 2:return(null===(n=e.sent)||void 0===n?void 0:n.error)&&Sa("Error while retrieving App Check token: ".concat(n.error)),e.abrupt("return",null===n||void 0===n?void 0:n.token);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function nu(e){return Lr(e)}var ru=function(){function e(t){var n=this;_(this,e),this.auth=t,this.observer=null,this.addObserver=Dr((function(e){return n.observer=e}))}return T(e,[{key:"next",get:function(){return Pa(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function iu(e,t,n){var r=nu(e);Pa(r._canInitEmulator,r,"emulator-config-failed"),Pa(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=au(t),o=function(e){var t=au(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:ou(r.substr(a.length+1))}}var o=c(r.split(":"),2);return{host:o[0],port:ou(o[1])}}(t),u=o.host,s=o.port,l=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function au(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ou(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var uu=function(){function e(t,n){_(this,e),this.providerId=t,this.signInMethod=n}return T(e,[{key:"toJSON",value:function(){return Oa("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Oa("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Oa("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Oa("not implemented")}}]),e}();function su(e,t){return cu.apply(this,arguments)}function cu(){return cu=dt(ft().mark((function e(t,n){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ga(t,"POST","/v1/accounts:resetPassword",Ka(t,n)));case 1:case"end":return e.stop()}}),e)}))),cu.apply(this,arguments)}function lu(e,t){return fu.apply(this,arguments)}function fu(){return fu=dt(ft().mark((function e(t,n){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ga(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),fu.apply(this,arguments)}function hu(e,t){return du.apply(this,arguments)}function du(){return du=dt(ft().mark((function e(t,n){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ga(t,"POST","/v1/accounts:update",Ka(t,n)));case 1:case"end":return e.stop()}}),e)}))),du.apply(this,arguments)}function pu(e,t){return vu.apply(this,arguments)}function vu(){return vu=dt(ft().mark((function e(t,n){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ya(t,"POST","/v1/accounts:signInWithPassword",Ka(t,n)));case 1:case"end":return e.stop()}}),e)}))),vu.apply(this,arguments)}function mu(e,t){return yu.apply(this,arguments)}function yu(){return yu=dt(ft().mark((function e(t,n){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ga(t,"POST","/v1/accounts:sendOobCode",Ka(t,n)));case 1:case"end":return e.stop()}}),e)}))),yu.apply(this,arguments)}function gu(e,t){return ku.apply(this,arguments)}function ku(){return ku=dt(ft().mark((function e(t,n){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",mu(t,n));case 1:case"end":return e.stop()}}),e)}))),ku.apply(this,arguments)}function bu(e,t){return wu.apply(this,arguments)}function wu(){return wu=dt(ft().mark((function e(t,n){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",mu(t,n));case 1:case"end":return e.stop()}}),e)}))),wu.apply(this,arguments)}function xu(e,t){return _u.apply(this,arguments)}function _u(){return _u=dt(ft().mark((function e(t,n){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",mu(t,n));case 1:case"end":return e.stop()}}),e)}))),_u.apply(this,arguments)}function Eu(e,t){return Iu.apply(this,arguments)}function Iu(){return Iu=dt(ft().mark((function e(t,n){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",mu(t,n));case 1:case"end":return e.stop()}}),e)}))),Iu.apply(this,arguments)}function Su(e,t){return Tu.apply(this,arguments)}function Tu(){return Tu=dt(ft().mark((function e(t,n){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ya(t,"POST","/v1/accounts:signInWithEmailLink",Ka(t,n)));case 1:case"end":return e.stop()}}),e)}))),Tu.apply(this,arguments)}function Cu(e,t){return Nu.apply(this,arguments)}function Nu(){return Nu=dt(ft().mark((function e(t,n){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ya(t,"POST","/v1/accounts:signInWithEmailLink",Ka(t,n)));case 1:case"end":return e.stop()}}),e)}))),Nu.apply(this,arguments)}var Au=function(e){N(n,e);var t=P(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return _(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return T(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=dt(ft().mark((function e(t){var n,r,i;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?12:13;break;case 3:if(r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},!(null===(n=t._getRecaptchaConfig())||void 0===n?void 0:n.emailPasswordEnabled)){e.next=11;break}return e.next=7,Xo(t,r,"signInWithPassword");case 7:return i=e.sent,e.abrupt("return",pu(t,i));case 11:return e.abrupt("return",pu(t,r).catch(function(){var e=dt(ft().mark((function e(n){var i;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,Xo(t,r,"signInWithPassword");case 4:return i=e.sent,e.abrupt("return",pu(t,i));case 8:return e.abrupt("return",Promise.reject(n));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:return e.abrupt("return",Su(t,{email:this._email,oobCode:this._password}));case 13:Ca(t,"internal-error");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=dt(ft().mark((function e(t,n){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",lu(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Cu(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Ca(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(uu);function Ru(e,t){return Du.apply(this,arguments)}function Du(){return Du=dt(ft().mark((function e(t,n){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ya(t,"POST","/v1/accounts:signInWithIdp",Ka(t,n)));case 1:case"end":return e.stop()}}),e)}))),Du.apply(this,arguments)}var Pu=function(e){N(n,e);var t=P(n);function n(){var e;return _(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return T(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Ru(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Ru(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Ru(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Nr(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ca("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=ha(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(uu);function Ou(e,t){return Lu.apply(this,arguments)}function Lu(){return Lu=dt(ft().mark((function e(t,n){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ga(t,"POST","/v1/accounts:sendVerificationCode",Ka(t,n)));case 1:case"end":return e.stop()}}),e)}))),Lu.apply(this,arguments)}function Mu(){return Mu=dt(ft().mark((function e(t,n){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ya(t,"POST","/v1/accounts:signInWithPhoneNumber",Ka(t,n)));case 1:case"end":return e.stop()}}),e)}))),Mu.apply(this,arguments)}function Fu(){return Fu=dt(ft().mark((function e(t,n){var r;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ya(t,"POST","/v1/accounts:signInWithPhoneNumber",Ka(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Za(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Fu.apply(this,arguments)}var ju=ar({},"USER_NOT_FOUND","user-not-found");function Uu(){return Uu=dt(ft().mark((function e(t,n){var r;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Ya(t,"POST","/v1/accounts:signInWithPhoneNumber",Ka(t,r),ju));case 2:case"end":return e.stop()}}),e)}))),Uu.apply(this,arguments)}var Vu=function(e){N(n,e);var t=P(n);function n(e){var r;return _(this,n),(r=t.call(this,"phone","phone")).params=e,r}return T(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Mu.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Fu.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Uu.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(uu);var zu=function(){function e(t){var n,r,i,a,o,u;_(this,e);var s=Ar(Rr(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);Pa(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return T(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Ar(Rr(e)).link,n=t?Ar(Rr(t)).deep_link_id:null,r=Ar(Rr(e)).deep_link_id;return(r?Ar(Rr(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(yT){return null}}}]),e}();var Bu=function(){function e(){_(this,e),this.providerId=e.PROVIDER_ID}return T(e,null,[{key:"credential",value:function(e,t){return Au._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=zu.parseLink(t);return Pa(n,"argument-error"),Au._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Bu.PROVIDER_ID="password",Bu.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Bu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var qu=function(){function e(t){_(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return T(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Ku=function(e){N(n,e);var t=P(n);function n(){var e;return _(this,n),(e=t.apply(this,arguments)).scopes=[],e}return T(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return x(this.scopes)}}]),n}(qu),Gu=function(e){N(n,e);var t=P(n);function n(){return _(this,n),t.apply(this,arguments)}return T(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Pa(e.idToken||e.accessToken,"argument-error"),Pu._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Pa("providerId"in t&&"signInMethod"in t,"argument-error"),Pu._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(Ku),Hu=function(e){N(n,e);var t=P(n);function n(){return _(this,n),t.call(this,"facebook.com")}return T(n,null,[{key:"credential",value:function(e){return Pu._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(yT){return null}}}]),n}(Ku);Hu.FACEBOOK_SIGN_IN_METHOD="facebook.com",Hu.PROVIDER_ID="facebook.com";var Wu=function(e){N(n,e);var t=P(n);function n(){var e;return _(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return T(n,null,[{key:"credential",value:function(e,t){return Pu._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(yT){return null}}}]),n}(Ku);Wu.GOOGLE_SIGN_IN_METHOD="google.com",Wu.PROVIDER_ID="google.com";var Qu=function(e){N(n,e);var t=P(n);function n(){return _(this,n),t.call(this,"github.com")}return T(n,null,[{key:"credential",value:function(e){return Pu._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(yT){return null}}}]),n}(Ku);Qu.GITHUB_SIGN_IN_METHOD="github.com",Qu.PROVIDER_ID="github.com";var Yu=function(e){N(n,e);var t=P(n);function n(e,r){var i;return _(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return T(n,[{key:"_getIdTokenResponse",value:function(e){return Ru(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Ru(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Ru(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(uu),$u=function(e){N(n,e);var t=P(n);function n(e){return _(this,n),Pa(e.startsWith("saml."),"argument-error"),t.call(this,e)}return T(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Yu.fromJSON(e);return Pa(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Yu._create(r,n)}catch(i){return null}}}]),n}(qu),Ju=function(e){N(n,e);var t=P(n);function n(){return _(this,n),t.call(this,"twitter.com")}return T(n,null,[{key:"credential",value:function(e,t){return Pu._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(yT){return null}}}]),n}(Ku);function Xu(e,t){return Zu.apply(this,arguments)}function Zu(){return Zu=dt(ft().mark((function e(t,n){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ya(t,"POST","/v1/accounts:signUp",Ka(t,n)));case 1:case"end":return e.stop()}}),e)}))),Zu.apply(this,arguments)}Ju.TWITTER_SIGN_IN_METHOD="twitter.com",Ju.PROVIDER_ID="twitter.com";var es=function(){function e(t){_(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return T(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=dt(ft().mark((function t(n,r,i){var a,o,u,s,c=arguments;return ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Eo._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=ts(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=dt(ft().mark((function t(n,r,i){var a;return ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=ts(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function ts(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function ns(){return ns=dt(ft().mark((function e(t){var n,r,i,a;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=nu(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new es({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Xu(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,es._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),ns.apply(this,arguments)}var rs=function(e){N(n,e);var t=P(n);function n(e,r,i,a){var o,u;return _(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(D(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return T(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(xr);function is(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw rs._fromErrorAndOperation(e,n,t,r);throw n}))}function as(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function os(e,t){return us.apply(this,arguments)}function us(){return us=dt(ft().mark((function e(t,n){var r,i,a,o;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Lr(t),e.next=3,ls(!0,r,n);case 3:return e.t0=no,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=as(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),us.apply(this,arguments)}function ss(e,t){return cs.apply(this,arguments)}function cs(){return cs=dt(ft().mark((function e(t,n){var r,i,a=arguments;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=lo,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",es._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),cs.apply(this,arguments)}function ls(e,t,n){return fs.apply(this,arguments)}function fs(){return(fs=dt(ft().mark((function e(t,n,r){var i,a;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mo(n);case 2:i=as(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",Pa(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hs(e,t){return ds.apply(this,arguments)}function ds(){return ds=dt(ft().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,lo(t,is(i,a,n,t),r);case 6:return Pa((o=e.sent).idToken,i,"internal-error"),Pa(u=co(o.idToken),i,"internal-error"),s=u.sub,Pa(t.uid===s,i,"user-mismatch"),e.abrupt("return",es._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Ca(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),ds.apply(this,arguments)}function ps(e,t){return vs.apply(this,arguments)}function vs(){return vs=dt(ft().mark((function e(t,n){var r,i,a,o,u=arguments;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,is(t,i,n);case 4:return a=e.sent,e.next=7,es._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),vs.apply(this,arguments)}function ms(e,t){return ys.apply(this,arguments)}function ys(){return ys=dt(ft().mark((function e(t,n){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ps(nu(t),n));case 1:case"end":return e.stop()}}),e)}))),ys.apply(this,arguments)}function gs(e,t){return ks.apply(this,arguments)}function ks(){return(ks=dt(ft().mark((function e(t,n){var r;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Lr(t),e.next=3,ls(!1,r,n.providerId);case 3:return e.abrupt("return",ss(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bs(e,t){return ws.apply(this,arguments)}function ws(){return(ws=dt(ft().mark((function e(t,n){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hs(Lr(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xs(e,t){return _s.apply(this,arguments)}function _s(){return _s=dt(ft().mark((function e(t,n){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ya(t,"POST","/v1/accounts:signInWithCustomToken",Ka(t,n)));case 1:case"end":return e.stop()}}),e)}))),_s.apply(this,arguments)}function Es(){return Es=dt(ft().mark((function e(t,n){var r,i,a;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=nu(t),e.next=3,xs(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,es._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),Es.apply(this,arguments)}var Is=function(){function e(t,n){_(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return T(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Ss._fromServerResponse(e,t):"totpInfo"in t?Ts._fromServerResponse(e,t):Ca(e,"internal-error")}}]),e}(),Ss=function(e){N(n,e);var t=P(n);function n(e){var r;return _(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return T(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Is),Ts=function(e){N(n,e);var t=P(n);function n(e){return _(this,n),t.call(this,"totp",e)}return T(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Is);function Cs(e,t,n){var r;Pa((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Pa("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Pa(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Pa(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Ns(){return Ns=dt(ft().mark((function e(t,n,r){var i,a,o,u;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=nu(t),o={requestType:"PASSWORD_RESET",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=11;break}return e.next=5,Xo(a,o,"getOobCode",!0);case 5:return u=e.sent,r&&Cs(a,u,r),e.next=9,bu(a,u);case 9:e.next=14;break;case 11:return r&&Cs(a,o,r),e.next=14,bu(a,o).catch(function(){var e=dt(ft().mark((function e(t){var n;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow."),e.next=4,Xo(a,o,"getOobCode",!0);case 4:return n=e.sent,r&&Cs(a,n,r),e.next=8,bu(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}}),e)}))),Ns.apply(this,arguments)}function As(){return As=dt(ft().mark((function e(t,n,r){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,su(Lr(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),As.apply(this,arguments)}function Rs(){return Rs=dt(ft().mark((function e(t,n){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hu(Lr(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),Rs.apply(this,arguments)}function Ds(e,t){return Ps.apply(this,arguments)}function Ps(){return Ps=dt(ft().mark((function e(t,n){var r,i,a,o;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Lr(t),e.next=3,su(r,{oobCode:n});case 3:i=e.sent,Pa(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Pa(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Pa(i.mfaInfo,r,"internal-error");case 13:Pa(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=Is._fromServerResponse(nu(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),Ps.apply(this,arguments)}function Os(){return Os=dt(ft().mark((function e(t,n){var r,i;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ds(Lr(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),Os.apply(this,arguments)}function Ls(e,t,n){return Ms.apply(this,arguments)}function Ms(){return Ms=dt(ft().mark((function e(t,n,r){var i,a,o,u,s,c,l;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=nu(t),o={returnSecureToken:!0,email:n,password:r,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=9;break}return e.next=5,Xo(a,o,"signUpPassword");case 5:s=e.sent,u=Xu(a,s),e.next=10;break;case 9:u=Xu(a,o).catch(function(){var e=dt(ft().mark((function e(t){var n;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow."),e.next=4,Xo(a,o,"signUpPassword");case 4:return n=e.sent,e.abrupt("return",Xu(a,n));case 8:return e.abrupt("return",Promise.reject(t));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:return e.next=12,u.catch((function(e){return Promise.reject(e)}));case 12:return c=e.sent,e.next=15,es._fromIdTokenResponse(a,"signIn",c);case 15:return l=e.sent,e.next=18,a._updateCurrentUser(l.user);case 18:return e.abrupt("return",l);case 19:case"end":return e.stop()}}),e)}))),Ms.apply(this,arguments)}function Fs(){return Fs=dt(ft().mark((function e(t,n,r){var i,a,o,u,s;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=function(e,t){Pa(t.handleCodeInApp,a,"argument-error"),t&&Cs(a,e,t)},a=nu(t),o={requestType:"EMAIL_SIGNIN",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=12;break}return e.next=6,Xo(a,o,"getOobCode",!0);case 6:return s=e.sent,u(s,r),e.next=10,xu(a,s);case 10:e.next=15;break;case 12:return u(o,r),e.next=15,xu(a,o).catch(function(){var e=dt(ft().mark((function e(t){var n;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,Xo(a,o,"getOobCode",!0);case 4:return n=e.sent,u(n,r),e.next=8,xu(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 15:case"end":return e.stop()}}),e)}))),Fs.apply(this,arguments)}function js(){return js=dt(ft().mark((function e(t,n,r){var i,a;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Lr(t),Pa((a=Bu.credentialWithLink(n,r||Ma()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",ms(i,a));case 4:case"end":return e.stop()}}),e)}))),js.apply(this,arguments)}function Us(e,t){return Vs.apply(this,arguments)}function Vs(){return Vs=dt(ft().mark((function e(t,n){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ga(t,"POST","/v1/accounts:createAuthUri",Ka(t,n)));case 1:case"end":return e.stop()}}),e)}))),Vs.apply(this,arguments)}function zs(){return zs=dt(ft().mark((function e(t,n){var r,i,a,o;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fa()?Ma():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Us(Lr(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),zs.apply(this,arguments)}function Bs(){return(Bs=dt(ft().mark((function e(t,n){var r,i,a,o;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Lr(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Cs(r.auth,a,n),e.next=8,gu(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qs(){return(qs=dt(ft().mark((function e(t,n,r){var i,a,o,u;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Lr(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Cs(i.auth,o,r),e.next=8,Eu(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ks(e,t){return Gs.apply(this,arguments)}function Gs(){return Gs=dt(ft().mark((function e(t,n){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ga(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Gs.apply(this,arguments)}function Hs(){return(Hs=dt(ft().mark((function e(t,n){var r,i,a,o,u,s,c;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=Lr(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,lo(a,Ks(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ws(e,t,n){return Qs.apply(this,arguments)}function Qs(){return Qs=dt(ft().mark((function e(t,n,r){var i,a,o,u;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,lo(t,lu(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)}))),Qs.apply(this,arguments)}var Ys=T((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),$s=function(e){N(n,e);var t=P(n);function n(e,r,i,a){var o;return _(this,n),(o=t.call(this,e,r,i)).username=a,o}return T(n)}(Ys),Js=function(e){N(n,e);var t=P(n);function n(e,r){return _(this,n),t.call(this,e,"facebook.com",r)}return T(n)}(Ys),Xs=function(e){N(n,e);var t=P(n);function n(e,r){return _(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return T(n)}($s),Zs=function(e){N(n,e);var t=P(n);function n(e,r){return _(this,n),t.call(this,e,"google.com",r)}return T(n)}(Ys),ec=function(e){N(n,e);var t=P(n);function n(e,r,i){return _(this,n),t.call(this,e,"twitter.com",r,i)}return T(n)}($s);function tc(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=co(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Ys(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Js(a,i);case"github.com":return new Xs(a,i);case"google.com":return new Zs(a,i);case"twitter.com":return new ec(a,i,e.screenName||null);case"custom":case"anonymous":return new Ys(a,null);default:return new Ys(a,r,i)}}(n)}var nc=function(){function e(t,n,r){_(this,e),this.type=t,this.credential=n,this.auth=r}return T(e,[{key:"toJSON",value:function(){return{multiFactorSession:ar({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),rc=function(){function e(t,n,r){_(this,e),this.session=t,this.hints=n,this.signInResolver=r}return T(e,[{key:"resolveSignIn",value:function(){var e=dt(ft().mark((function e(t){var n;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=nu(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return Is._fromServerResponse(r,e)}));Pa(i.mfaPendingCredential,r,"internal-error");var o=nc._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=dt(ft().mark((function e(t){var a,u,s;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,es._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return Pa(n.user,r,"internal-error"),e.abrupt("return",es._forOperation(n.user,n.operationType,u));case 17:Ca(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function ic(e,t){return Ga(e,"POST","/v2/accounts/mfaEnrollment:start",Ka(e,t))}function ac(e,t){return Ga(e,"POST","/v2/accounts/mfaEnrollment:start",Ka(e,t))}function oc(e,t){return Ga(e,"POST","/v2/accounts/mfaEnrollment:finalize",Ka(e,t))}function uc(e,t){return Ga(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Ka(e,t))}var sc=function(){function e(t){var n=this;_(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return Is._fromServerResponse(t.auth,e)})))}))}return T(e,[{key:"getSession",value:function(){var e=dt(ft().mark((function e(){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=nc,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user.auth,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=dt(ft().mark((function e(t,n){var r,i,a;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,lo(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=dt(ft().mark((function e(t){var n,r,i;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.prev=4,e.next=7,lo(this.user,uc(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 7:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=11,this.user._updateTokensIfNecessary(i);case 11:return e.next=13,this.user.reload();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:case"end":return e.stop()}}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),cc=new WeakMap;var lc="__sak",fc=function(){function e(t,n){_(this,e),this.storageRetriever=t,this.type=n}return T(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(lc,"1"),this.storage.removeItem(lc),Promise.resolve(!0)):Promise.resolve(!1)}catch(yT){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var hc=function(e){N(n,e);var t=P(n);function n(){var e;return _(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=mr();return Po(e)||Uo(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Vo(),e._shouldAllowMigration=!0,e}return T(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);br()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=dt(ft().mark((function e(t,r){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fa(A(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=dt(ft().mark((function e(t){var r;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fa(A(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=dt(ft().mark((function e(t){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fa(A(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(fc);hc.type="LOCAL";var dc=hc,pc=function(e){N(n,e);var t=P(n);function n(){return _(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return T(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(fc);pc.type="SESSION";var vc=pc;function mc(e){return Promise.all(e.map(function(){var e=dt(ft().mark((function e(t){var n;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var yc=function(){function e(t){_(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return T(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=dt(ft().mark((function e(t){var n,r,i,a,o,u,s,c;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=dt(ft().mark((function e(t){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,mc(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function gc(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}yc.receivers=[];var kc=function(){function e(t){_(this,e),this.target=t,this.handlers=new Set}return T(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=dt(ft().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=gc("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function bc(){return window}function wc(e){bc().location.href=e}function xc(){return"undefined"!==typeof bc().WorkerGlobalScope&&"function"===typeof bc().importScripts}function _c(){return Ec.apply(this,arguments)}function Ec(){return(Ec=dt(ft().mark((function e(){var t;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Ic(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Sc="firebaseLocalStorageDb",Tc="firebaseLocalStorage",Cc="fbase_key",Nc=function(){function e(t){_(this,e),this.request=t}return T(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Ac(e,t){return e.transaction([Tc],t?"readwrite":"readonly").objectStore(Tc)}function Rc(){var e=indexedDB.deleteDatabase(Sc);return new Nc(e).toPromise()}function Dc(){var e=indexedDB.open(Sc,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Tc,{keyPath:Cc})}catch(r){n(r)}})),e.addEventListener("success",dt(ft().mark((function n(){var r;return ft().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Tc)){n.next=12;break}return r.close(),n.next=5,Rc();case 5:return n.t0=t,n.next=8,Dc();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Pc(e,t,n){return Oc.apply(this,arguments)}function Oc(){return Oc=dt(ft().mark((function e(t,n,r){var i,a;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ac(t,!0).put((ar(i={},Cc,n),ar(i,"value",r),i)),e.abrupt("return",new Nc(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Oc.apply(this,arguments)}function Lc(e,t){return Mc.apply(this,arguments)}function Mc(){return Mc=dt(ft().mark((function e(t,n){var r,i;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ac(t,!1).get(n),e.next=3,new Nc(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Mc.apply(this,arguments)}function Fc(e,t){var n=Ac(e,!0).delete(t);return new Nc(n).toPromise()}var jc=function(){function e(){_(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return T(e,[{key:"_openDb",value:function(){var e=dt(ft().mark((function e(){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Dc();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=dt(ft().mark((function e(t){var n,r;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=dt(ft().mark((function e(){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xc()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=dt(ft().mark((function e(){var t=this;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=yc._getInstance(xc()?self:null),this.receiver._subscribe("keyChanged",function(){var e=dt(ft().mark((function e(n,r){var i;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=dt(ft().mark((function e(t,n){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=dt(ft().mark((function e(){var t,n,r;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_c();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new kc(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=dt(ft().mark((function e(t){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Ic()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=dt(ft().mark((function e(){var t;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Dc();case 5:return t=e.sent,e.next=8,Pc(t,lc,"1");case 8:return e.next=10,Fc(t,lc);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=dt(ft().mark((function e(t){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=dt(ft().mark((function e(t,n){var r=this;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(dt(ft().mark((function e(){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Pc(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=dt(ft().mark((function e(t){var n;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Lc(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=dt(ft().mark((function e(t){var n=this;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(dt(ft().mark((function e(){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Fc(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=dt(ft().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Ac(e,!1).getAll();return new Nc(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=F(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(dt(ft().mark((function t(){return ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();jc.type="LOCAL";var Uc=jc;function Vc(e,t){return Ga(e,"POST","/v2/accounts/mfaSignIn:start",Ka(e,t))}function zc(e,t){return Ga(e,"POST","/v2/accounts/mfaSignIn:finalize",Ka(e,t))}var Bc=1e12,qc=function(){function e(t){_(this,e),this.auth=t,this.counter=Bc,this._widgets=new Map}return T(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Kc(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Bc;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Bc;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=dt(ft().mark((function e(t){var n,r;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Bc,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Kc=function(){function e(t,n,r){var i=this;_(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;Pa(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return T(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var Gc=$o("rcb"),Hc=new Ua(3e4,6e4),Wc=function(){function e(){var t;_(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=bc().grecaptcha)||void 0===t?void 0:t.render)}return T(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Pa(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)&&Ho(bc().grecaptcha)?Promise.resolve(bc().grecaptcha):new Promise((function(r,i){var a=bc().setTimeout((function(){i(Na(e,"network-request-failed"))}),Hc.get());bc()[Gc]=function(){bc().clearTimeout(a),delete bc()[Gc];var o=bc().grecaptcha;if(o&&Ho(o)){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Na(e,"internal-error"))},Yo("".concat("https://www.google.com/recaptcha/api.js?","?").concat(Nr({onload:Gc,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Na(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=bc().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();var Qc=function(){function e(){_(this,e)}return T(e,[{key:"load",value:function(){var e=dt(ft().mark((function e(t){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new qc(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),Yc="recaptcha",$c={theme:"light",type:"image"},Jc=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},$c),r=arguments.length>2?arguments[2]:void 0;_(this,e),this.parameters=n,this.type=Yc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=nu(r),this.isInvisible="invisible"===this.parameters.size,Pa("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;Pa(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Qc:new Wc,this.validateStartingState()}return T(e,[{key:"verify",value:function(){var e=dt(ft().mark((function e(){var t,n,r,i=this;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Pa(!this.parameters.sitekey,this.auth,"argument-error"),Pa(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Pa("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=bc()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Pa(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=dt(ft().mark((function e(){var t,n;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=dt(ft().mark((function e(){var t;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pa(Fa()&&!xc(),this.auth,"internal-error"),e.next=3,Xc();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Bo(this.auth);case 8:Pa(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Pa(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function Xc(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var Zc=function(){function e(t,n){_(this,e),this.verificationId=t,this.onConfirmation=n}return T(e,[{key:"confirm",value:function(e){var t=Vu._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function el(){return el=dt(ft().mark((function e(t,n,r){var i,a;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=nu(t),e.next=3,il(i,n,Lr(r));case 3:return a=e.sent,e.abrupt("return",new Zc(a,(function(e){return ms(i,e)})));case 5:case"end":return e.stop()}}),e)}))),el.apply(this,arguments)}function tl(e,t,n){return nl.apply(this,arguments)}function nl(){return(nl=dt(ft().mark((function e(t,n,r){var i,a;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Lr(t),e.next=3,ls(!1,i,"phone");case 3:return e.next=5,il(i.auth,n,Lr(r));case 5:return a=e.sent,e.abrupt("return",new Zc(a,(function(e){return gs(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rl(){return(rl=dt(ft().mark((function e(t,n,r){var i,a;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Lr(t),e.next=3,il(i.auth,n,Lr(r));case 3:return a=e.sent,e.abrupt("return",new Zc(a,(function(e){return bs(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function il(e,t,n){return al.apply(this,arguments)}function al(){return al=dt(ft().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Pa("string"===typeof a,t,"argument-error"),Pa(r.type===Yc,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return Pa("enroll"===u.type,t,"internal-error"),e.next=13,ic(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return Pa("signin"===u.type,t,"internal-error"),Pa(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Vc(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Ou(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),al.apply(this,arguments)}function ol(){return(ol=dt(ft().mark((function e(t,n){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ss(Lr(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ul=function(){function e(t){_(this,e),this.providerId=e.PROVIDER_ID,this.auth=nu(t)}return T(e,[{key:"verifyPhoneNumber",value:function(e,t){return il(this.auth,e,Lr(t))}}],[{key:"credential",value:function(e,t){return Vu._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Vu._fromTokenResponse(n,r):null}}]),e}();function sl(e,t){return t?So(t):(Pa(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}ul.PROVIDER_ID="phone",ul.PHONE_SIGN_IN_METHOD="phone";var cl=function(e){N(n,e);var t=P(n);function n(e){var r;return _(this,n),(r=t.call(this,"custom","custom")).params=e,r}return T(n,[{key:"_getIdTokenResponse",value:function(e){return Ru(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Ru(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Ru(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(uu);function ll(e){return ps(e.auth,new cl(e),e.bypassAuthState)}function fl(e){var t=e.auth,n=e.user;return Pa(n,t,"internal-error"),hs(n,new cl(e),e.bypassAuthState)}function hl(e){return dl.apply(this,arguments)}function dl(){return dl=dt(ft().mark((function e(t){var n,r;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Pa(r=t.user,n,"internal-error"),e.abrupt("return",ss(r,new cl(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),dl.apply(this,arguments)}var pl=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];_(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return T(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=dt(ft().mark((function t(n,r){return ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=dt(ft().mark((function e(t){var n,r,i,a,o,u,s;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ll;case"linkViaPopup":case"linkViaRedirect":return hl;case"reauthViaPopup":case"reauthViaRedirect":return fl;default:Ca(this.auth,"internal-error")}}},{key:"resolve",value:function(e){La(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){La(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),vl=new Ua(2e3,1e4);function ml(e,t,n){return yl.apply(this,arguments)}function yl(){return yl=dt(ft().mark((function e(t,n,r){var i,a,o;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=nu(t),Ra(t,n,qu),a=sl(i,r),o=new wl(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),yl.apply(this,arguments)}function gl(){return(gl=dt(ft().mark((function e(t,n,r){var i,a,o;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ra((i=Lr(t)).auth,n,qu),a=sl(i.auth,r),o=new wl(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kl(e,t,n){return bl.apply(this,arguments)}function bl(){return(bl=dt(ft().mark((function e(t,n,r){var i,a,o;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ra((i=Lr(t)).auth,n,qu),a=sl(i.auth,r),o=new wl(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var wl=function(e){N(n,e);var t=P(n);function n(e,r,i,a,o){var u;return _(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=D(u),u}return T(n,[{key:"executeNotNull",value:function(){var e=dt(ft().mark((function e(){var t;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Pa(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=dt(ft().mark((function e(){var t,n=this;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return La(1===this.filter.length,"Popup operations only handle one event"),t=gc(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Na(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Na(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Na(e.auth,"popup-closed-by-user"))}),8e3):e.pollId=window.setTimeout(t,vl.get())}()}}]),n}(pl);wl.currentPopupAction=null;var xl="pendingRedirect",_l=new Map,El=function(e){N(n,e);var t=P(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return _(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return T(n,[{key:"execute",value:function(){var e=dt(ft().mark((function e(){var t,r;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=_l.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Il(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,fa(A(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:_l.set(this.auth._key(),t);case 21:return this.bypassAuthState||_l.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=dt(ft().mark((function e(t){var r;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",fa(A(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",fa(A(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=dt(ft().mark((function e(){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(pl);function Il(e,t){return Sl.apply(this,arguments)}function Sl(){return Sl=dt(ft().mark((function e(t,n){var r,i,a;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Rl(n),i=Al(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),Sl.apply(this,arguments)}function Tl(e,t){return Cl.apply(this,arguments)}function Cl(){return Cl=dt(ft().mark((function e(t,n){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Al(t)._set(Rl(n),"true"));case 1:case"end":return e.stop()}}),e)}))),Cl.apply(this,arguments)}function Nl(e,t){_l.set(e._key(),t)}function Al(e){return So(e._redirectPersistence)}function Rl(e){return No(xl,e.config.apiKey,e.name)}function Dl(e,t,n){return function(e,t,n){return Pl.apply(this,arguments)}(e,t,n)}function Pl(){return Pl=dt(ft().mark((function e(t,n,r){var i,a;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=nu(t),Ra(t,n,qu),e.next=4,i._initializationPromise;case 4:return a=sl(i,r),e.next=7,Tl(a,i);case 7:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 8:case"end":return e.stop()}}),e)}))),Pl.apply(this,arguments)}function Ol(e,t,n){return function(e,t,n){return Ll.apply(this,arguments)}(e,t,n)}function Ll(){return(Ll=dt(ft().mark((function e(t,n,r){var i,a,o;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ra((i=Lr(t)).auth,n,qu),e.next=4,i.auth._initializationPromise;case 4:return a=sl(i.auth,r),e.next=7,Tl(a,i.auth);case 7:return e.next=9,Bl(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ml(e,t,n){return function(e,t,n){return Fl.apply(this,arguments)}(e,t,n)}function Fl(){return(Fl=dt(ft().mark((function e(t,n,r){var i,a,o;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ra((i=Lr(t)).auth,n,qu),e.next=4,i.auth._initializationPromise;case 4:return a=sl(i.auth,r),e.next=7,ls(!1,i,n.providerId);case 7:return e.next=9,Tl(a,i.auth);case 9:return e.next=11,Bl(i);case 11:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jl(e,t){return Ul.apply(this,arguments)}function Ul(){return Ul=dt(ft().mark((function e(t,n){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nu(t)._initializationPromise;case 2:return e.abrupt("return",Vl(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),Ul.apply(this,arguments)}function Vl(e,t){return zl.apply(this,arguments)}function zl(){return zl=dt(ft().mark((function e(t,n){var r,i,a,o,u,s=arguments;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=nu(t),a=sl(i,n),o=new El(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),zl.apply(this,arguments)}function Bl(e){return ql.apply(this,arguments)}function ql(){return(ql=dt(ft().mark((function e(t){var n;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=gc("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Kl=function(){function e(t){_(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return T(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Hl(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Hl(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Na(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gl(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Gl(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Gl(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Hl(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Wl(e){return Ql.apply(this,arguments)}function Ql(){return Ql=dt(ft().mark((function e(t){var n,r=arguments;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Ga(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Ql.apply(this,arguments)}var Yl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$l=/^https?/;function Jl(){return Jl=dt(ft().mark((function e(t){var n,r,i,a,o;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Wl(t);case 4:n=e.sent,r=n.authorizedDomains,i=F(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!Xl(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Ca(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),Jl.apply(this,arguments)}function Xl(e){var t=Ma(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!$l.test(r))return!1;if(Yl.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Zl=new Ua(3e4,6e4);function ef(){var e=bc().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=x(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var tf=null;function nf(e){return tf=tf||function(e){return new Promise((function(t,n){var r,i,a;function o(){ef(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){ef(),n(Na(e,"network-request-failed"))},timeout:Zl.get()})}if(null===(i=null===(r=bc().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=bc().gapi)||void 0===a?void 0:a.load)){var u=$o("iframefcb");return bc()[u]=function(){gapi.load?o():n(Na(e,"network-request-failed"))},Yo("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw tf=null,e}))}(e),tf}var rf=new Ua(5e3,15e3),af="__/auth/iframe",of="emulator/auth/iframe",uf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cf(e){var t=e.config;Pa(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Va(t,of):"https://".concat(e.config.authDomain,"/").concat(af),r={apiKey:t.apiKey,appName:e.name,v:Di},i=sf.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Nr(r).slice(1))}function lf(e){return ff.apply(this,arguments)}function ff(){return ff=dt(ft().mark((function e(t){var n,r;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nf(t);case 2:return n=e.sent,Pa(r=bc().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:cf(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uf,dontclear:!0},(function(e){return new Promise(function(){var n=dt(ft().mark((function n(r,i){var a,o,u;return ft().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){bc().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Na(t,"network-request-failed"),o=bc().setTimeout((function(){i(a)}),rf.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),ff.apply(this,arguments)}var hf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},df=function(){function e(t){_(this,e),this.window=t,this.associatedEvent=null}return T(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function pf(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},hf),{width:r.toString(),height:i.toString(),top:a,left:o}),l=mr().toLowerCase();n&&(u=Oo(l)?"_blank":n),Do(l)&&(t=t||"http://localhost",s.scrollbars="yes");var f=Object.entries(s).reduce((function(e,t){var n=c(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return Uo(arguments.length>0&&void 0!==arguments[0]?arguments[0]:mr())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==u)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",u),new df(null);var h=window.open(t||"",u,f);Pa(h,e,"popup-blocked");try{h.focus()}catch(d){}return new df(h)}var vf="__/auth/handler",mf="emulator/auth/handler",yf=encodeURIComponent("fac");function gf(e,t,n,r,i,a){return kf.apply(this,arguments)}function kf(){return kf=dt(ft().mark((function e(t,n,r,i,a,o){var u,s,l,f,h,d,p,v,m,y,g,k,b;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Pa(t.config.authDomain,t,"auth-domain-config-required"),Pa(t.config.apiKey,t,"invalid-api-key"),u={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:Di,eventId:a},n instanceof qu)for(n.setDefaultLanguage(t.languageCode),u.providerId=n.providerId||"",Sr(n.getCustomParameters())||(u.customParameters=JSON.stringify(n.getCustomParameters())),s=0,l=Object.entries(o||{});s<l.length;s++)f=c(l[s],2),h=f[0],d=f[1],u[h]=d;for(n instanceof Ku&&(p=n.getScopes().filter((function(e){return""!==e}))).length>0&&(u.scopes=p.join(",")),t.tenantId&&(u.tid=t.tenantId),v=u,m=0,y=Object.keys(v);m<y.length;m++)g=y[m],void 0===v[g]&&delete v[g];return e.next=10,t._getAppCheckToken();case 10:return k=e.sent,b=k?"#".concat(yf,"=").concat(encodeURIComponent(k)):"",e.abrupt("return","".concat(bf(t),"?").concat(Nr(v).slice(1)).concat(b));case 13:case"end":return e.stop()}}),e)}))),kf.apply(this,arguments)}function bf(e){var t=e.config;return t.emulator?Va(t,mf):"https://".concat(t.authDomain,"/").concat(vf)}var wf="webStorageSupport",xf=function(){function e(){_(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vc,this._completeRedirectFn=Vl,this._overrideRedirectResult=Nl}return T(e,[{key:"_openPopup",value:function(){var e=dt(ft().mark((function e(t,n,r,i){var a,o;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return La(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),e.next=3,gf(t,n,r,Ma(),i);case 3:return o=e.sent,e.abrupt("return",pf(t,o,gc()));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=dt(ft().mark((function e(t,n,r,i){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return e.next=4,gf(t,n,r,Ma(),i);case 4:return wc(e.sent),e.abrupt("return",new Promise((function(){})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(La(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=dt(ft().mark((function e(t){var n,r;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lf(t);case 2:return n=e.sent,r=new Kl(t),n.register("authEvent",(function(e){return Pa(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(wf,{type:wf},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[wf];void 0!==i&&t(!!i),Ca(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Jl.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Vo()||Po()||Uo()}}]),e}(),_f=xf,Ef=function(){function e(t){_(this,e),this.factorId=t}return T(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Oa("unexpected MultiFactorSessionType")}}}]),e}(),If=function(e){N(n,e);var t=P(n);function n(e){var r;return _(this,n),(r=t.call(this,"phone")).credential=e,r}return T(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Ga(e,"POST","/v2/accounts/mfaEnrollment:finalize",Ka(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Ga(e,"POST","/v2/accounts/mfaSignIn:finalize",Ka(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(Ef),Sf=function(){function e(){_(this,e)}return T(e,null,[{key:"assertion",value:function(e){return If._fromCredential(e)}}]),e}();Sf.FACTOR_ID="phone";var Tf=function(){function e(){_(this,e)}return T(e,null,[{key:"assertionForEnrollment",value:function(e,t){return Cf._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return Cf._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=dt(ft().mark((function e(t){var n,r;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pa("undefined"!==typeof(n=t).auth,"internal-error"),e.next=4,ac(n.auth,{idToken:n.credential,totpEnrollmentInfo:{}});case 4:return r=e.sent,e.abrupt("return",Nf._fromStartTotpMfaEnrollmentResponse(r,n.auth));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();Tf.FACTOR_ID="totp";var Cf=function(e){N(n,e);var t=P(n);function n(e,r,i){var a;return _(this,n),(a=t.call(this,"totp")).otp=e,a.enrollmentId=r,a.secret=i,a}return T(n,[{key:"_finalizeEnroll",value:function(){var e=dt(ft().mark((function e(t,n,r){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pa("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",oc(t,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=dt(ft().mark((function e(t,n){var r;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pa(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),r={verificationCode:this.otp},e.abrupt("return",zc(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(Ef),Nf=function(){function e(t,n,r,i,a,o,u){_(this,e),this.sessionInfo=o,this.auth=u,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=a}return T(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(Af(e)||Af(t))&&(r=!0),r&&(Af(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),Af(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function Af(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var Rf="@firebase/auth",Df="0.23.2",Pf=function(){function e(t){_(this,e),this.auth=t,this.internalListeners=new Map}return T(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=dt(ft().mark((function e(t){var n;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Pa(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var Of;!function(e){var t;null===(t=dr())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function Lf(){return window}Of="Browser",Ii(new Mr("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),o=r.options,u=o.apiKey,s=o.authDomain;Pa(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});var c={apiKey:u,authDomain:s,clientPlatform:Of,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zo(Of)},l=new tu(r,i,a,c);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(So);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Ii(new Mr("auth-internal",(function(e){return function(e){return new Pf(e)}(nu(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),ji(Rf,Df,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Of)),ji(Rf,Df,"esm2017");var Mf=2e3;function Ff(e,t,n){return jf.apply(this,arguments)}function jf(){return jf=dt(ft().mark((function e(t,n,r){var i,a,o,u,s;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Lf(),o=a.BuildInfo,La(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Kf(n.sessionId);case 4:return u=e.sent,s={},Uo()?s.ibi=o.packageName:Mo()?s.apn=o.packageName:Ca(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",gf(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),jf.apply(this,arguments)}function Uf(){return Uf=dt(ft().mark((function e(t){var n,r,i;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Lf(),r=n.BuildInfo,i={},Uo()?i.iosBundleId=r.packageName:Mo()?i.androidPackageName=r.packageName:Ca(t,"operation-not-supported-in-this-environment"),e.next=5,Wl(t,i);case 5:case"end":return e.stop()}}),e)}))),Uf.apply(this,arguments)}function Vf(e){var t=Lf().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mr();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function zf(e,t,n){return Bf.apply(this,arguments)}function Bf(){return Bf=dt(ft().mark((function e(t,n,r){var i,a,o;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Lf(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(Na(t,"redirect-cancelled-by-user"))}),Mf))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),Mo()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Bf.apply(this,arguments)}function qf(e){var t,n,r,i,a,o,u,s,c,l,f=Lf();Pa("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Pa("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Pa("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Pa("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Pa("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Kf(e){return Gf.apply(this,arguments)}function Gf(){return(Gf=dt(ft().mark((function e(t){var n,r,i;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Hf(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hf(e){if(La(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var Wf=20,Qf=function(e){N(n,e);var t=P(n);function n(){var e;return _(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return T(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),fa(A(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=dt(ft().mark((function e(){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Kl);function Yf(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:eh(),postBody:null,tenantId:e.tenantId,error:Na(e,"no-auth-event")}}function $f(e,t){return th()._set(nh(e),t)}function Jf(e){return Xf.apply(this,arguments)}function Xf(){return Xf=dt(ft().mark((function e(t){var n;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,th()._get(nh(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,th()._remove(nh(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),Xf.apply(this,arguments)}function Zf(e,t){var n,r,i=function(e){var t=rh(e),n=t.link?decodeURIComponent(t.link):void 0,r=rh(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return rh(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=rh(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?Na(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function eh(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<Wf;n++){var r=Math.floor(62*Math.random());e.push(t.charAt(r))}return e.join("")}function th(){return So(dc)}function nh(e){return No("authEvent",e.config.apiKey,e.name)}function rh(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t=M(e.split("?"));t[0];return Ar(t.slice(1).join("?"))}var ih=function(){function e(){_(this,e),this._redirectPersistence=vc,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Vl,this._overrideRedirectResult=Nl}return T(e,[{key:"_initialize",value:function(){var e=dt(ft().mark((function e(t){var n,r;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Qf(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Ca(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=dt(ft().mark((function e(t,n,r,i){var a,o,u,s;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qf(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),_l.clear(),e.next=10,this._originValidation(t);case 10:return o=Yf(t,r,i),e.next=13,$f(t,o);case 13:return e.next=15,Ff(t,o,n);case 15:return u=e.sent,e.next=18,Vf(u);case 18:return s=e.sent,e.abrupt("return",zf(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Uf.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Lf(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(dt(ft().mark((function n(){return ft().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Jf(e);case 2:t.onEvent(oh());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=dt(ft().mark((function n(r){var i,a;return ft().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,Jf(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=Zf(i,r.url)),t.onEvent(a||oh());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");Lf().handleOpenURL=function(){var e=dt(ft().mark((function e(t){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),ah=ih;function oh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Na("no-auth-event")}}var uh=1e3;function sh(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function ch(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mr();return!("file:"!==sh()&&"ionic:"!==sh()&&"capacitor:"!==sh()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function lh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mr();return br()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mr();return/Edge\/\d+/.test(e)}(e)}function fh(){try{var e=self.localStorage,t=gc();if(e)return e.setItem(t,"1"),e.removeItem(t),!lh()||wr()}catch(n){return hh()&&wr()}return!1}function hh(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function dh(){return("http:"===sh()||"https:"===sh()||gr()||ch())&&!(kr()||yr())&&fh()&&!hh()}function ph(){return ch()&&"undefined"!==typeof document}function vh(){return mh.apply(this,arguments)}function mh(){return(mh=dt(ft().mark((function e(){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ph()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),uh);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var yh={LOCAL:"local",NONE:"none",SESSION:"session"},gh=Pa,kh="persistence";function bh(e,t){gh(Object.values(yh).includes(t),e,"invalid-persistence-type"),kr()?gh(t!==yh.SESSION,e,"unsupported-persistence-type"):yr()?gh(t===yh.NONE,e,"unsupported-persistence-type"):hh()?gh(t===yh.NONE||t===yh.LOCAL&&wr(),e,"unsupported-persistence-type"):gh(t===yh.NONE||fh(),e,"unsupported-persistence-type")}function wh(e){return xh.apply(this,arguments)}function xh(){return xh=dt(ft().mark((function e(t){var n,r;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=_h(),r=No(kh,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),xh.apply(this,arguments)}function _h(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var Eh=Pa,Ih=function(){function e(){_(this,e),this.browserResolver=So(_f),this.cordovaResolver=So(ah),this.underlyingResolver=null,this._redirectPersistence=vc,this._completeRedirectFn=Vl,this._overrideRedirectResult=Nl}return T(e,[{key:"_initialize",value:function(){var e=dt(ft().mark((function e(t){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=dt(ft().mark((function e(t,n,r,i){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=dt(ft().mark((function e(t,n,r,i){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return ph()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return Eh(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=dt(ft().mark((function e(){var t;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,vh();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Sh(e){return e.unwrap()}function Th(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new Dh(e,function(e,t){var n,r=Lr(e),i=t;return Pa(t.customData.operationType,r,"argument-error"),Pa(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),rc._fromError(r,i)}(e,t));else if(r){var i=Ch(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function Ch(e){var t=(e instanceof xr?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof xr)&&"temporaryProof"in t&&"phoneNumber"in t)return ul.credentialFromResult(e);var n,r=t.providerId;if(!r||r===pa.PASSWORD)return null;switch(r){case pa.GOOGLE:n=Wu;break;case pa.FACEBOOK:n=Hu;break;case pa.GITHUB:n=Qu;break;case pa.TWITTER:n=Ju;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?Yu._create(r,u):Pu._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new Gu(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof xr?n.credentialFromError(e):n.credentialFromResult(e)}function Nh(e,t){return t.catch((function(t){throw t instanceof xr&&Th(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Ch(t)),additionalUserInfo:tc(e),user:Ph.getOrCreate(r)}}))}function Ah(e,t){return Rh.apply(this,arguments)}function Rh(){return Rh=dt(ft().mark((function e(t,n){var r;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Nh(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),Rh.apply(this,arguments)}var Dh=function(){function e(t,n){_(this,e),this.resolver=n,this.auth=t.wrapped()}return T(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Nh(Sh(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),Ph=function(){function e(t){_(this,e),this._delegate=t,this.multiFactor=function(e){var t=Lr(e);return cc.has(t)||cc.set(t,sc._fromUser(t)),cc.get(t)}(t)}return T(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=dt(ft().mark((function e(t){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nh(this.auth,gs(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=dt(ft().mark((function e(t,n){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ah(this.auth,tl(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=dt(ft().mark((function e(t){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nh(this.auth,kl(this._delegate,t,Ih)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=dt(ft().mark((function e(t){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wh(nu(this.auth));case 2:return e.abrupt("return",Ml(this._delegate,t,Ih));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=dt(ft().mark((function e(t){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nh(this.auth,bs(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Ah(this.auth,function(e,t,n){return rl.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Nh(this.auth,function(e,t,n){return gl.apply(this,arguments)}(this._delegate,e,Ih))}},{key:"reauthenticateWithRedirect",value:function(){var e=dt(ft().mark((function e(t){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wh(nu(this.auth));case 2:return e.abrupt("return",Ol(this._delegate,t,Ih));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Bs.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=dt(ft().mark((function e(t){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,os(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Ws(Lr(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Ws(Lr(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return ol.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Hs.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return qs.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();Ph.USER_MAP=new WeakMap;var Oh=Pa,Lh=function(){function e(t,n){if(_(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Oh(r,"invalid-api-key",{appName:t.name}),Oh(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?Ih:void 0;this._delegate=n.initialize({options:{persistence:Fh(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(xa),this.linkUnderlyingAuth()}return T(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Ph.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){iu(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Rs.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Ds(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return As.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=dt(ft().mark((function e(t,n){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nh(this._delegate,Ls(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return zs.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=zu.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=dt(ft().mark((function e(){var t;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Oh(dh(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,jl(this._delegate,Ih);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Nh(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){nu(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Mh(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Mh(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Fs.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Ns.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=dt(ft().mark((function e(t){var n,r;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:bh(this._delegate,t),e.t0=t,e.next=e.t0===yh.SESSION?4:e.t0===yh.LOCAL?6:e.t0===yh.NONE?11:13;break;case 4:return n=vc,e.abrupt("break",14);case 6:return e.next=8,So(Uc)._isAvailable();case 8:return r=e.sent,n=r?Uc:dc,e.abrupt("break",14);case 11:return n=Co,e.abrupt("break",14);case 13:return e.abrupt("return",Ca("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Nh(this._delegate,function(e){return ns.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Nh(this._delegate,ms(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Nh(this._delegate,function(e,t){return Es.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Nh(this._delegate,function(e,t,n){return ms(Lr(e),Bu.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Nh(this._delegate,function(e,t,n){return js.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Ah(this._delegate,function(e,t,n){return el.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=dt(ft().mark((function e(t){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Oh(dh(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Nh(this._delegate,ml(this._delegate,t,Ih)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=dt(ft().mark((function e(t){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Oh(dh(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,wh(this._delegate);case 3:return e.abrupt("return",Dl(this._delegate,t,Ih));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Os.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Mh(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&Ph.getOrCreate(e))},error:t,complete:n}}function Fh(e,t){var n=function(e,t){var n=_h();if(!n)return[];var r=No(kh,e,t);switch(n.getItem(r)){case yh.NONE:return[Co];case yh.LOCAL:return[Uc,vc];case yh.SESSION:return[vc];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Uc)||n.push(Uc),"undefined"!==typeof window)for(var r=0,i=[dc,vc];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Co)||n.push(Co),n}Lh.Persistence=yh;var jh=function(){function e(){_(this,e),this.providerId="phone",this._delegate=new ul(Sh(la.auth()))}return T(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return ul.credential(e,t)}}]),e}();jh.PHONE_SIGN_IN_METHOD=ul.PHONE_SIGN_IN_METHOD,jh.PROVIDER_ID=ul.PROVIDER_ID;var Uh,Vh=Pa,zh=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:la.app();_(this,e),Vh(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new Jc(t,n,i.auth()),this.type=this._delegate.type}return T(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(Uh=la).INTERNAL.registerComponent(new Mr("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Lh(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:va,PASSWORD_RESET:ma,RECOVER_EMAIL:ya,REVERT_SECOND_FACTOR_ADDITION:ga,VERIFY_AND_CHANGE_EMAIL:ka,VERIFY_EMAIL:ba}},EmailAuthProvider:Bu,FacebookAuthProvider:Hu,GithubAuthProvider:Qu,GoogleAuthProvider:Wu,OAuthProvider:Gu,SAMLAuthProvider:$u,PhoneAuthProvider:jh,PhoneMultiFactorGenerator:Sf,RecaptchaVerifier:zh,TwitterAuthProvider:Ju,Auth:Lh,AuthCredential:uu,Error:xr}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Uh.registerVersion("@firebase/auth-compat","0.4.2");var Bh,qh="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Kh={},Gh=Gh||{},Hh=qh||self;function Wh(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Qh(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Yh="closure_uid_"+(1e9*Math.random()>>>0),$h=0;function Jh(e,t,n){return e.call.apply(e.bind,arguments)}function Xh(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Zh(e,t,n){return(Zh=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Jh:Xh).apply(null,arguments)}function ed(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function td(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function nd(){this.s=this.s,this.o=this.o}nd.prototype.s=!1,nd.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Yh)&&e[Yh]||(e[Yh]=++$h))},nd.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var rd=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function id(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function ad(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Wh(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function od(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}od.prototype.h=function(){this.defaultPrevented=!0};var ud=function(){if(!Hh.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Hh.addEventListener("test",(function(){}),t),Hh.removeEventListener("test",(function(){}),t)}catch(n){}return e}();function sd(e){return/^[\s\xa0]*$/.test(e)}function cd(){var e=Hh.navigator;return e&&(e=e.userAgent)?e:""}function ld(e){return-1!=cd().indexOf(e)}function fd(e){return fd[" "](e),e}fd[" "]=function(){};var hd,dd,pd=ld("Opera"),vd=ld("Trident")||ld("MSIE"),md=ld("Edge"),yd=md||vd,gd=ld("Gecko")&&!(-1!=cd().toLowerCase().indexOf("webkit")&&!ld("Edge"))&&!(ld("Trident")||ld("MSIE"))&&!ld("Edge"),kd=-1!=cd().toLowerCase().indexOf("webkit")&&!ld("Edge");function bd(){var e=Hh.document;return e?e.documentMode:void 0}e:{var wd="",xd=function(){var e=cd();return gd?/rv:([^\);]+)(\)|;)/.exec(e):md?/Edge\/([\d\.]+)/.exec(e):vd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):kd?/WebKit\/(\S+)/.exec(e):pd?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(xd&&(wd=xd?xd[1]:""),vd){var _d=bd();if(null!=_d&&_d>parseFloat(wd)){hd=String(_d);break e}}hd=wd}if(Hh.document&&vd){var Ed=bd();dd=Ed||(parseInt(hd,10)||void 0)}else dd=void 0;var Id=dd;function Sd(e,t){if(od.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(gd){e:{try{fd(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Td[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Sd.$.h.call(this)}}td(Sd,od);var Td={2:"touch",3:"pen",4:"mouse"};Sd.prototype.h=function(){Sd.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Cd="closure_listenable_"+(1e6*Math.random()|0),Nd=0;function Ad(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Nd,this.fa=this.ia=!1}function Rd(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Dd(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Pd(e){var t={};for(var n in e)t[n]=e[n];return t}var Od="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ld(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Od.length;a++)n=Od[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Md(e){this.src=e,this.g={},this.h=0}function Fd(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=rd(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Rd(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function jd(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}Md.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=jd(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Ad(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var Ud="closure_lm_"+(1e6*Math.random()|0),Vd={};function zd(e,t,n,r,i){if(r&&r.once)return qd(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)zd(e,t[a],n,r,i);return null}return n=$d(n),e&&e[Cd]?e.O(t,n,Qh(r)?!!r.capture:!!r,i):Bd(e,t,n,!1,r,i)}function Bd(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Qh(i)?!!i.capture:!!i,u=Qd(e);if(u||(e[Ud]=u=new Md(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Wd;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ud||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Hd(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function qd(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)qd(e,t[a],n,r,i);return null}return n=$d(n),e&&e[Cd]?e.P(t,n,Qh(r)?!!r.capture:!!r,i):Bd(e,t,n,!0,r,i)}function Kd(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Kd(e,t[a],n,r,i);else r=Qh(r)?!!r.capture:!!r,n=$d(n),e&&e[Cd]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=jd(a=e.g[t],n,r,i))&&(Rd(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Qd(e))&&(t=e.g[t.toString()],e=-1,t&&(e=jd(t,n,r,i)),(n=-1<e?t[e]:null)&&Gd(n))}function Gd(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Cd])Fd(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Hd(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Qd(t))?(Fd(n,e),0==n.h&&(n.src=null,t[Ud]=null)):Rd(e)}}}function Hd(e){return e in Vd?Vd[e]:Vd[e]="on"+e}function Wd(e,t){if(e.fa)e=!0;else{t=new Sd(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Gd(e),e=n.call(r,t)}return e}function Qd(e){return(e=e[Ud])instanceof Md?e:null}var Yd="__closure_events_fn_"+(1e9*Math.random()>>>0);function $d(e){return"function"===typeof e?e:(e[Yd]||(e[Yd]=function(t){return e.handleEvent(t)}),e[Yd])}function Jd(){nd.call(this),this.i=new Md(this),this.S=this,this.J=null}function Xd(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new od(t,e);else if(t instanceof od)t.target=t.target||e;else{var i=t;Ld(t=new od(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Zd(o,r,!0,t)&&i}if(i=Zd(o=t.g=e,r,!0,t)&&i,i=Zd(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Zd(o=t.g=n[a],r,!1,t)&&i}function Zd(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var u=o.listener,s=o.la||o.src;o.ia&&Fd(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}td(Jd,nd),Jd.prototype[Cd]=!0,Jd.prototype.removeEventListener=function(e,t,n,r){Kd(this,e,t,n,r)},Jd.prototype.N=function(){if(Jd.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Rd(n[r]);delete t.g[e],t.h--}}this.J=null},Jd.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Jd.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var ep=Hh.JSON.stringify,tp=function(){function e(t,n){_(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return T(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}();function np(){var e=lp,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var rp=function(){function e(){_(this,e),this.h=this.g=null}return T(e,[{key:"add",value:function(e,t){var n=ip.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),ip=new tp((function(){return new ap}),(function(e){return e.reset()})),ap=function(){function e(){_(this,e),this.next=this.g=this.h=null}return T(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function op(e){var t=1;e=e.split(":");for(var n=[];0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function up(e){Hh.setTimeout((function(){throw e}),0)}var sp,cp=!1,lp=new rp,fp=function(){var e=Hh.Promise.resolve(void 0);sp=function(){e.then(hp)}},hp=function(){for(var e;e=np();){try{e.h.call(e.g)}catch(n){up(n)}var t=ip;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}cp=!1};function dp(e,t){Jd.call(this),this.h=e||1,this.g=t||Hh,this.j=Zh(this.qb,this),this.l=Date.now()}function pp(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function vp(e,t,n){if("function"===typeof e)n&&(e=Zh(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Zh(e.handleEvent,e)}return 2147483647<Number(t)?-1:Hh.setTimeout(e,t||0)}function mp(e){e.g=vp((function(){e.g=null,e.i&&(e.i=!1,mp(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}td(dp,Jd),(Bh=dp.prototype).ga=!1,Bh.T=null,Bh.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Xd(this,"tick"),this.ga&&(pp(this),this.start()))}},Bh.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Bh.N=function(){dp.$.N.call(this),pp(this),delete this.g};var yp=function(e){N(n,e);var t=P(n);function n(e,r){var i;return _(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return T(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:mp(this)}},{key:"N",value:function(){fa(A(n.prototype),"N",this).call(this),this.g&&(Hh.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(nd);function gp(e){nd.call(this),this.h=e,this.g={}}td(gp,nd);var kp=[];function bp(e,t,n,r){Array.isArray(n)||(n&&(kp[0]=n.toString()),n=kp);for(var i=0;i<n.length;i++){var a=zd(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function wp(e){Dd(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Gd(e)}),e),e.g={}}function xp(){this.g=!0}function _p(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return ep(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}gp.prototype.N=function(){gp.$.N.call(this),wp(this)},gp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},xp.prototype.Ea=function(){this.g=!1},xp.prototype.info=function(){};var Ep={},Ip=null;function Sp(){return Ip=Ip||new Jd}function Tp(e){od.call(this,Ep.Ta,e)}function Cp(e){var t=Sp();Xd(t,new Tp(t))}function Np(e,t){od.call(this,Ep.STAT_EVENT,e),this.stat=t}function Ap(e){var t=Sp();Xd(t,new Np(t,e))}function Rp(e,t){od.call(this,Ep.Ua,e),this.size=t}function Dp(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Hh.setTimeout((function(){e()}),t)}Ep.Ta="serverreachability",td(Tp,od),Ep.STAT_EVENT="statevent",td(Np,od),Ep.Ua="timingevent",td(Rp,od);var Pp={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Op={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Lp(){}function Mp(e){return e.h||(e.h=e.i())}function Fp(){}Lp.prototype.h=null;var jp,Up={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Vp(){od.call(this,"d")}function zp(){od.call(this,"c")}function Bp(){}function qp(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new gp(this),this.P=Gp,e=yd?125:void 0,this.V=new dp(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Kp}function Kp(){this.i=null,this.g="",this.h=!1}td(Vp,od),td(zp,od),td(Bp,Lp),Bp.prototype.g=function(){return new XMLHttpRequest},Bp.prototype.i=function(){return{}},jp=new Bp;var Gp=45e3,Hp={},Wp={};function Qp(e,t,n){e.L=1,e.v=dv(sv(t)),e.s=n,e.S=!0,Yp(e,null)}function Yp(e,t){e.G=Date.now(),Zp(e),e.A=sv(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),Sv(n.i,"t",r),e.C=0,n=e.l.J,e.h=new Kp,e.g=Tm(e.l,n?t:null,!e.s),0<e.O&&(e.M=new yp(Zh(e.Pa,e,e.g),e.O)),bp(e.U,e.g,"readystatechange",e.nb),t=e.I?Pd(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Cp(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function $p(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function Jp(e,t,n){for(var r,i=!0;!e.J&&e.C<n.length;){if((r=Xp(e,n))==Wp){4==t&&(e.o=4,Ap(14),i=!1),_p(e.j,e.m,null,"[Incomplete Response]");break}if(r==Hp){e.o=4,Ap(15),_p(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}_p(e.j,e.m,r,null),iv(e,r)}$p(e)&&r!=Wp&&r!=Hp&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Ap(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),km(t),t.M=!0,Ap(11))):(_p(e.j,e.m,n,"[Invalid Chunked Response]"),rv(e),nv(e))}function Xp(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Wp:(n=Number(t.substring(n,r)),isNaN(n)?Hp:(r+=1)+n>t.length?Wp:(t=t.slice(r,r+n),e.C=r+n,t))}function Zp(e){e.Y=Date.now()+e.P,ev(e,e.P)}function ev(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Dp(Zh(e.lb,e),t)}function tv(e){e.B&&(Hh.clearTimeout(e.B),e.B=null)}function nv(e){0==e.l.H||e.J||xm(e.l,e)}function rv(e){tv(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,pp(e.V),wp(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function iv(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Pv(n.i,e)))if(!e.K&&Pv(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;wm(n),fm(n)}gm(n),Ap(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Dp(Zh(n.ib,n),6e3));if(1>=Dv(n.i)&&n.oa){try{n.oa()}catch(a){}n.oa=void 0}}else Em(n,11)}else if((e.K||n.g==e)&&wm(n),!sd(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.K=a[1],n.pa=a[2];var o=a[3];null!=o&&(n.ra=o,n.l.info("VER="+n.ra));var u=a[4];null!=u&&(n.Ga=u,n.l.info("SVER="+n.Ga));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(Ov(f,f.h),f.h=null))}if(r.F){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.Da=h,hv(r.I,r.F,h))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=Sm(r,r.J?r.pa:null,r.Y),d.K){Lv(r.i,d);var p=d,v=r.L;v&&p.setTimeout(v),p.B&&(tv(p),Zp(p)),r.g=d}else ym(r);0<n.j.length&&dm(n)}else"stop"!=a[0]&&"close"!=a[0]||Em(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Em(n,7):lm(n):"noop"!=a[0]&&n.h&&n.h.Aa(a),n.A=0)}Cp()}catch(a){}}function av(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Wh(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Wh(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Wh(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Bh=qp.prototype).setTimeout=function(e){this.P=e},Bh.nb=function(e){e=e.target;var t=this.M;t&&3==im(e)?t.l():this.Pa(e)},Bh.Pa=function(e){try{if(e==this.g)e:{var t=im(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||yd||this.g&&(this.h.h||this.g.ja()||am(this.g)))){this.J||4!=t||7==n||Cp(),tv(this);var r=this.g.da();this.ca=r;t:if($p(this)){var i=am(this.g);e="";var a=i.length,o=4==im(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){rv(this),nv(this);var u="";break t}this.h.i=new Hh.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,t,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!sd(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,Ap(12),rv(this),nv(this);break e}_p(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,iv(this,r)}this.S?(Jp(this,t,u),yd&&this.i&&3==t&&(bp(this.U,this.V,"tick",this.mb),this.V.start())):(_p(this.j,this.m,u,null),iv(this,u)),4==t&&rv(this),this.i&&!this.J&&(4==t?xm(this.l,this):(this.i=!1,Zp(this)))}else(function(e){var t={};e=(e.g&&2<=im(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<e.length;n++)if(!sd(e[n])){var r=op(e[n]),i=r[0];if("string"===typeof(r=r[1])){r=r.trim();var a=t[i]||[];t[i]=a,a.push(r)}}!function(e,t){for(var n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==r&&0<u.indexOf("Unknown SID")?(this.o=3,Ap(12)):(this.o=0,Ap(13)),rv(this),nv(this)}}}catch(t){}},Bh.mb=function(){if(this.g){var e=im(this.g),t=this.g.ja();this.C<t.length&&(tv(this),Jp(this,e,t),this.i&&4!=e&&Zp(this))}},Bh.cancel=function(){this.J=!0,rv(this)},Bh.lb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(Cp(),Ap(17)),rv(this),this.o=2,nv(this)):ev(this,this.Y-e)};var ov=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uv(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof uv){this.h=e.h,cv(this,e.j),this.s=e.s,this.g=e.g,lv(this,e.m),this.l=e.l;var t=e.i,n=new xv;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),fv(this,n),this.o=e.o}else e&&(t=String(e).match(ov))?(this.h=!1,cv(this,t[1]||"",!0),this.s=pv(t[2]||""),this.g=pv(t[3]||"",!0),lv(this,t[4]),this.l=pv(t[5]||"",!0),fv(this,t[6]||"",!0),this.o=pv(t[7]||"")):(this.h=!1,this.i=new xv(null,this.h))}function sv(e){return new uv(e)}function cv(e,t,n){e.j=n?pv(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lv(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function fv(e,t,n){t instanceof xv?(e.i=t,function(e,t){t&&!e.j&&(_v(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Ev(this,t),Sv(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=vv(t,bv)),e.i=new xv(t,e.h))}function hv(e,t,n){e.i.set(t,n)}function dv(e){return hv(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function pv(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function vv(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,mv),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function mv(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}uv.prototype.toString=function(){var e=[],t=this.j;t&&e.push(vv(t,yv,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(vv(t,yv,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(vv(n,"/"==n.charAt(0)?kv:gv,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",vv(n,wv)),e.join("")};var yv=/[#\/\?@]/g,gv=/[#\?:]/g,kv=/[#\?]/g,bv=/[#\?@]/g,wv=/#/g;function xv(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function _v(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Ev(e,t){_v(e),t=Tv(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Iv(e,t){return _v(e),t=Tv(e,t),e.g.has(t)}function Sv(e,t,n){Ev(e,t),0<n.length&&(e.i=null,e.g.set(Tv(e,t),id(n)),e.h+=n.length)}function Tv(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Bh=xv.prototype).add=function(e,t){_v(this),this.i=null,e=Tv(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Bh.forEach=function(e,t){_v(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Bh.ta=function(){_v(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Bh.Z=function(e){_v(this);var t=[];if("string"===typeof e)Iv(this,e)&&(t=t.concat(this.g.get(Tv(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Bh.set=function(e,t){return _v(this),this.i=null,Iv(this,e=Tv(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Bh.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Bh.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var Cv=T((function e(t,n){_(this,e),this.g=t,this.map=n}));function Nv(e){this.l=e||Av,Hh.PerformanceNavigationTiming?e=0<(e=Hh.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Hh.g&&Hh.g.Ka&&Hh.g.Ka()&&Hh.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Av=10;function Rv(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Dv(e){return e.h?1:e.g?e.g.size:0}function Pv(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ov(e,t){e.g?e.g.add(t):e.h=t}function Lv(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Mv(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=F(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(a){r.e(a)}finally{r.f()}return n}return id(e.i)}Nv.prototype.cancel=function(){if(this.i=Mv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=F(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}};var Fv,jv=function(){function e(){_(this,e)}return T(e,[{key:"stringify",value:function(e){return Hh.JSON.stringify(e,void 0)}},{key:"parse",value:function(e){return Hh.JSON.parse(e,void 0)}}]),e}();function Uv(){this.g=new jv}function Vv(e,t,n){var r=n||"";try{av(e,(function(e,n){var i=e;Qh(e)&&(i=ep(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function zv(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Bv(e){this.l=e.fc||null,this.j=e.ob||!1}function qv(e,t){Jd.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Kv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}td(Bv,Lp),Bv.prototype.g=function(){return new qv(this.l,this.j)},Bv.prototype.i=(Fv={},function(){return Fv}),td(qv,Jd);var Kv=0;function Gv(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Hv(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Wv(e)}function Wv(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Bh=qv.prototype).open=function(e,t){if(this.readyState!=Kv)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Wv(this)},Bh.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Hh).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Bh.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Hv(this)),this.readyState=Kv},Bh.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Wv(this)),this.g&&(this.readyState=3,Wv(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Hh.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Gv(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Bh.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Hv(this):Wv(this),3==this.readyState&&Gv(this)}},Bh.Za=function(e){this.g&&(this.response=this.responseText=e,Hv(this))},Bh.Ya=function(e){this.g&&(this.response=e,Hv(this))},Bh.ka=function(){this.g&&Hv(this)},Bh.setRequestHeader=function(e,t){this.v.append(e,t)},Bh.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Bh.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(qv.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Qv=Hh.JSON.parse;function Yv(e){Jd.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=$v,this.L=this.M=!1}td(Yv,Jd);var $v="",Jv=/^https?$/i,Xv=["POST","PUT"];function Zv(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,em(e),nm(e)}function em(e){e.F||(e.F=!0,Xd(e,"complete"),Xd(e,"error"))}function tm(e){if(e.h&&"undefined"!=typeof Gh&&(!e.C[1]||4!=im(e)||2!=e.da()))if(e.v&&4==im(e))vp(e.La,0,e);else if(Xd(e,"readystatechange"),4==im(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(ov)[1]||null;!a&&Hh.self&&Hh.self.location&&(a=Hh.self.location.protocol.slice(0,-1)),i=!Jv.test(a?a.toLowerCase():"")}t=i}if(t)Xd(e,"complete"),Xd(e,"success");else{e.m=6;try{var o=2<im(e)?e.g.statusText:""}catch(u){o=""}e.j=o+" ["+e.da()+"]",em(e)}}finally{nm(e)}}}function nm(e,t){if(e.g){rm(e);var n=e.g,r=e.C[0]?function(){}:null;e.g=null,e.C=null,t||Xd(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function rm(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Hh.clearTimeout(e.A),e.A=null)}function im(e){return e.g?e.g.readyState:0}function am(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case $v:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(ly){return null}}function om(e){var t="";return Dd(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function um(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=om(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):hv(e,t,n))}function sm(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function cm(e){this.Ga=0,this.j=[],this.l=new xp,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=sm("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=sm("baseRetryDelayMs",5e3,e),this.hb=sm("retryDelaySeedMs",1e4,e),this.eb=sm("forwardChannelMaxRetries",2,e),this.xa=sm("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Nv(e&&e.concurrentRequestLimit),this.Ja=new Uv,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function lm(e){if(hm(e),3==e.H){var t=e.W++,n=sv(e.I);if(hv(n,"SID",e.K),hv(n,"RID",t),hv(n,"TYPE","terminate"),vm(e,n),(t=new qp(e,e.l,t)).L=2,t.v=dv(sv(n)),n=!1,Hh.navigator&&Hh.navigator.sendBeacon)try{n=Hh.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&Hh.Image&&((new Image).src=t.v,n=!0),n||(t.g=Tm(t.l,null),t.g.ha(t.v)),t.G=Date.now(),Zp(t)}Im(e)}function fm(e){e.g&&(km(e),e.g.cancel(),e.g=null)}function hm(e){fm(e),e.u&&(Hh.clearTimeout(e.u),e.u=null),wm(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Hh.clearTimeout(e.m),e.m=null)}function dm(e){if(!Rv(e.i)&&!e.m){e.m=!0;var t=e.Na;sp||fp(),cp||(sp(),cp=!0),lp.add(t,e),e.C=0}}function pm(e,t){var n;n=t?t.m:e.W++;var r=sv(e.I);hv(r,"SID",e.K),hv(r,"RID",n),hv(r,"AID",e.V),vm(e,r),e.o&&e.s&&um(r,e.o,e.s),n=new qp(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=mm(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Ov(e.i,n),Qp(n,r,t)}function vm(e,t){e.na&&Dd(e.na,(function(e,n){hv(t,n,e)})),e.h&&av({},(function(e,n){hv(t,n,e)}))}function mm(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Zh(e.h.Va,e.h,e):null;e:for(var i=e.j,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].g,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].g,l=i[s].map;if(0>(c-=a))a=Math.max(0,i[s].g-100),u=!1;else try{Vv(l,o,"req"+c+"_")}catch(wy){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.j.splice(0,n),t.F=e,r}function ym(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;sp||fp(),cp||(sp(),cp=!0),lp.add(t,e),e.A=0}}function gm(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Dp(Zh(e.Ma,e),_m(e,e.A)),e.A++,!0)}function km(e){null!=e.B&&(Hh.clearTimeout(e.B),e.B=null)}function bm(e){e.g=new qp(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=sv(e.wa);hv(t,"RID","rpc"),hv(t,"SID",e.K),hv(t,"AID",e.V),hv(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&hv(t,"TO",e.qa),hv(t,"TYPE","xmlhttp"),vm(e,t),e.o&&e.s&&um(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=dv(sv(t)),n.s=null,n.S=!0,Yp(n,e)}function wm(e){null!=e.v&&(Hh.clearTimeout(e.v),e.v=null)}function xm(e,t){var n=null;if(e.g==t){wm(e),km(e),e.g=null;var r=2}else{if(!Pv(e.i,t))return;n=t.F,Lv(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;Xd(r=Sp(),new Rp(r,n)),dm(e)}else ym(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Dv(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Dp(Zh(e.Na,e,t),_m(e,e.C)),e.C++,!0))}(e,t)||2==r&&gm(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Em(e,5);break;case 4:Em(e,10);break;case 3:Em(e,6);break;default:Em(e,2)}}function _m(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Em(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Zh(e.pb,e);n||(n=new uv("//www.google.com/images/cleardot.gif"),Hh.location&&"http"==Hh.location.protocol||cv(n,"https"),dv(n)),function(e,t){var n=new xp;if(Hh.Image){var r=new Image;r.onload=ed(zv,n,r,"TestLoadImage: loaded",!0,t),r.onerror=ed(zv,n,r,"TestLoadImage: error",!1,t),r.onabort=ed(zv,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=ed(zv,n,r,"TestLoadImage: timeout",!1,t),Hh.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Ap(2);e.H=0,e.h&&e.h.za(t),Im(e),hm(e)}function Im(e){if(e.H=0,e.ma=[],e.h){var t=Mv(e.i);0==t.length&&0==e.j.length||(ad(e.ma,t),ad(e.ma,e.j),e.i.i.length=0,id(e.j),e.j.length=0),e.h.ya()}}function Sm(e,t,n){var r=n instanceof uv?sv(n):new uv(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lv(r,r.m);else{var i=Hh.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new uv(null);r&&cv(a,r),t&&(a.g=t),i&&lv(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&hv(r,n,t),hv(r,"VER",e.ra),vm(e,r),r}function Tm(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new Yv(new Bv({ob:!0})):new Yv(e.va)).Oa(e.J),t}function Cm(){}function Nm(){if(vd&&!(10<=Number(Id)))throw Error("Environmental error: no available transport.")}function Am(e,t){Jd.call(this),this.g=new cm(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!sd(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!sd(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Pm(this)}function Rm(e){Vp.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Dm(){zp.call(this),this.status=1}function Pm(e){this.g=e}function Om(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Lm(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function Mm(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(Bh=Yv.prototype).Oa=function(e){this.M=e},Bh.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():jp.g(),this.C=this.u?Mp(this.u):Mp(jp),this.g.onreadystatechange=Zh(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(u){return void Zv(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=F(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(p){o.e(p)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=Hh.FormData&&e instanceof Hh.FormData,!(0<=rd(Xv,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,l=F(n);try{for(l.s();!(s=l.n()).done;){var f=c(s.value,2),h=f[0],d=f[1];this.g.setRequestHeader(h,d)}}catch(p){l.e(p)}finally{l.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{rm(this),0<this.B&&((this.L=function(e){return vd&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Zh(this.ua,this)):this.A=vp(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){Zv(this,u)}},Bh.ua=function(){"undefined"!=typeof Gh&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Xd(this,"timeout"),this.abort(8))},Bh.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Xd(this,"complete"),Xd(this,"abort"),nm(this))},Bh.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),nm(this,!0)),Yv.$.N.call(this)},Bh.La=function(){this.s||(this.G||this.v||this.l?tm(this):this.kb())},Bh.kb=function(){tm(this)},Bh.isActive=function(){return!!this.g},Bh.da=function(){try{return 2<im(this)?this.g.status:-1}catch(Fv){return-1}},Bh.ja=function(){try{return this.g?this.g.responseText:""}catch(Fv){return""}},Bh.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Qv(t)}},Bh.Ia=function(){return this.m},Bh.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Bh=cm.prototype).ra=8,Bh.H=1,Bh.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new qp(this,this.l,e),n=this.s;if(this.U&&(n?Ld(n=Pd(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.j.length;i++){var a=this.j[i];if(void 0===(a="__data__"in a.map&&"string"===typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.j.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=mm(this,t,r),hv(i=sv(this.I),"RID",e),hv(i,"CVER",22),this.F&&hv(i,"X-HTTP-Session-Id",this.F),vm(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(om(n)))+"&"+r:this.o&&um(i,this.o,n)),Ov(this.i,t),this.bb&&hv(i,"TYPE","init"),this.P?(hv(i,"$req",r),hv(i,"SID","null"),t.aa=!0,Qp(t,i,null)):Qp(t,i,r),this.H=2}}else 3==this.H&&(e?pm(this,e):0==this.j.length||Rv(this.i)||pm(this))},Bh.Ma=function(){if(this.u=null,bm(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Dp(Zh(this.jb,this),e)}},Bh.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ap(10),fm(this),bm(this))},Bh.ib=function(){null!=this.v&&(this.v=null,fm(this),gm(this),Ap(19))},Bh.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Ap(2)):(this.l.info("Failed to ping google.com"),Ap(1))},Bh.isActive=function(){return!!this.h&&this.h.isActive(this)},(Bh=Cm.prototype).Ba=function(){},Bh.Aa=function(){},Bh.za=function(){},Bh.ya=function(){},Bh.isActive=function(){return!0},Bh.Va=function(){},Nm.prototype.g=function(e,t){return new Am(e,t)},td(Am,Jd),Am.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Ap(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Sm(e,null,e.Y),dm(e)},Am.prototype.close=function(){lm(this.g)},Am.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=ep(e),e=n);t.j.push(new Cv(t.fb++,e)),3==t.H&&dm(t)},Am.prototype.N=function(){this.g.h=null,delete this.j,lm(this.g),delete this.g,Am.$.N.call(this)},td(Rm,Vp),td(Dm,zp),td(Pm,Cm),Pm.prototype.Ba=function(){Xd(this.g,"a")},Pm.prototype.Aa=function(e){Xd(this.g,new Rm(e))},Pm.prototype.za=function(e){Xd(this.g,new Dm)},Pm.prototype.ya=function(){Xd(this.g,"b")},td(Om,(function(){this.blockSize=-1})),Om.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Om.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)Lm(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){Lm(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){Lm(this,r),i=0;break}}this.h=i,this.i+=t},Om.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Fm={};function jm(e){return-128<=e&&128>e?function(e,t){var n=Fm;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Mm([0|e],0>e?-1:0)})):new Mm([0|e],0>e?-1:0)}function Um(e){if(isNaN(e)||!isFinite(e))return zm;if(0>e)return Hm(Um(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Vm;return new Mm(t,0)}var Vm=4294967296,zm=jm(0),Bm=jm(1),qm=jm(16777216);function Km(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Gm(e){return-1==e.h}function Hm(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Mm(n,~e.h).add(Bm)}function Wm(e,t){return e.add(Hm(t))}function Qm(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Ym(e,t){this.g=e,this.h=t}function $m(e,t){if(Km(t))throw Error("division by zero");if(Km(e))return new Ym(zm,zm);if(Gm(e))return t=$m(Hm(e),t),new Ym(Hm(t.g),Hm(t.h));if(Gm(t))return t=$m(e,Hm(t)),new Ym(Hm(t.g),t.h);if(30<e.g.length){if(Gm(e)||Gm(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Bm,r=t;0>=r.X(e);)n=Jm(n),r=Jm(r);var i=Xm(n,1),a=Xm(r,1);for(r=Xm(r,2),n=Xm(n,2);!Km(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=Xm(r,1),n=Xm(n,1)}return t=Wm(e,i.R(t)),new Ym(i,t)}for(i=zm;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=Um(n)).R(t);Gm(o)||0<o.X(e);)o=(a=Um(n-=r)).R(t);Km(a)&&(a=Bm),i=i.add(a),e=Wm(e,o)}return new Ym(i,e)}function Jm(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Mm(n,e.h)}function Xm(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new Mm(i,e.h)}(Bh=Mm.prototype).ea=function(){if(Gm(this))return-Hm(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Vm+r)*t,t*=Vm}return e},Bh.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Km(this))return"0";if(Gm(this))return"-"+Hm(this).toString(e);for(var t=Um(Math.pow(e,6)),n=this,r="";;){var i=$m(n,t).g,a=((0<(n=Wm(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Km(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},Bh.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Bh.X=function(e){return Gm(e=Wm(this,e))?-1:Km(e)?0:1},Bh.abs=function(){return Gm(this)?Hm(this):this},Bh.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new Mm(n,-2147483648&n[n.length-1]?-1:0)},Bh.R=function(e){if(Km(this)||Km(e))return zm;if(Gm(this))return Gm(e)?Hm(this).R(Hm(e)):Hm(Hm(this).R(e));if(Gm(e))return Hm(this.R(Hm(e)));if(0>this.X(qm)&&0>e.X(qm))return Um(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),u=e.D(i)>>>16,s=65535&e.D(i);n[2*r+2*i]+=o*s,Qm(n,2*r+2*i),n[2*r+2*i+1]+=a*s,Qm(n,2*r+2*i+1),n[2*r+2*i+1]+=o*u,Qm(n,2*r+2*i+1),n[2*r+2*i+2]+=a*u,Qm(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Mm(n,0)},Bh.gb=function(e){return $m(this,e).h},Bh.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Mm(n,this.h&e.h)},Bh.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Mm(n,this.h|e.h)},Bh.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Mm(n,this.h^e.h)},Nm.prototype.createWebChannel=Nm.prototype.g,Am.prototype.send=Am.prototype.u,Am.prototype.open=Am.prototype.m,Am.prototype.close=Am.prototype.close,Pp.NO_ERROR=0,Pp.TIMEOUT=8,Pp.HTTP_ERROR=6,Op.COMPLETE="complete",Fp.EventType=Up,Up.OPEN="a",Up.CLOSE="b",Up.ERROR="c",Up.MESSAGE="d",Jd.prototype.listen=Jd.prototype.O,Yv.prototype.listenOnce=Yv.prototype.P,Yv.prototype.getLastError=Yv.prototype.Sa,Yv.prototype.getLastErrorCode=Yv.prototype.Ia,Yv.prototype.getStatus=Yv.prototype.da,Yv.prototype.getResponseJson=Yv.prototype.Wa,Yv.prototype.getResponseText=Yv.prototype.ja,Yv.prototype.send=Yv.prototype.ha,Yv.prototype.setWithCredentials=Yv.prototype.Oa,Om.prototype.digest=Om.prototype.l,Om.prototype.reset=Om.prototype.reset,Om.prototype.update=Om.prototype.j,Mm.prototype.add=Mm.prototype.add,Mm.prototype.multiply=Mm.prototype.R,Mm.prototype.modulo=Mm.prototype.gb,Mm.prototype.compare=Mm.prototype.X,Mm.prototype.toNumber=Mm.prototype.ea,Mm.prototype.toString=Mm.prototype.toString,Mm.prototype.getBits=Mm.prototype.D,Mm.fromNumber=Um,Mm.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Hm(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Um(Math.pow(n,8)),i=zm,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),u=parseInt(t.substring(a,a+o),n);8>o?(o=Um(Math.pow(n,o)),i=i.R(o).add(Um(u))):i=(i=i.R(r)).add(Um(u))}return i};var Zm=Kh.createWebChannelTransport=function(){return new Nm},ey=Kh.getStatEventTarget=function(){return Sp()},ty=Kh.ErrorCode=Pp,ny=Kh.EventType=Op,ry=Kh.Event=Ep,iy=Kh.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},ay=Kh.FetchXmlHttpFactory=Bv,oy=Kh.WebChannel=Fp,uy=Kh.XhrIo=Yv,sy=Kh.Md5=Om,cy=Kh.Integer=Mm,ly="@firebase/firestore",fy=function(){function e(t){_(this,e),this.uid=t}return T(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();fy.UNAUTHENTICATED=new fy(null),fy.GOOGLE_CREDENTIALS=new fy("google-credentials-uid"),fy.FIRST_PARTY=new fy("first-party-uid"),fy.MOCK_USER=new fy("mock-user");var hy="9.23.0",dy=new Wr("@firebase/firestore");function py(){return dy.logLevel}function vy(e){if(dy.logLevel<=Vr.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(gy);dy.debug.apply(dy,["Firestore (".concat(hy,"): ").concat(e)].concat(x(i)))}}function my(e){if(dy.logLevel<=Vr.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(gy);dy.error.apply(dy,["Firestore (".concat(hy,"): ").concat(e)].concat(x(i)))}}function yy(e){if(dy.logLevel<=Vr.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(gy);dy.warn.apply(dy,["Firestore (".concat(hy,"): ").concat(e)].concat(x(i)))}}function gy(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function ky(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(hy,") INTERNAL ASSERTION FAILED: ")+e;throw my(t),new Error(t)}function by(e,t){e||ky()}function wy(e,t){return e}var xy={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},_y=function(e){N(n,e);var t=P(n);function n(e,r){var i;return _(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return T(n)}(xr),Ey=T((function e(){var t=this;_(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Iy=T((function e(t,n){_(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Sy=function(){function e(){_(this,e)}return T(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(fy.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Ty=function(){function e(t){_(this,e),this.token=t,this.changeListener=null}return T(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Cy=function(){function e(t){_(this,e),this.t=t,this.currentUser=fy.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return T(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Ey;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Ey,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(dt(ft().mark((function e(){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){vy("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(vy("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ey)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(vy("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(by("string"==typeof n.accessToken),new Iy(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return by(null===e||"string"==typeof e),new fy(e)}}]),e}(),Ny=function(){function e(t,n,r){_(this,e),this.h=t,this.l=n,this.m=r,this.type="FirstParty",this.user=fy.FIRST_PARTY,this.g=new Map}return T(e,[{key:"p",value:function(){return this.m?this.m():null}},{key:"headers",get:function(){this.g.set("X-Goog-AuthUser",this.h);var e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}]),e}(),Ay=function(){function e(t,n,r){_(this,e),this.h=t,this.l=n,this.m=r}return T(e,[{key:"getToken",value:function(){return Promise.resolve(new Ny(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(fy.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Ry=T((function e(t){_(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Dy=function(){function e(t){_(this,e),this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}return T(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&vy("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.T;return n.T=e.token,vy("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){vy("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.I.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.I.getImmediate({optional:!0});e?i(e):vy("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(by("string"==typeof t.token),e.T=t.token,new Ry(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Py(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Oy=function(){function e(){_(this,e)}return T(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var r=Py(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62));return n}}]),e}();function Ly(e,t){return e<t?-1:e>t?1:0}function My(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Fy(e){return e+"\0"}var jy=function(){function e(t,n){if(_(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new _y(xy.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new _y(xy.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new _y(xy.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new _y(xy.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return T(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Ly(this.nanoseconds,e.nanoseconds):Ly(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Uy=function(){function e(t){_(this,e),this.timestamp=t}return T(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new jy(0,0))}},{key:"max",value:function(){return new e(new jy(253402300799,999999999))}}]),e}(),Vy=function(){function e(t,n,r){_(this,e),void 0===n?n=0:n>t.length&&ky(),void 0===r?r=t.length-n:r>t.length-n&&ky(),this.segments=t,this.offset=n,this.len=r}return T(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),zy=function(e){N(n,e);var t=P(n);function n(){return _(this,n),t.apply(this,arguments)}return T(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new _y(xy.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,x(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Vy),By=/^[_a-zA-Z][_a-zA-Z0-9]*$/,qy=function(e){N(n,e);var t=P(n);function n(){return _(this,n),t.apply(this,arguments)}return T(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return By.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new _y(xy.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new _y(xy.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new _y(xy.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new _y(xy.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Vy),Ky=function(){function e(t){_(this,e),this.path=t}return T(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===zy.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(zy.fromString(t))}},{key:"fromName",value:function(t){return new e(zy.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(zy.emptyPath())}},{key:"comparator",value:function(e,t){return zy.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new zy(t.slice()))}}]),e}(),Gy=T((function e(t,n,r,i){_(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Hy(e){return e.fields.find((function(e){return 2===e.kind}))}function Wy(e){return e.fields.filter((function(e){return 2!==e.kind}))}Gy.UNKNOWN_ID=-1;var Qy=T((function e(t,n){_(this,e),this.fieldPath=t,this.kind=n}));var Yy=function(){function e(t,n){_(this,e),this.sequenceNumber=t,this.offset=n}return T(e,null,[{key:"empty",value:function(){return new e(0,Xy.min())}}]),e}();function $y(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Uy.fromTimestamp(1e9===r?new jy(n+1,0):new jy(n,r));return new Xy(i,Ky.empty(),t)}function Jy(e){return new Xy(e.readTime,e.key,-1)}var Xy=function(){function e(t,n,r){_(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return T(e,null,[{key:"min",value:function(){return new e(Uy.min(),Ky.empty(),-1)}},{key:"max",value:function(){return new e(Uy.max(),Ky.empty(),-1)}}]),e}();function Zy(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Ky.comparator(e.documentKey,t.documentKey))?n:Ly(e.largestBatchId,t.largestBatchId)}var eg="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",tg=function(){function e(){_(this,e),this.onCommittedListeners=[]}return T(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function ng(e){return rg.apply(this,arguments)}function rg(){return(rg=dt(ft().mark((function e(t){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===xy.FAILED_PRECONDITION&&t.message===eg){e.next=2;break}throw t;case 2:vy("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ig=function(){function e(t){var n=this;_(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return T(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&ky(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=F(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),ag=function(){function e(t,n){var r=this;_(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.v=new Ey,this.transaction.oncomplete=function(){r.v.resolve()},this.transaction.onabort=function(){n.error?r.v.reject(new sg(t,n.error)):r.v.resolve()},this.transaction.onerror=function(e){var n=dg(e.target.error);r.v.reject(new sg(t,n))}}return T(e,[{key:"R",get:function(){return this.v.promise}},{key:"abort",value:function(e){e&&this.v.reject(e),this.aborted||(vy("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"P",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new lg(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new sg(n,t)}}}]),e}(),og=function(){function e(t,n,r){_(this,e),this.name=t,this.version=n,this.V=r,12.2===e.S(mr())&&my("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return T(e,[{key:"$",value:function(){var e=dt(ft().mark((function e(t){var n=this;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return vy("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new sg(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new _y(xy.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new _y(xy.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new sg(t,n))},i.onupgradeneeded=function(e){vy("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.V.O(t,i.transaction,e.oldVersion,n.version).next((function(){vy("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.F&&(this.db.onversionchange=function(e){return n.F(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"B",value:function(e){this.F=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=dt(ft().mark((function e(t,n,r,i){var a,o,u,s,c=this;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,u=ft().mark((function e(){var n,u,s,l;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.$(t);case 4:return c.db=e.sent,n=ag.open(c.db,t,a?"readonly":"readwrite",r),u=i(n).next((function(e){return n.P(),e})).catch((function(e){return n.abort(e),ig.reject(e)})).toPromise(),u.catch((function(){})),e.next=9,n.R;case 9:return e.t0=u,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),s=e.t1,l="FirebaseError"!==s.name&&o<3,vy("SimpleDb","Transaction failed with error:",s.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(s)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(u(),"t0",4);case 4:if("object"!==typeof(s=e.t0)){e.next=7;break}return e.abrupt("return",s.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return vy("SimpleDb","Removing database:",e),fg(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"D",value:function(){if(!wr())return!1;if(e.C())return!0;var t=mr(),n=e.S(t),r=0<n&&n<10,i=e.N(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"C",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/amazon-clon-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.k)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"S",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"N",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),ug=function(){function e(t){_(this,e),this.L=t,this.q=!1,this.U=null}return T(e,[{key:"isDone",get:function(){return this.q}},{key:"K",get:function(){return this.U}},{key:"cursor",set:function(e){this.L=e}},{key:"done",value:function(){this.q=!0}},{key:"G",value:function(e){this.U=e}},{key:"delete",value:function(){return fg(this.L.delete())}}]),e}(),sg=function(e){N(n,e);var t=P(n);function n(e,r){var i;return _(this,n),(i=t.call(this,xy.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return T(n)}(_y);function cg(e){return"IndexedDbTransactionError"===e.name}var lg=function(){function e(t){_(this,e),this.store=t}return T(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(vy("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(vy("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),fg(n)}},{key:"add",value:function(e){return vy("SimpleDb","ADD",this.store.name,e,e),fg(this.store.add(e))}},{key:"get",value:function(e){var t=this;return fg(this.store.get(e)).next((function(n){return void 0===n&&(n=null),vy("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return vy("SimpleDb","DELETE",this.store.name,e),fg(this.store.delete(e))}},{key:"count",value:function(){return vy("SimpleDb","COUNT",this.store.name),fg(this.store.count())}},{key:"j",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.W(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new ig((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new ig((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){vy("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.W(r,(function(e,t,n){return n.delete()}))}},{key:"X",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.W(r,t)}},{key:"Z",value:function(e){var t=this.cursor({});return new ig((function(n,r){t.onerror=function(e){var t=dg(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"W",value:function(e,t){var n=[];return new ig((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new ug(i),o=t(i.primaryKey,i.value,a);if(o instanceof ig){var u=o.catch((function(e){return a.done(),ig.reject(e)}));n.push(u)}a.isDone?r():null===a.K?i.continue():i.continue(a.K)}else r()}})).next((function(){return ig.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function fg(e){return new ig((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=dg(e.target.error);n(t)}}))}var hg=!1;function dg(e){var t=og.S(mr());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new _y("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return hg||(hg=!0,setTimeout((function(){throw r}),0)),r}}return e}var pg=function(){function e(t,n){_(this,e),this.asyncQueue=t,this.tt=n,this.task=null}return T(e,[{key:"start",value:function(){this.et(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"et",value:function(e){var t=this;vy("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,dt(ft().mark((function e(){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=vy,e.t1="Documents written: ",e.next=6,t.tt.nt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!cg(e.t4)){e.next=17;break}vy("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,ng(e.t4);case 19:return e.next=21,t.et(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),vg=function(){function e(t,n){_(this,e),this.localStore=t,this.persistence=n}return T(e,[{key:"nt",value:function(){var e=dt(ft().mark((function e(){var t,n=this,r=arguments;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.st(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"st",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return ig.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return vy("IndexBackiller","Processing collection: ".concat(t)),n.it(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"it",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.rt(i,n)})).next((function(n){return vy("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"rt",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=Jy(t);Zy(r,n)>0&&(n=r)})),new Xy(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),mg=function(){function e(t,n){var r=this;_(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ot(e)},this.ut=function(e){return n.writeSequenceNumber(e)})}return T(e,[{key:"ot",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ut&&this.ut(e),e}}]),e}();function yg(e){return null==e}function gg(e){return 0===e&&1/e==-1/0}function kg(e){return"number"==typeof e&&Number.isInteger(e)&&!gg(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function bg(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=xg(t)),t=wg(e.get(n),t);return xg(t)}function wg(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function xg(e){return e+"\x01\x01"}function _g(e){var t=e.length;if(by(t>=2),2===t)return by("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),zy.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&ky(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:ky()}a=o+2}return new zy(r)}mg.ct=-1;var Eg=["userId","batchId"];function Ig(e,t){return[e,bg(t)]}function Sg(e,t,n){return[e,bg(t),n]}var Tg={},Cg=["prefixPath","collectionGroup","readTime","documentId"],Ng=["prefixPath","collectionGroup","documentId"],Ag=["collectionGroup","readTime","prefixPath","documentId"],Rg=["canonicalId","targetId"],Dg=["targetId","path"],Pg=["path","targetId"],Og=["collectionId","parent"],Lg=["indexId","uid"],Mg=["uid","sequenceNumber"],Fg=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],jg=["indexId","uid","orderedDocumentKey"],Ug=["userId","collectionPath","documentId"],Vg=["userId","collectionPath","largestBatchId"],zg=["userId","collectionGroup","largestBatchId"],Bg=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),qg=[].concat(x(Bg),["documentOverlays"]),Kg=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Gg=Kg,Hg=[].concat(Gg,["indexConfiguration","indexState","indexEntries"]),Wg=function(e){N(n,e);var t=P(n);function n(e,r){var i;return _(this,n),(i=t.call(this)).ht=e,i.currentSequenceNumber=r,i}return T(n)}(tg);function Qg(e,t){var n=wy(e);return og.M(n.ht,t)}function Yg(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function $g(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Jg(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Xg=function(){function e(t,n){_(this,e),this.comparator=t,this.root=n||ek.EMPTY}return T(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ek.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ek.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Zg(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Zg(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Zg(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Zg(this.root,e,this.comparator,!0)}}]),e}(),Zg=function(){function e(t,n,r,i){_(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return T(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),ek=function(){function e(t,n,r,i,a){_(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return T(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw ky();if(this.right.isRed())throw ky();var e=this.left.check();if(e!==this.right.check())throw ky();return e+(this.isRed()?0:1)}}]),e}();ek.EMPTY=null,ek.RED=!0,ek.BLACK=!1,ek.EMPTY=new(function(){function e(){_(this,e),this.size=0}return T(e,[{key:"key",get:function(){throw ky()}},{key:"value",get:function(){throw ky()}},{key:"color",get:function(){throw ky()}},{key:"left",get:function(){throw ky()}},{key:"right",get:function(){throw ky()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new ek(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var tk=function(){function e(t){_(this,e),this.comparator=t,this.data=new Xg(this.comparator)}return T(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new nk(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new nk(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),nk=function(){function e(t){_(this,e),this.iter=t}return T(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function rk(e){return e.hasNext()?e.getNext():void 0}var ik=function(){function e(t){_(this,e),this.fields=t,t.sort(qy.comparator)}return T(e,[{key:"unionWith",value:function(t){var n,r=new tk(qy.comparator),i=F(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=F(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=F(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return My(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),ak=function(e){N(n,e);var t=P(n);function n(){var e;return _(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return T(n)}(L(Error));var ok=function(e){function t(e){_(this,t),this.binaryString=e}return T(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Ly(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new ak("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();ok.EMPTY_BYTE_STRING=new ok("");var uk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sk(e){if(by(!!e),"string"==typeof e){var t=0,n=uk.exec(e);if(by(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:ck(e.seconds),nanos:ck(e.nanos)}}function ck(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function lk(e){return"string"==typeof e?ok.fromBase64String(e):ok.fromUint8Array(e)}function fk(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function hk(e){var t=e.mapValue.fields.__previous_value__;return fk(t)?hk(t):t}function dk(e){var t=sk(e.mapValue.fields.__local_write_time__.timestampValue);return new jy(t.seconds,t.nanos)}var pk=T((function e(t,n,r,i,a,o,u,s,c){_(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=s,this.useFetchStreams=c})),vk=function(){function e(t,n){_(this,e),this.projectId=t,this.database=n||"(default)"}return T(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),mk={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},yk={nullValue:"NULL_VALUE"};function gk(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?fk(e)?4:Dk(e)?9007199254740991:10:ky()}function kk(e,t){if(e===t)return!0;var n=gk(e);if(n!==gk(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return dk(e).isEqual(dk(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=sk(e.timestampValue),r=sk(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return lk(e.bytesValue).isEqual(lk(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ck(e.geoPointValue.latitude)===ck(t.geoPointValue.latitude)&&ck(e.geoPointValue.longitude)===ck(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ck(e.integerValue)===ck(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=ck(e.doubleValue),r=ck(t.doubleValue);return n===r?gg(n)===gg(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return My(e.arrayValue.values||[],t.arrayValue.values||[],kk);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Yg(n)!==Yg(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!kk(n[i],r[i])))return!1;return!0}(e,t);default:return ky()}}function bk(e,t){return void 0!==(e.values||[]).find((function(e){return kk(e,t)}))}function wk(e,t){if(e===t)return 0;var n=gk(e),r=gk(t);if(n!==r)return Ly(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ly(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=ck(e.integerValue||e.doubleValue),r=ck(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return xk(e.timestampValue,t.timestampValue);case 4:return xk(dk(e),dk(t));case 5:return Ly(e.stringValue,t.stringValue);case 6:return function(e,t){var n=lk(e),r=lk(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Ly(n[i],r[i]);if(0!==a)return a}return Ly(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Ly(ck(e.latitude),ck(t.latitude));return 0!==n?n:Ly(ck(e.longitude),ck(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=wk(n[i],r[i]);if(a)return a}return Ly(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===mk.mapValue&&t===mk.mapValue)return 0;if(e===mk.mapValue)return 1;if(t===mk.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Ly(r[o],a[o]);if(0!==u)return u;var s=wk(n[r[o]],i[a[o]]);if(0!==s)return s}return Ly(r.length,a.length)}(e.mapValue,t.mapValue);default:throw ky()}}function xk(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ly(e,t);var n=sk(e),r=sk(t),i=Ly(n.seconds,r.seconds);return 0!==i?i:Ly(n.nanos,r.nanos)}function _k(e){return Ek(e)}function Ek(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=sk(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?lk(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Ky.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=F(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Ek(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=F(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Ek(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):ky();var t,n}function Ik(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Sk(e){return!!e&&"integerValue"in e}function Tk(e){return!!e&&"arrayValue"in e}function Ck(e){return!!e&&"nullValue"in e}function Nk(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ak(e){return!!e&&"mapValue"in e}function Rk(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return $g(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Rk(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Rk(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Dk(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Pk(e){return"nullValue"in e?yk:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Ik(vk.empty(),Ky.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:ky()}function Ok(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Ik(vk.empty(),Ky.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?mk:ky()}function Lk(e,t){var n=wk(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Mk(e,t){var n=wk(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Fk=function(){function e(t){_(this,e),this.value=t}return T(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Ak(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Rk(t)}},{key:"setAll",value:function(e){var t=this,n=qy.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Rk(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Ak(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return kk(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Ak(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){$g(t,(function(t,n){return e[t]=n}));var r,i=F(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Rk(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function jk(e){var t=[];return $g(e.fields,(function(e,n){var r=new qy([e]);if(Ak(n)){var i=jk(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=F(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new ik(t)}var Uk=function(){function e(t,n,r,i,a,o,u){_(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return T(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(Uy.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Fk.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Fk.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Uy.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Uy.min(),Uy.min(),Uy.min(),Fk.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,Uy.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Uy.min(),Uy.min(),Fk.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Uy.min(),Uy.min(),Fk.empty(),2)}}]),e}(),Vk=T((function e(t,n){_(this,e),this.position=t,this.inclusive=n}));function zk(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Ky.comparator(Ky.fromName(o.referenceValue),n.key):wk(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Bk(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!kk(e.position[n],t.position[n]))return!1;return!0}var qk=T((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";_(this,e),this.field=t,this.dir=n}));function Kk(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Gk=T((function e(){_(this,e)})),Hk=function(e){N(n,e);var t=P(n);function n(e,r,i){var a;return _(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return T(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(wk(t,this.value)):null!==t&&gk(this.value)===gk(t)&&this.matchesComparison(wk(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ky()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new nb(e,t,r):"array-contains"===t?new ob(e,r):"in"===t?new ub(e,r):"not-in"===t?new sb(e,r):"array-contains-any"===t?new cb(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new rb(e,n):new ib(e,n)}}]),n}(Gk),Wk=function(e){N(n,e);var t=P(n);function n(e,r){var i;return _(this,n),(i=t.call(this)).filters=e,i.op=r,i.lt=null,i}return T(n,[{key:"matches",value:function(e){return Qk(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.lt||(this.lt=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.lt}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.ft((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"ft",value:function(e){var t,n=F(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(Gk);function Qk(e){return"and"===e.op}function Yk(e){return"or"===e.op}function $k(e){return Jk(e)&&Qk(e)}function Jk(e){var t,n=F(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof Wk)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function Xk(e){if(e instanceof Hk)return e.field.canonicalString()+e.op.toString()+_k(e.value);if($k(e))return e.filters.map((function(e){return Xk(e)})).join(",");var t=e.filters.map((function(e){return Xk(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function Zk(e,t){return e instanceof Hk?function(e,t){return t instanceof Hk&&e.op===t.op&&e.field.isEqual(t.field)&&kk(e.value,t.value)}(e,t):e instanceof Wk?function(e,t){return t instanceof Wk&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&Zk(n,t.filters[r])}),!0)}(e,t):void ky()}function eb(e,t){var n=e.filters.concat(t);return Wk.create(n,e.op)}function tb(e){return e instanceof Hk?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(_k(e.value))}(e):e instanceof Wk?function(e){return e.op.toString()+" {"+e.getFilters().map(tb).join(" ,")+"}"}(e):"Filter"}var nb=function(e){N(n,e);var t=P(n);function n(e,r,i){var a;return _(this,n),(a=t.call(this,e,r,i)).key=Ky.fromName(i.referenceValue),a}return T(n,[{key:"matches",value:function(e){var t=Ky.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(Hk),rb=function(e){N(n,e);var t=P(n);function n(e,r){var i;return _(this,n),(i=t.call(this,e,"in",r)).keys=ab("in",r),i}return T(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Hk),ib=function(e){N(n,e);var t=P(n);function n(e,r){var i;return _(this,n),(i=t.call(this,e,"not-in",r)).keys=ab("not-in",r),i}return T(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Hk);function ab(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Ky.fromName(e.referenceValue)}))}var ob=function(e){N(n,e);var t=P(n);function n(e,r){return _(this,n),t.call(this,e,"array-contains",r)}return T(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Tk(t)&&bk(t.arrayValue,this.value)}}]),n}(Hk),ub=function(e){N(n,e);var t=P(n);function n(e,r){return _(this,n),t.call(this,e,"in",r)}return T(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&bk(this.value.arrayValue,t)}}]),n}(Hk),sb=function(e){N(n,e);var t=P(n);function n(e,r){return _(this,n),t.call(this,e,"not-in",r)}return T(n,[{key:"matches",value:function(e){if(bk(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!bk(this.value.arrayValue,t)}}]),n}(Hk),cb=function(e){N(n,e);var t=P(n);function n(e,r){return _(this,n),t.call(this,e,"array-contains-any",r)}return T(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Tk(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return bk(t.value.arrayValue,e)}))}}]),n}(Hk),lb=T((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;_(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.dt=null}));function fb(e){return new lb(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function hb(e){var t=wy(e);if(null===t.dt){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return Xk(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),yg(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return _k(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return _k(e)})).join(",")),t.dt=n}return t.dt}function db(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Kk(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!Zk(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Bk(e.startAt,t.startAt)&&Bk(e.endAt,t.endAt)}function pb(e){return Ky.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function vb(e,t){return e.filters.filter((function(e){return e instanceof Hk&&e.field.isEqual(t)}))}function mb(e,t,n){var r,i=yk,a=!0,o=F(vb(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=yk,c=!0;switch(u.op){case"<":case"<=":s=Pk(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=yk}Lk({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Lk({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function yb(e,t,n){var r,i=mk,a=!0,o=F(vb(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=mk,c=!0;switch(u.op){case">=":case">":s=Ok(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=mk}Mk({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Mk({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var gb=T((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;_(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.wt=null,this._t=null,this.startAt,this.endAt}));function kb(e,t,n,r,i,a,o,u){return new gb(e,t,n,r,i,a,o,u)}function bb(e){return new gb(e)}function wb(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function xb(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function _b(e){var t,n=F(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function Eb(e){return null!==e.collectionGroup}function Ib(e){var t=wy(e);if(null===t.wt){t.wt=[];var n=_b(t),r=xb(t);if(null!==n&&null===r)n.isKeyField()||t.wt.push(new qk(n)),t.wt.push(new qk(qy.keyField(),"asc"));else{var i,a=!1,o=F(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.wt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new qk(qy.keyField(),s))}}}return t.wt}function Sb(e){var t=wy(e);if(!t._t)if("F"===t.limitType)t._t=fb(t.path,t.collectionGroup,Ib(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=F(Ib(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new qk(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new Vk(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Vk(t.startAt.position,t.startAt.inclusive):null;t._t=fb(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t._t}function Tb(e,t){t.getFirstInequalityField(),_b(e);var n=e.filters.concat([t]);return new gb(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Cb(e,t,n){return new gb(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Nb(e,t){return db(Sb(e),Sb(t))&&e.limitType===t.limitType}function Ab(e){return"".concat(hb(Sb(e)),"|lt:").concat(e.limitType)}function Rb(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return tb(e)})).join(", "),"]")),yg(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return _k(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return _k(e)})).join(",")),"Target(".concat(t,")")}(Sb(e)),"; limitType=").concat(e.limitType,")")}function Db(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ky.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=F(Ib(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=F(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=zk(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Ib(e),t))&&!(e.endAt&&!function(e,t,n){var r=zk(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Ib(e),t))}(e,t)}function Pb(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Ob(e){return function(t,n){var r,i=!1,a=F(Ib(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Lb(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Lb(e,t,n){var r=e.field.isKeyField()?Ky.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?wk(r,i):ky()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ky()}}var Mb=function(){function e(t,n){_(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return T(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=F(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){$g(this.inner,(function(t,n){var r,i=F(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Jg(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Fb=new Xg(Ky.comparator);function jb(){return Fb}var Ub=new Xg(Ky.comparator);function Vb(){for(var e=Ub,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function zb(e){var t=Ub;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Bb(){return Kb()}function qb(){return Kb()}function Kb(){return new Mb((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Gb=new Xg(Ky.comparator),Hb=new tk(Ky.comparator);function Wb(){for(var e=Hb,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Qb=new tk(Ly);function Yb(){return Qb}function $b(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gg(t)?"-0":t}}function Jb(e){return{integerValue:""+e}}function Xb(e,t){return kg(t)?Jb(t):$b(e,t)}var Zb=T((function e(){_(this,e),this._=void 0}));function ew(e,t,n){return e instanceof rw?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&fk(t)&&(t=hk(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof iw?aw(e,t):e instanceof ow?uw(e,t):function(e,t){var n=nw(e,t),r=cw(n)+cw(e.gt);return Sk(n)&&Sk(e.gt)?Jb(r):$b(e.serializer,r)}(e,t)}function tw(e,t,n){return e instanceof iw?aw(e,t):e instanceof ow?uw(e,t):n}function nw(e,t){return e instanceof sw?Sk(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var rw=function(e){N(n,e);var t=P(n);function n(){return _(this,n),t.apply(this,arguments)}return T(n)}(Zb),iw=function(e){N(n,e);var t=P(n);function n(e){var r;return _(this,n),(r=t.call(this)).elements=e,r}return T(n)}(Zb);function aw(e,t){var n,r=lw(t),i=F(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return kk(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var ow=function(e){N(n,e);var t=P(n);function n(e){var r;return _(this,n),(r=t.call(this)).elements=e,r}return T(n)}(Zb);function uw(e,t){var n,r=lw(t),i=F(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!kk(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var sw=function(e){N(n,e);var t=P(n);function n(e,r){var i;return _(this,n),(i=t.call(this)).serializer=e,i.gt=r,i}return T(n)}(Zb);function cw(e){return ck(e.integerValue||e.doubleValue)}function lw(e){return Tk(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var fw=T((function e(t,n){_(this,e),this.field=t,this.transform=n}));var hw=T((function e(t,n){_(this,e),this.version=t,this.transformResults=n})),dw=function(){function e(t,n){_(this,e),this.updateTime=t,this.exists=n}return T(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function pw(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var vw=T((function e(){_(this,e)}));function mw(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Cw(e.key,dw.none()):new ww(e.key,e.data,dw.none());var n,r=e.data,i=Fk.empty(),a=new tk(qy.comparator),o=F(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new xw(e.key,i,new ik(a.toArray()),dw.none())}function yw(e,t,n){e instanceof ww?function(e,t,n){var r=e.value.clone(),i=Ew(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof xw?function(e,t,n){if(pw(e.precondition,t)){var r=Ew(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(_w(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function gw(e,t,n,r){return e instanceof ww?function(e,t,n,r){if(!pw(e.precondition,t))return n;var i=e.value.clone(),a=Iw(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof xw?function(e,t,n,r){if(!pw(e.precondition,t))return n;var i=Iw(e.fieldTransforms,r,t),a=t.data;return a.setAll(_w(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return pw(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function kw(e,t){var n,r=null,i=F(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=nw(a.transform,o||null);null!=u&&(null===r&&(r=Fk.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function bw(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&My(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof iw&&t instanceof iw||e instanceof ow&&t instanceof ow?My(e.elements,t.elements,kk):e instanceof sw&&t instanceof sw?kk(e.gt,t.gt):e instanceof rw&&t instanceof rw}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var ww=function(e){N(n,e);var t=P(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return _(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return T(n,[{key:"getFieldMask",value:function(){return null}}]),n}(vw),xw=function(e){N(n,e);var t=P(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return _(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return T(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(vw);function _w(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Ew(e,t,n){var r=new Map;by(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,tw(o,u,n[i]))}return r}function Iw(e,t,n){var r,i=new Map,a=F(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,ew(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Sw,Tw,Cw=function(e){N(n,e);var t=P(n);function n(e,r){var i;return _(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return T(n,[{key:"getFieldMask",value:function(){return null}}]),n}(vw),Nw=function(e){N(n,e);var t=P(n);function n(e,r){var i;return _(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return T(n,[{key:"getFieldMask",value:function(){return null}}]),n}(vw),Aw=function(){function e(t,n,r,i){_(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return T(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&yw(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=F(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=gw(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=F(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=gw(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=qb();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=mw(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(Uy.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Wb())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&My(this.mutations,e.mutations,(function(e,t){return bw(e,t)}))&&My(this.baseMutations,e.baseMutations,(function(e,t){return bw(e,t)}))}}]),e}(),Rw=function(){function e(t,n,r,i){_(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return T(e,null,[{key:"from",value:function(t,n,r){by(t.mutations.length===r.length);for(var i=Gb,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Dw=function(){function e(t,n){_(this,e),this.largestBatchId=t,this.mutation=n}return T(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Pw=T((function e(t,n){_(this,e),this.count=t,this.unchangedNames=n}));function Ow(e){switch(e){default:return ky();case xy.CANCELLED:case xy.UNKNOWN:case xy.DEADLINE_EXCEEDED:case xy.RESOURCE_EXHAUSTED:case xy.INTERNAL:case xy.UNAVAILABLE:case xy.UNAUTHENTICATED:return!1;case xy.INVALID_ARGUMENT:case xy.NOT_FOUND:case xy.ALREADY_EXISTS:case xy.PERMISSION_DENIED:case xy.FAILED_PRECONDITION:case xy.ABORTED:case xy.OUT_OF_RANGE:case xy.UNIMPLEMENTED:case xy.DATA_LOSS:return!0}}function Lw(e){if(void 0===e)return my("GRPC error has no .code"),xy.UNKNOWN;switch(e){case Sw.OK:return xy.OK;case Sw.CANCELLED:return xy.CANCELLED;case Sw.UNKNOWN:return xy.UNKNOWN;case Sw.DEADLINE_EXCEEDED:return xy.DEADLINE_EXCEEDED;case Sw.RESOURCE_EXHAUSTED:return xy.RESOURCE_EXHAUSTED;case Sw.INTERNAL:return xy.INTERNAL;case Sw.UNAVAILABLE:return xy.UNAVAILABLE;case Sw.UNAUTHENTICATED:return xy.UNAUTHENTICATED;case Sw.INVALID_ARGUMENT:return xy.INVALID_ARGUMENT;case Sw.NOT_FOUND:return xy.NOT_FOUND;case Sw.ALREADY_EXISTS:return xy.ALREADY_EXISTS;case Sw.PERMISSION_DENIED:return xy.PERMISSION_DENIED;case Sw.FAILED_PRECONDITION:return xy.FAILED_PRECONDITION;case Sw.ABORTED:return xy.ABORTED;case Sw.OUT_OF_RANGE:return xy.OUT_OF_RANGE;case Sw.UNIMPLEMENTED:return xy.UNIMPLEMENTED;case Sw.DATA_LOSS:return xy.DATA_LOSS;default:return ky()}}(Tw=Sw||(Sw={}))[Tw.OK=0]="OK",Tw[Tw.CANCELLED=1]="CANCELLED",Tw[Tw.UNKNOWN=2]="UNKNOWN",Tw[Tw.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tw[Tw.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tw[Tw.NOT_FOUND=5]="NOT_FOUND",Tw[Tw.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tw[Tw.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tw[Tw.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tw[Tw.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tw[Tw.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tw[Tw.ABORTED=10]="ABORTED",Tw[Tw.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tw[Tw.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tw[Tw.INTERNAL=13]="INTERNAL",Tw[Tw.UNAVAILABLE=14]="UNAVAILABLE",Tw[Tw.DATA_LOSS=15]="DATA_LOSS";var Mw=function(){function e(){_(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return T(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return Fw}},{key:"getOrCreateInstance",value:function(){return null===Fw&&(Fw=new e),Fw}}]),e}(),Fw=null;function jw(){return new TextEncoder}var Uw=new cy([4294967295,4294967295],0);function Vw(e){var t=jw().encode(e),n=new sy;return n.update(t),new Uint8Array(n.digest())}function zw(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new cy([n,r],0),new cy([i,a],0)]}var Bw=function(){function e(t,n,r){if(_(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new qw("Invalid padding: ".concat(n));if(r<0)throw new qw("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new qw("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new qw("Invalid padding when bitmap length is 0: ".concat(n));this.It=8*t.length-n,this.Tt=cy.fromNumber(this.It)}return T(e,[{key:"Et",value:function(e,t,n){var r=e.add(t.multiply(cy.fromNumber(n)));return 1===r.compare(Uw)&&(r=new cy([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}},{key:"At",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"vt",value:function(e){if(0===this.It)return!1;for(var t=c(zw(Vw(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Et(n,r,i);if(!this.At(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.It)for(var t=c(zw(Vw(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Et(n,r,i);this.Rt(a)}}},{key:"Rt",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),qw=function(e){N(n,e);var t=P(n);function n(){var e;return _(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return T(n)}(L(Error)),Kw=function(){function e(t,n,r,i,a){_(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return T(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,Gw.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(Uy.min(),i,new Xg(Ly),jb(),Wb())}}]),e}(),Gw=function(){function e(t,n,r,i,a){_(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return T(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,Wb(),Wb(),Wb())}}]),e}(),Hw=T((function e(t,n,r,i){_(this,e),this.Pt=t,this.removedTargetIds=n,this.key=r,this.bt=i})),Ww=T((function e(t,n){_(this,e),this.targetId=t,this.Vt=n})),Qw=T((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ok.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;_(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Yw=function(){function e(){_(this,e),this.St=0,this.Dt=Xw(),this.Ct=ok.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}return T(e,[{key:"current",get:function(){return this.xt}},{key:"resumeToken",get:function(){return this.Ct}},{key:"kt",get:function(){return 0!==this.St}},{key:"Mt",get:function(){return this.Nt}},{key:"$t",value:function(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}},{key:"Ot",value:function(){var e=Wb(),t=Wb(),n=Wb();return this.Dt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:ky()}})),new Gw(this.Ct,this.xt,e,t,n)}},{key:"Ft",value:function(){this.Nt=!1,this.Dt=Xw()}},{key:"Bt",value:function(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}},{key:"Lt",value:function(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}},{key:"qt",value:function(){this.St+=1}},{key:"Ut",value:function(){this.St-=1}},{key:"Kt",value:function(){this.Nt=!0,this.xt=!0}}]),e}(),$w=function(){function e(t){_(this,e),this.Gt=t,this.Qt=new Map,this.jt=jb(),this.zt=Jw(),this.Wt=new Xg(Ly)}return T(e,[{key:"Ht",value:function(e){var t,n=F(e.Pt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.bt&&e.bt.isFoundDocument()?this.Jt(r,e.bt):this.Yt(r,e.key,e.bt)}}catch(u){n.e(u)}finally{n.f()}var i,a=F(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Yt(o,e.key,e.bt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Xt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Zt(n);switch(e.state){case 0:t.te(n)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||t.removeTarget(n);break;case 3:t.te(n)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:t.te(n)&&(t.ee(n),r.$t(e.resumeToken));break;default:ky()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((function(e,r){n.te(r)&&t(r)}))}},{key:"ne",value:function(e){var t,n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){var a=i.target;if(pb(a))if(0===r){var o=new Ky(a.path);this.Yt(n,o,Uk.newNoDocument(o,Uy.min()))}else by(1===r);else{var u=this.ie(n);if(u!==r){var s=this.re(e,u);if(0!==s){this.ee(n);var c=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,c)}null===(t=Mw.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,a,o,u,s,c={localCacheCount:t,existenceFilterCount:n.count},l=n.unchangedNames;return l&&(c.bloomFilter={applied:0===e,hashCount:null!==(r=null==l?void 0:l.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(o=null===(a=null===(i=null==l?void 0:l.bits)||void 0===i?void 0:i.bitmap)||void 0===a?void 0:a.length)&&void 0!==o?o:0,padding:null!==(s=null===(u=null==l?void 0:l.bits)||void 0===u?void 0:u.padding)&&void 0!==s?s:0}),c}(s,u,e.Vt))}}}}},{key:"re",value:function(e,t){var n=e.Vt,r=n.unchangedNames,i=n.count;if(!r||!r.bits)return 1;var a,o,u=r.bits,s=u.bitmap,c=void 0===s?"":s,l=u.padding,f=void 0===l?0:l,h=r.hashCount,d=void 0===h?0:h;try{a=lk(c).toUint8Array()}catch(e){if(e instanceof ak)return yy("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{o=new Bw(a,f,d)}catch(e){return yy(e instanceof qw?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===o.It?1:i!==t-this.oe(e.targetId,o)?2:0}},{key:"oe",value:function(e,t){var n=this,r=this.Gt.getRemoteKeysForTarget(e),i=0;return r.forEach((function(r){var a=n.Gt.ue(),o="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(r.path.canonicalString());t.vt(o)||(n.Yt(e,r,null),i++)})),i}},{key:"ce",value:function(e){var t=this,n=new Map;this.Qt.forEach((function(r,i){var a=t.se(i);if(a){if(r.current&&pb(a.target)){var o=new Ky(a.target.path);null!==t.jt.get(o)||t.ae(i,o)||t.Yt(i,o,Uk.newNoDocument(o,e))}r.Mt&&(n.set(i,r.Ot()),r.Ft())}}));var r=Wb();this.zt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.se(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.jt.forEach((function(t,n){return n.setReadTime(e)}));var i=new Kw(e,n,this.Wt,this.jt,r);return this.jt=jb(),this.zt=Jw(),this.Wt=new Xg(Ly),i}},{key:"Jt",value:function(e,t){if(this.te(e)){var n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}}},{key:"Yt",value:function(e,t,n){if(this.te(e)){var r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Qt.delete(e)}},{key:"ie",value:function(e){var t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"qt",value:function(e){this.Zt(e).qt()}},{key:"Zt",value:function(e){var t=this.Qt.get(e);return t||(t=new Yw,this.Qt.set(e,t)),t}},{key:"he",value:function(e){var t=this.zt.get(e);return t||(t=new tk(Ly),this.zt=this.zt.insert(e,t)),t}},{key:"te",value:function(e){var t=null!==this.se(e);return t||vy("WatchChangeAggregator","Detected inactive target",e),t}},{key:"se",value:function(e){var t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}},{key:"ee",value:function(e){var t=this;this.Qt.set(e,new Yw),this.Gt.getRemoteKeysForTarget(e).forEach((function(n){t.Yt(e,n,null)}))}},{key:"ae",value:function(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}]),e}();function Jw(){return new Xg(Ky.comparator)}function Xw(){return new Xg(Ky.comparator)}var Zw={asc:"ASCENDING",desc:"DESCENDING"},ex={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tx={and:"AND",or:"OR"},nx=T((function e(t,n){_(this,e),this.databaseId=t,this.useProto3Json=n}));function rx(e,t){return e.useProto3Json||yg(t)?t:{value:t}}function ix(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function ax(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function ox(e,t){return ix(e,t.toTimestamp())}function ux(e){return by(!!e),Uy.fromTimestamp(function(e){var t=sk(e);return new jy(t.seconds,t.nanos)}(e))}function sx(e,t){return function(e){return new zy(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function cx(e){var t=zy.fromString(e);return by(Dx(t)),t}function lx(e,t){return sx(e.databaseId,t.path)}function fx(e,t){var n=cx(t);if(n.get(1)!==e.databaseId.projectId)throw new _y(xy.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new _y(xy.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ky(vx(n))}function hx(e,t){return sx(e.databaseId,t)}function dx(e){var t=cx(e);return 4===t.length?zy.emptyPath():vx(t)}function px(e){return new zy(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function vx(e){return by(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function mx(e,t,n){return{name:lx(e,t),fields:n.value.mapValue.fields}}function yx(e,t,n){var r=fx(e,t.name),i=ux(t.updateTime),a=t.createTime?ux(t.createTime):Uy.min(),o=new Fk({mapValue:{fields:t.fields}}),u=Uk.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function gx(e,t){return"found"in t?function(e,t){by(!!t.found),t.found.name,t.found.updateTime;var n=fx(e,t.found.name),r=ux(t.found.updateTime),i=t.found.createTime?ux(t.found.createTime):Uy.min(),a=new Fk({mapValue:{fields:t.found.fields}});return Uk.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){by(!!t.missing),by(!!t.readTime);var n=fx(e,t.missing),r=ux(t.readTime);return Uk.newNoDocument(n,r)}(e,t):ky()}function kx(e,t){var n;if(t instanceof ww)n={update:mx(e,t.key,t.value)};else if(t instanceof Cw)n={delete:lx(e,t.key)};else if(t instanceof xw)n={update:mx(e,t.key,t.data),updateMask:Rx(t.fieldMask)};else{if(!(t instanceof Nw))return ky();n={verify:lx(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof rw)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof iw)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ow)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof sw)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw ky()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:ox(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:ky()}(e,t.precondition)),n}function bx(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?dw.updateTime(ux(e.updateTime)):void 0!==e.exists?dw.exists(e.exists):dw.none()}(t.currentDocument):dw.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)by("REQUEST_TIME"===t.setToServerValue),n=new rw;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new iw(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new ow(i)}else"increment"in t?n=new sw(e,t.increment):ky();var a=qy.fromServerFormat(t.fieldPath);return new fw(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=fx(e,t.update.name),a=new Fk({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new ik(t.map((function(e){return qy.fromServerFormat(e)})))}(t.updateMask);return new xw(i,a,o,n,r)}return new ww(i,a,n,r)}if(t.delete){var u=fx(e,t.delete);return new Cw(u,n)}if(t.verify){var s=fx(e,t.verify);return new Nw(s,n)}return ky()}function wx(e,t){return{documents:[hx(e,t.path)]}}function xx(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=hx(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=hx(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return Ax(Wk.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Cx(e.field),direction:Ix(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=rx(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function _x(e){var t=dx(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){by(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=Ex(e);return t instanceof Wk&&$k(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new qk(Nx(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return yg(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Vk(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Vk(n,t)}(n.endAt)),kb(t,i,u,o,s,"F",c,l)}function Ex(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Nx(e.unaryFilter.field);return Hk.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Nx(e.unaryFilter.field);return Hk.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Nx(e.unaryFilter.field);return Hk.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Nx(e.unaryFilter.field);return Hk.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ky()}}(e):void 0!==e.fieldFilter?function(e){return Hk.create(Nx(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ky()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Wk.create(e.compositeFilter.filters.map((function(e){return Ex(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return ky()}}(e.compositeFilter.op))}(e):ky()}function Ix(e){return Zw[e]}function Sx(e){return ex[e]}function Tx(e){return tx[e]}function Cx(e){return{fieldPath:e.canonicalString()}}function Nx(e){return qy.fromServerFormat(e.fieldPath)}function Ax(e){return e instanceof Hk?function(e){if("=="===e.op){if(Nk(e.value))return{unaryFilter:{field:Cx(e.field),op:"IS_NAN"}};if(Ck(e.value))return{unaryFilter:{field:Cx(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Nk(e.value))return{unaryFilter:{field:Cx(e.field),op:"IS_NOT_NAN"}};if(Ck(e.value))return{unaryFilter:{field:Cx(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cx(e.field),op:Sx(e.op),value:e.value}}}(e):e instanceof Wk?function(e){var t=e.getFilters().map((function(e){return Ax(e)}));return 1===t.length?t[0]:{compositeFilter:{op:Tx(e.op),filters:t}}}(e):ky()}function Rx(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Dx(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var Px=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Uy.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Uy.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ok.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;_(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=s}return T(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),Ox=T((function e(t){_(this,e),this.fe=t}));function Lx(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Mx(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:lx(e,t.key),fields:t.data.value.mapValue.fields,updateTime:ix(e,t.version.toTimestamp()),createTime:ix(e,t.createTime.toTimestamp())}}(e.fe,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Fx(t.version)};else{if(!t.isUnknownDocument())return ky();r.unknownDocument={path:n.path.toArray(),version:Fx(t.version)}}return r}function Mx(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Fx(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function jx(e){var t=new jy(e.seconds,e.nanoseconds);return Uy.fromTimestamp(t)}function Ux(e,t){for(var n=(t.baseMutations||[]).map((function(t){return bx(e.fe,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return bx(e.fe,t)})),u=jy.fromMillis(t.localWriteTimeMs);return new Aw(t.batchId,u,n,o)}function Vx(e){var t,n,r=jx(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?jx(e.lastLimboFreeSnapshotVersion):Uy.min();return void 0!==e.query.documents?(by(1===(n=e.query).documents.length),t=Sb(bb(dx(n.documents[0])))):t=function(e){return Sb(_x(e))}(e.query),new Px(t,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,r,i,ok.fromBase64String(e.resumeToken))}function zx(e,t){var n,r=Fx(t.snapshotVersion),i=Fx(t.lastLimboFreeSnapshotVersion);n=pb(t.target)?wx(e.fe,t.target):xx(e.fe,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:hb(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Bx(e){var t=_x({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Cb(t,t.limit,"L"):t}function qx(e,t){return new Dw(t.largestBatchId,bx(e.fe,t.overlayMutation))}function Kx(e,t){var n=t.path.lastSegment();return[e,bg(t.path.popLast()),n]}function Gx(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Fx(r.readTime),documentKey:bg(r.documentKey.path),largestBatchId:r.largestBatchId}}var Hx=function(){function e(){_(this,e)}return T(e,[{key:"getBundleMetadata",value:function(e,t){return Wx(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:jx(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return Wx(e).put({bundleId:(n=t).id,createTime:Fx(ux(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Qx(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Bx(t.bundledQuery),readTime:jx(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return Qx(e).put(function(e){return{name:e.name,readTime:Fx(ux(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Wx(e){return Qg(e,"bundles")}function Qx(e){return Qg(e,"namedQueries")}var Yx=function(){function e(t,n){_(this,e),this.serializer=t,this.userId=n}return T(e,[{key:"getOverlay",value:function(e,t){var n=this;return $x(e).get(Kx(this.userId,t)).next((function(e){return e?qx(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=Bb();return ig.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Dw(t,a);i.push(r.we(e,o))})),ig.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(bg(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push($x(e).J("collectionPathOverlayIndex",i))})),ig.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Bb(),a=bg(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return $x(e).j("collectionPathOverlayIndex",o).next((function(e){var t,n=F(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=qx(r.serializer,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Bb(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return $x(e).X({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=qx(a.serializer,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"we",value:function(e,t){return $x(e).put(function(e,t,n){var r=c(Kx(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:kx(e.fe,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"de",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function $x(e){return Qg(e,"documentOverlays")}var Jx=function(){function e(){_(this,e)}return T(e,[{key:"_e",value:function(e,t){this.me(e,t),t.ge()}},{key:"me",value:function(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(ck(e.integerValue));else if("doubleValue"in e){var n=ck(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),gg(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie("".concat(r.seconds||"")),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(lk(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ye(t,45),t.pe(i.latitude||0),t.pe(i.longitude||0)}else"mapValue"in e?Dk(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):ky()}},{key:"Te",value:function(e,t){this.ye(t,25),this.be(e,t)}},{key:"be",value:function(e,t){t.Ie(e)}},{key:"Re",value:function(e,t){var n=e.fields||{};this.ye(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.Te(a,t),this.me(n[a],t)}}},{key:"Pe",value:function(e,t){var n=e.values||[];this.ye(t,50);var r,i=F(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.me(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ve",value:function(e,t){var n=this;this.ye(t,37),Ky.fromName(e).path.forEach((function(e){n.ye(t,60),n.be(e,t)}))}},{key:"ye",value:function(e,t){e.pe(t)}},{key:"Ee",value:function(e){e.pe(2)}}]),e}();function Xx(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Zx(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=Xx(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Jx.Ve=new Jx;var e_=function(){function e(){_(this,e),this.buffer=new Uint8Array(1024),this.position=0}return T(e,[{key:"Se",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.De(n.value),n=t.next();this.Ce()}},{key:"xe",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ne(n.value),n=t.next();this.ke()}},{key:"Me",value:function(e){var t,n=F(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.De(i);else if(i<2048)this.De(960|i>>>6),this.De(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.De(480|i>>>12),this.De(128|63&i>>>6),this.De(128|63&i);else{var a=r.codePointAt(0);this.De(240|a>>>18),this.De(128|63&a>>>12),this.De(128|63&a>>>6),this.De(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ce()}},{key:"$e",value:function(e){var t,n=F(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ne(i);else if(i<2048)this.Ne(960|i>>>6),this.Ne(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ne(480|i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i);else{var a=r.codePointAt(0);this.Ne(240|a>>>18),this.Ne(128|63&a>>>12),this.Ne(128|63&a>>>6),this.Ne(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ke()}},{key:"Oe",value:function(e){var t=this.Fe(e),n=Zx(t);this.Be(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Le",value:function(e){var t=this.Fe(e),n=Zx(t);this.Be(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"qe",value:function(){this.Ue(255),this.Ue(255)}},{key:"Ke",value:function(){this.Ge(255),this.Ge(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Qe",value:function(){return this.buffer.slice(0,this.position)}},{key:"Fe",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"De",value:function(e){var t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}},{key:"Ne",value:function(e){var t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}},{key:"Ce",value:function(){this.Ue(0),this.Ue(1)}},{key:"ke",value:function(){this.Ge(0),this.Ge(1)}},{key:"Ue",value:function(e){this.Be(1),this.buffer[this.position++]=e}},{key:"Ge",value:function(e){this.Be(1),this.buffer[this.position++]=~e}},{key:"Be",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),t_=function(){function e(t){_(this,e),this.je=t}return T(e,[{key:"Ae",value:function(e){this.je.Se(e)}},{key:"Ie",value:function(e){this.je.Me(e)}},{key:"pe",value:function(e){this.je.Oe(e)}},{key:"ge",value:function(){this.je.qe()}}]),e}(),n_=function(){function e(t){_(this,e),this.je=t}return T(e,[{key:"Ae",value:function(e){this.je.xe(e)}},{key:"Ie",value:function(e){this.je.$e(e)}},{key:"pe",value:function(e){this.je.Le(e)}},{key:"ge",value:function(){this.je.Ke()}}]),e}(),r_=function(){function e(){_(this,e),this.je=new e_,this.ze=new t_(this.je),this.We=new n_(this.je)}return T(e,[{key:"seed",value:function(e){this.je.seed(e)}},{key:"He",value:function(e){return 0===e?this.ze:this.We}},{key:"Qe",value:function(){return this.je.Qe()}},{key:"reset",value:function(){this.je.reset()}}]),e}(),i_=function(){function e(t,n,r,i){_(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return T(e,[{key:"Je",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function a_(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=o_(e.arrayValue,t.arrayValue))?n:0!==(n=o_(e.directionalValue,t.directionalValue))?n:Ky.comparator(e.documentKey,t.documentKey)}function o_(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var u_=function(){function e(t){_(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ye=t.orderBy,this.Xe=[];var n,r=F(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Ze=i:this.Xe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return T(e,[{key:"tn",value:function(e){by(e.collectionGroup===this.collectionId);var t=Hy(e);if(void 0!==t&&!this.en(t))return!1;for(var n=Wy(e),r=new Set,i=0,a=0;i<n.length&&this.en(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(void 0!==this.Ze){if(!r.has(this.Ze.field.canonicalString())){var o=n[i];if(!this.nn(this.Ze,o)||!this.sn(this.Ye[a++],o))return!1}++i}for(;i<n.length;++i){var u=n[i];if(a>=this.Ye.length||!this.sn(this.Ye[a++],u))return!1}return!0}},{key:"en",value:function(e){var t,n=F(this.Xe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.nn(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"nn",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"sn",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function s_(e){var t,n;if(by(e instanceof Hk||e instanceof Wk),e instanceof Hk){if(e instanceof ub){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return Hk.create(e.field,"==",t)})))||[];return Wk.create(r,"or")}return e}var i=e.filters.map((function(e){return s_(e)}));return Wk.create(i,e.op)}function c_(e){if(0===e.getFilters().length)return[];var t=d_(s_(e));return by(h_(t)),l_(t)||f_(t)?[t]:t.getFilters()}function l_(e){return e instanceof Hk}function f_(e){return e instanceof Wk&&$k(e)}function h_(e){return l_(e)||f_(e)||function(e){if(e instanceof Wk&&Yk(e)){var t,n=F(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!l_(r)&&!f_(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function d_(e){if(by(e instanceof Hk||e instanceof Wk),e instanceof Hk)return e;if(1===e.filters.length)return d_(e.filters[0]);var t=e.filters.map((function(e){return d_(e)})),n=Wk.create(t,e.op);return h_(n=m_(n))?n:(by(n instanceof Wk),by(Qk(n)),by(n.filters.length>1),n.filters.reduce((function(e,t){return p_(e,t)})))}function p_(e,t){var n;return by(e instanceof Hk||e instanceof Wk),by(t instanceof Hk||t instanceof Wk),n=e instanceof Hk?t instanceof Hk?function(e,t){return Wk.create([e,t],"and")}(e,t):v_(e,t):t instanceof Hk?v_(t,e):function(e,t){if(by(e.filters.length>0&&t.filters.length>0),Qk(e)&&Qk(t))return eb(e,t.getFilters());var n=Yk(e)?e:t,r=Yk(e)?t:e,i=n.filters.map((function(e){return p_(e,r)}));return Wk.create(i,"or")}(e,t),m_(n)}function v_(e,t){if(Qk(t))return eb(t,e.getFilters());var n=t.filters.map((function(t){return p_(e,t)}));return Wk.create(n,"or")}function m_(e){if(by(e instanceof Hk||e instanceof Wk),e instanceof Hk)return e;var t=e.getFilters();if(1===t.length)return m_(t[0]);if(Jk(e))return e;var n=t.map((function(e){return m_(e)})),r=[];return n.forEach((function(t){t instanceof Hk?r.push(t):t instanceof Wk&&(t.op===e.op?r.push.apply(r,x(t.filters)):r.push(t))})),1===r.length?r[0]:Wk.create(r,e.op)}var y_=function(){function e(){_(this,e),this.rn=new g_}return T(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.rn.add(t),ig.resolve()}},{key:"getCollectionParents",value:function(e,t){return ig.resolve(this.rn.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return ig.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return ig.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return ig.resolve(null)}},{key:"getIndexType",value:function(e,t){return ig.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return ig.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return ig.resolve(null)}},{key:"getMinOffset",value:function(e,t){return ig.resolve(Xy.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return ig.resolve(Xy.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return ig.resolve()}},{key:"updateIndexEntries",value:function(e,t){return ig.resolve()}}]),e}(),g_=function(){function e(){_(this,e),this.index={}}return T(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new tk(zy.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new tk(zy.comparator)).toArray()}}]),e}(),k_=new Uint8Array(0),b_=function(){function e(t,n){_(this,e),this.user=t,this.databaseId=n,this.on=new g_,this.un=new Mb((function(e){return hb(e)}),(function(e,t){return db(e,t)})),this.uid=t.uid||""}return T(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.on.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.on.add(t)}));var a={collectionId:r,parent:bg(i)};return w_(e).put(a)}return ig.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Fy(t),""],!1,!0);return w_(e).j(r).next((function(e){var r,i=F(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(_g(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=__(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=E_(e);return a.next((function(e){o.put(Gx(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=__(e),r=E_(e),i=x_(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=x_(e),i=!0,a=new Map;return ig.forEach(this.cn(t),(function(t){return n.an(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Wb(),o=[];return ig.forEach(a,(function(i,a){var u;vy("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(hb(t)));var s=function(e,t){var n=Hy(t);if(void 0===n)return null;var r,i=F(vb(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=F(Wy(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=F(vb(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=F(Wy(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?mb(e,o.fieldPath,e.startAt):yb(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Vk(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=F(Wy(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?yb(e,o.fieldPath,e.endAt):mb(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Vk(r,i)}(a,i),h=n.hn(i,a,l),d=n.hn(i,a,f),p=n.ln(i,a,c),v=n.fn(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return ig.forEach(v,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=Ky.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return ig.resolve(null)}))}},{key:"cn",value:function(e){var t=this.un.get(e);return t||(t=0===e.filters.length?[e]:c_(Wk.create(e.filters,"and")).map((function(t){return fb(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.un.set(e,t),t)}},{key:"fn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(){var s=t?u.dn(t[h/c]):k_,f=u.wn(e,s,n[h%c],r),d=u._n(e,s,i[h%c],a),p=o.map((function(t){return u.wn(e,s,t,!0)}));l.push.apply(l,x(u.createRange(f,d,p)))},h=0;h<s;++h)f();return l}},{key:"wn",value:function(e,t,n,r){var i=new i_(e,Ky.empty(),t,n);return r?i:i.Je()}},{key:"_n",value:function(e,t,n,r){var i=new i_(e,Ky.empty(),t,n);return r?i.Je():i}},{key:"an",value:function(e,t){var n=new u_(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=F(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.tn(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.cn(t);return ig.forEach(i,(function(t){return n.an(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new tk(qy.comparator),r=!1,i=F(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=F(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var s,c=F(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"mn",value:function(e,t){var n,r=new r_,i=F(Wy(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.He(a.kind);Jx.Ve._e(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Qe()}},{key:"dn",value:function(e){var t=new r_;return Jx.Ve._e(e,t.He(0)),t.Qe()}},{key:"gn",value:function(e,t){var n=new r_;return Jx.Ve._e(Ik(this.databaseId,t),n.He(function(e){var t=Wy(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Qe()}},{key:"ln",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new r_);var i,a=0,o=F(Wy(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=F(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.yn(t,s.fieldPath)&&Tk(c))r=this.pn(r,s,c);else{var h=f.He(s.kind);Jx.Ve._e(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.In(r)}},{key:"hn",value:function(e,t,n){return this.ln(e,t,n.position)}},{key:"In",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Qe();return t}},{key:"pn",value:function(e,t,n){var r,i=x(e),a=[],o=F(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=F(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new r_;f.seed(l.Qe()),Jx.Ve._e(s,f.He(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"yn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Hk&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=__(e),i=E_(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next((function(e){var t=[];return ig.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Yy(t.sequenceNumber,new Xy(jx(t.readTime),new Ky(_g(t.documentKey)),t.largestBatchId)):Yy.empty(),r=e.fields.map((function(e){var t=c(e,2),n=t[0],r=t[1];return new Qy(qy.fromServerFormat(n),r)}));return new Gy(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Ly(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=__(e),a=E_(e);return this.Tn(e).next((function(e){return i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return ig.forEach(t,(function(t){return a.put(Gx(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return ig.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?ig.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),ig.forEach(a,(function(r){return n.En(e,t,r).next((function(t){var a=n.An(i,r);return t.isEqual(a)?ig.resolve():n.vn(e,i,r,t,a)}))}))}))}))}},{key:"Rn",value:function(e,t,n,r){return x_(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"Pn",value:function(e,t,n,r){return x_(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(n,t.key),t.key.path.toArray()])}},{key:"En",value:function(e,t,n){var r=x_(e),i=new tk(a_);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.gn(n,t)])},(function(e,r){i=i.add(new i_(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"An",value:function(e,t){var n=new tk(a_),r=this.mn(t,e);if(null==r)return n;var i=Hy(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Tk(a)){var o,u=F(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new i_(t.indexId,e.key,this.dn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new i_(t.indexId,e.key,k_,r));return n}},{key:"vn",value:function(e,t,n,r,i){var a=this;vy("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=rk(a),s=rk(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=rk(o)):l?(i(u),u=rk(a)):(u=rk(a),s=rk(o))}}(r,i,a_,(function(r){o.push(a.Rn(e,t,n,r))}),(function(r){o.push(a.Pn(e,t,n,r))})),ig.waitFor(o)}},{key:"Tn",value:function(e){var t=1;return E_(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return a_(e,t)})).filter((function(e,t,n){return!t||0!==a_(e,n[t-1])}));var r=[];r.push(e);var i,a=F(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=a_(o,e),s=a_(o,t);if(0===u)r[0]=e.Je();else if(u>0&&s<0)r.push(o),r.push(o.Je());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.bn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,k_,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,k_,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"bn",value:function(e,t){return a_(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(I_)}},{key:"getMinOffset",value:function(e,t){var n=this;return ig.mapArray(this.cn(t),(function(t){return n.an(e,t).next((function(e){return e||ky()}))})).next(I_)}}]),e}();function w_(e){return Qg(e,"collectionParents")}function x_(e){return Qg(e,"indexEntries")}function __(e){return Qg(e,"indexConfiguration")}function E_(e){return Qg(e,"indexState")}function I_(e){by(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;Zy(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Xy(t.readTime,t.documentKey,n)}var S_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},T_=function(){function e(t,n,r){_(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return T(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function C_(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.X({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){by(1===u)})));var c,l=[],f=F(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Sg(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return ig.waitFor(a).next((function(){return l}))}function N_(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw ky();t=e.noDocument}return JSON.stringify(t).length}T_.DEFAULT_COLLECTION_PERCENTILE=10,T_.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,T_.DEFAULT=new T_(41943040,T_.DEFAULT_COLLECTION_PERCENTILE,T_.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),T_.DISABLED=new T_(-1,0,0);var A_=function(){function e(t,n,r,i){_(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}return T(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return D_(e).X({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=P_(e),o=D_(e);return o.add({}).next((function(u){by("number"==typeof u);var s,c=new Aw(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return kx(e.fe,t)})),i=n.mutations.map((function(t){return kx(e.fe,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),f=[],h=new tk((function(e,t){return Ly(e.canonicalString(),t.canonicalString())})),d=F(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=Sg(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,Tg))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Vn[u]=c.keys()})),ig.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return D_(e).get(t).next((function(e){return e?(by(e.userId===n.userId),Ux(n.serializer,e)):null}))}},{key:"Sn",value:function(e,t){var n=this;return this.Vn[t]?ig.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Vn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return D_(e).X({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(by(t.batchId>=r),a=Ux(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return D_(e).X({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return D_(e).j("userMutationsIndex",n).next((function(e){return e.map((function(e){return Ux(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Ig(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return P_(e).X({range:i},(function(r,i,o){var u=c(r,3),s=u[0],l=u[1],f=u[2],h=_g(l);if(s===n.userId&&t.path.isEqual(h))return D_(e).get(f).next((function(e){if(!e)throw ky();by(e.userId===n.userId),a.push(Ux(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new tk(Ly),i=[];return t.forEach((function(t){var a=Ig(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=P_(e).X({range:o},(function(e,i,a){var o=c(e,3),u=o[0],s=o[1],l=o[2],f=_g(s);u===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(u)})),ig.waitFor(i).next((function(){return n.Dn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Ig(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new tk(Ly);return P_(e).X({range:o},(function(e,t,a){var o=c(e,3),s=o[0],l=o[1],f=o[2],h=_g(l);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.Dn(e,u)}))}},{key:"Dn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(D_(e).get(t).next((function(e){if(null===e)throw ky();by(e.userId===n.userId),r.push(Ux(n.serializer,e))})))})),ig.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return C_(e.ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Cn(t.batchId)})),ig.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Cn",value:function(e){delete this.Vn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return ig.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return P_(e).X({range:r},(function(e,n,r){if(e[0]===t.userId){var a=_g(e[1]);i.push(a)}else r.done()})).next((function(){by(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return R_(e,this.userId,t)}},{key:"xn",value:function(e){var t=this;return O_(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"de",value:function(t,n,r,i){return by(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function R_(e,t,n){var r=Ig(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return P_(e).X({range:a,Y:!0},(function(e,n,r){var a=c(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function D_(e){return Qg(e,"mutations")}function P_(e){return Qg(e,"documentMutations")}function O_(e){return Qg(e,"mutationQueues")}var L_=function(){function e(t){_(this,e),this.Nn=t}return T(e,[{key:"next",value:function(){return this.Nn+=2,this.Nn}}],[{key:"kn",value:function(){return new e(0)}},{key:"Mn",value:function(){return new e(-1)}}]),e}(),M_=function(){function e(t,n){_(this,e),this.referenceDelegate=t,this.serializer=n}return T(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.$n(e).next((function(n){var r=new L_(n.highestTargetId);return n.highestTargetId=r.next(),t.On(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.$n(e).next((function(e){return Uy.fromTimestamp(new jy(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.$n(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.$n(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.On(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Fn(e,t).next((function(){return n.$n(e).next((function(r){return r.targetCount+=1,n.Bn(t,r),n.On(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Fn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return F_(e).delete(t.targetId)})).next((function(){return n.$n(e)})).next((function(t){return by(t.targetCount>0),t.targetCount-=1,n.On(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return F_(e).X((function(o,u){var s=Vx(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return ig.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return F_(e).X((function(e,n){var r=Vx(n);t(r)}))}},{key:"$n",value:function(e){return j_(e).get("targetGlobalKey").next((function(e){return by(null!==e),e}))}},{key:"On",value:function(e,t){return j_(e).put("targetGlobalKey",t)}},{key:"Fn",value:function(e,t){return F_(e).put(zx(this.serializer,t))}},{key:"Bn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.$n(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=hb(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return F_(e).X({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Vx(n);db(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=U_(e);return t.forEach((function(t){var o=bg(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),ig.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=U_(e);return ig.forEach(t,(function(t){var a=bg(t.path);return ig.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=U_(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=U_(e),i=Wb();return r.X({range:n,Y:!0},(function(e,t,n){var r=_g(e[1]),a=new Ky(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=bg(t.path),r=IDBKeyRange.bound([n],[Fy(n)],!1,!0),i=0;return U_(e).X({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=c(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"le",value:function(e,t){return F_(e).get(t).next((function(e){return e?Vx(e):null}))}}]),e}();function F_(e){return Qg(e,"targets")}function j_(e){return Qg(e,"targetGlobal")}function U_(e){return Qg(e,"targetDocuments")}function V_(e,t){var n=c(e,2),r=n[0],i=n[1],a=c(t,2),o=a[0],u=a[1],s=Ly(r,o);return 0===s?Ly(i,u):s}var z_=function(){function e(t){_(this,e),this.Ln=t,this.buffer=new tk(V_),this.qn=0}return T(e,[{key:"Un",value:function(){return++this.qn}},{key:"Kn",value:function(e){var t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();V_(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),B_=function(){function e(t,n,r){_(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Gn=null}return T(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}},{key:"stop",value:function(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}},{key:"started",get:function(){return null!==this.Gn}},{key:"Qn",value:function(e){var t=this;vy("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,dt(ft().mark((function e(){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Gn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!cg(e.t0)){e.next=12;break}vy("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,ng(e.t0);case 14:return e.next=16,t.Qn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),q_=function(){function e(t,n){_(this,e),this.jn=t,this.params=n}return T(e,[{key:"calculateTargetCount",value:function(e,t){return this.jn.zn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return ig.resolve(mg.ct);var r=new z_(t);return this.jn.forEachTarget(e,(function(e){return r.Kn(e.sequenceNumber)})).next((function(){return n.jn.Wn(e,(function(e){return r.Kn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.jn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.jn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(vy("LruGarbageCollector","Garbage collection skipped; disabled"),ig.resolve(S_)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(vy("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),S_):n.Hn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.jn.getCacheSize(e)}},{key:"Hn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(vy("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),py()<=Vr.DEBUG&&vy("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),ig.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}();function K_(e,t){return new q_(e,t)}var G_=function(){function e(t,n){_(this,e),this.db=t,this.garbageCollector=K_(this,n)}return T(e,[{key:"zn",value:function(e){var t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Jn",value:function(e){var t=0;return this.Wn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Wn",value:function(e,t){return this.Yn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return H_(e,n)}},{key:"removeReference",value:function(e,t,n){return H_(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return H_(e,t)}},{key:"Xn",value:function(e,t){return function(e,t){var n=!1;return O_(e).Z((function(r){return R_(e,r,t).next((function(e){return e&&(n=!0),ig.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Yn(e,(function(o,u){if(u<=t){var s=n.Xn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Uy.min()),U_(e).delete([0,bg(o.path)])}))}));i.push(s)}})).next((function(){return ig.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return H_(e,t)}},{key:"Yn",value:function(e,t){var n,r=U_(e),i=mg.ct;return r.X({index:"documentTargetsIndex"},(function(e,r){var a=c(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==mg.ct&&t(new Ky(_g(n)),i),i=s,n=u):i=mg.ct})).next((function(){i!==mg.ct&&t(new Ky(_g(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function H_(e,t){return U_(e).put(function(e,t){return{targetId:0,path:bg(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var W_=function(){function e(){_(this,e),this.changes=new Mb((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return T(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Uk.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?ig.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Q_=function(){function e(t){_(this,e),this.serializer=t}return T(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return X_(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return X_(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Mx(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Zn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Uk.newInvalidDocument(t);return X_(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Z_(t))},(function(e,i){r=n.ts(t,i)})).next((function(){return r}))}},{key:"es",value:function(e,t){var n=this,r={size:0,document:Uk.newInvalidDocument(t)};return X_(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Z_(t))},(function(e,i){r={document:n.ts(t,i),size:N_(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=jb();return this.ns(e,t,(function(e,t){var i=n.ts(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"ss",value:function(e,t){var n=this,r=jb(),i=new Xg(Ky.comparator);return this.ns(e,t,(function(e,t){var a=n.ts(e,t);r=r.insert(e,a),i=i.insert(e,N_(t))})).next((function(){return{documents:r,rs:i}}))}},{key:"ns",value:function(e,t,n){if(t.isEmpty())return ig.resolve();var r=new tk(tE);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Z_(r.first()),Z_(r.last())),a=r.getIterator(),o=a.getNext();return X_(e).X({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Ky.fromSegments([].concat(x(t.prefixPath),[t.collectionGroup,t.documentId]));o&&tE(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.G(Z_(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),Mx(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return X_(e).j(IDBKeyRange.bound(o,u,!0)).next((function(e){var n,a=jb(),o=F(e);try{for(o.s();!(n=o.n()).done;){var u=n.value,s=i.ts(Ky.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s.isFoundDocument()&&(Db(t,s)||r.has(s.key))&&(a=a.insert(s.key,s))}}catch(c){o.e(c)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=jb(),o=eE(t,n),u=eE(t,Xy.max());return X_(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.ts(Ky.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new $_(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return J_(e).get("remoteDocumentGlobalKey").next((function(e){return by(!!e),e}))}},{key:"Zn",value:function(e,t){return J_(e).put("remoteDocumentGlobalKey",t)}},{key:"ts",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=yx(e.fe,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Ky.fromSegments(t.noDocument.path),i=jx(t.noDocument.readTime);n=Uk.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return ky();var a=Ky.fromSegments(t.unknownDocument.path),o=jx(t.unknownDocument.version);n=Uk.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new jy(e[0],e[1]);return Uy.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(Uy.min()))return n}return Uk.newInvalidDocument(e)}}]),e}();function Y_(e){return new Q_(e)}var $_=function(e){N(n,e);var t=P(n);function n(e,r){var i;return _(this,n),(i=t.call(this)).os=e,i.trackRemovals=r,i.us=new Mb((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return T(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new tk((function(e,t){return Ly(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.us.get(a);if(n.push(t.os.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=Lx(t.os.serializer,o);i=i.add(a.path.popLast());var c=N_(s);r+=c-u.size,n.push(t.os.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=Lx(t.os.serializer,o.convertToNoDocument(Uy.min()));n.push(t.os.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.os.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.os.updateMetadata(e,r)),ig.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.os.es(e,t).next((function(e){return n.us.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.os.ss(e,t).next((function(e){var t=e.documents;return e.rs.forEach((function(e,r){n.us.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(W_);function J_(e){return Qg(e,"remoteDocumentGlobal")}function X_(e){return Qg(e,"remoteDocumentsV14")}function Z_(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function eE(e,t){var n=t.documentKey.path.toArray();return[e,Mx(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function tE(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Ly(n[a],r[a]))return i;return(i=Ly(n.length,r.length))||((i=Ly(n[n.length-2],r[r.length-2]))||Ly(n[n.length-1],r[r.length-1]))}var nE=T((function e(t,n){_(this,e),this.overlayedDocument=t,this.mutatedFields=n})),rE=function(){function e(t,n,r,i){_(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return T(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&gw(r.mutation,e,ik.empty(),jy.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Wb()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Wb(),i=Bb();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Vb();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Bb();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Wb())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=jb(),a=Kb(),o=Kb();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof xw)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),gw(o.mutation,t,o.mutation.getFieldMask(),jy.now())):a.set(t.key,ik.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new nE(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Kb(),i=new Xg((function(e,t){return e-t})),a=Wb();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=F(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||ik.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||Wb()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=qb();c.forEach((function(e){if(!a.has(e)){var n=mw(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return ig.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Ky.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Eb(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):ig.resolve(Bb()),u=-1,s=a;return o.next((function(t){return ig.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?ig.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,Wb())})).next((function(e){return{batchId:u,changes:zb(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Ky(t)).next((function(e){var t=Vb();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Vb();return this.indexManager.getCollectionParents(e,i).next((function(o){return ig.forEach(o,(function(o){var u=function(e,t){return new gb(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,Uk.newInvalidDocument(r)))}));var n=Vb();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&gw(a.mutation,i,ik.empty(),jy.now()),Db(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),iE=function(){function e(t){_(this,e),this.serializer=t,this.cs=new Map,this.hs=new Map}return T(e,[{key:"getBundleMetadata",value:function(e,t){return ig.resolve(this.cs.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:ux(n.createTime)}),ig.resolve()}},{key:"getNamedQuery",value:function(e,t){return ig.resolve(this.hs.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:Bx(e.bundledQuery),readTime:ux(e.readTime)}}(t)),ig.resolve()}}]),e}(),aE=function(){function e(){_(this,e),this.overlays=new Xg(Ky.comparator),this.ls=new Map}return T(e,[{key:"getOverlay",value:function(e,t){return ig.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Bb();return ig.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.we(e,t,i)})),ig.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.ls.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.ls.delete(n)),ig.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Bb(),i=t.length+1,a=new Ky(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return ig.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Xg((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=Bb(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=Bb(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return ig.resolve(s)}},{key:"we",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Dw(t,n));var a=this.ls.get(t);void 0===a&&(a=Wb(),this.ls.set(t,a)),this.ls.set(t,a.add(n.key))}}]),e}(),oE=function(){function e(){_(this,e),this.fs=new tk(uE.ds),this.ws=new tk(uE._s)}return T(e,[{key:"isEmpty",value:function(){return this.fs.isEmpty()}},{key:"addReference",value:function(e,t){var n=new uE(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}},{key:"gs",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.ys(new uE(e,t))}},{key:"ps",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Is",value:function(e){var t=this,n=new Ky(new zy([])),r=new uE(n,e),i=new uE(n,e+1),a=[];return this.ws.forEachInRange([r,i],(function(e){t.ys(e),a.push(e.key)})),a}},{key:"Ts",value:function(){var e=this;this.fs.forEach((function(t){return e.ys(t)}))}},{key:"ys",value:function(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}},{key:"Es",value:function(e){var t=new Ky(new zy([])),n=new uE(t,e),r=new uE(t,e+1),i=Wb();return this.ws.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new uE(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),uE=function(){function e(t,n){_(this,e),this.key=t,this.As=n}return T(e,null,[{key:"ds",value:function(e,t){return Ky.comparator(e.key,t.key)||Ly(e.As,t.As)}},{key:"_s",value:function(e,t){return Ly(e.As,t.As)||Ky.comparator(e.key,t.key)}}]),e}(),sE=function(){function e(t,n){_(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new tk(uE.ds)}return T(e,[{key:"checkEmpty",value:function(e){return ig.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new Aw(i,t,n,r);this.mutationQueue.push(a);var o,u=F(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Rs=this.Rs.add(new uE(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return ig.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return ig.resolve(this.Ps(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.bs(n),i=r<0?0:r;return ig.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return ig.resolve(0===this.mutationQueue.length?-1:this.vs-1)}},{key:"getAllMutationBatches",value:function(e){return ig.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new uE(t,0),i=new uE(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],(function(e){var t=n.Ps(e.As);a.push(t)})),ig.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new tk(Ly);return t.forEach((function(e){var t=new uE(e,0),i=new uE(e,Number.POSITIVE_INFINITY);n.Rs.forEachInRange([t,i],(function(e){r=r.add(e.As)}))})),ig.resolve(this.Vs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Ky.isDocumentKey(i)||(i=i.child(""));var a=new uE(new Ky(i),0),o=new tk(Ly);return this.Rs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.As)),!0)}),a),ig.resolve(this.Vs(o))}},{key:"Vs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Ps(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;by(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();var r=this.Rs;return ig.forEach(t.mutations,(function(i){var a=new uE(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Rs=r}))}},{key:"Cn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new uE(t,0),r=this.Rs.firstAfterOrEqual(n);return ig.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,ig.resolve()}},{key:"Ss",value:function(e,t){return this.bs(e)}},{key:"bs",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"Ps",value:function(e){var t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),cE=function(){function e(t){_(this,e),this.Ds=t,this.docs=new Xg(Ky.comparator),this.size=0}return T(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return ig.resolve(n?n.document.mutableCopy():Uk.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=jb();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Uk.newInvalidDocument(e))})),ig.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=jb(),a=t.path,o=new Ky(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Zy(Jy(l),n)<=0||(r.has(l.key)||Db(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return ig.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){ky()}},{key:"Cs",value:function(e,t){return ig.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new lE(this)}},{key:"getSize",value:function(e){return ig.resolve(this.size)}}]),e}(),lE=function(e){N(n,e);var t=P(n);function n(e){var r;return _(this,n),(r=t.call(this)).os=e,r}return T(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.os.addEntry(e,i)):t.os.removeEntry(r)})),ig.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.os.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.os.getEntries(e,t)}}]),n}(W_),fE=function(){function e(t){_(this,e),this.persistence=t,this.xs=new Mb((function(e){return hb(e)}),db),this.lastRemoteSnapshotVersion=Uy.min(),this.highestTargetId=0,this.Ns=0,this.ks=new oE,this.targetCount=0,this.Ms=L_.kn()}return T(e,[{key:"forEachTarget",value:function(e,t){return this.xs.forEach((function(e,n){return t(n)})),ig.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return ig.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return ig.resolve(this.Ns)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ms.next(),ig.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),ig.resolve()}},{key:"Fn",value:function(e){this.xs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ms=new L_(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Fn(t),this.targetCount+=1,ig.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Fn(t),ig.resolve()}},{key:"removeTargetData",value:function(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,ig.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.xs.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.xs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),ig.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return ig.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.xs.get(t)||null;return ig.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.ks.gs(t,n),ig.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.ks.ps(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),ig.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.ks.Is(t),ig.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.ks.Es(t);return ig.resolve(n)}},{key:"containsKey",value:function(e,t){return ig.resolve(this.ks.containsKey(t))}}]),e}(),hE=function(){function e(t,n){var r=this;_(this,e),this.$s={},this.overlays={},this.Os=new mg(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=t(this),this.Bs=new fE(this),this.indexManager=new y_,this.remoteDocumentCache=new cE((function(e){return r.referenceDelegate.Ls(e)})),this.serializer=new Ox(n),this.qs=new iE(this.serializer)}return T(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Fs=!1,Promise.resolve()}},{key:"started",get:function(){return this.Fs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new aE,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.$s[e.toKey()];return n||(n=new sE(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Bs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.qs}},{key:"runTransaction",value:function(e,t,n){var r=this;vy("MemoryPersistence","Starting transaction:",e);var i=new dE(this.Os.next());return this.referenceDelegate.Us(),n(i).next((function(e){return r.referenceDelegate.Ks(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Gs",value:function(e,t){return ig.or(Object.values(this.$s).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),dE=function(e){N(n,e);var t=P(n);function n(e){var r;return _(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return T(n)}(tg),pE=function(){function e(t){_(this,e),this.persistence=t,this.Qs=new oE,this.js=null}return T(e,[{key:"Ws",get:function(){if(this.js)return this.js;throw ky()}},{key:"addReference",value:function(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),ig.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),ig.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ws.add(t.toString()),ig.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Qs.Is(t.targetId).forEach((function(e){return n.Ws.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ws.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Us",value:function(){this.js=new Set}},{key:"Ks",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ig.forEach(this.Ws,(function(r){var i=Ky.fromPath(r);return t.Hs(e,i).next((function(e){e||n.removeEntry(i,Uy.min())}))})).next((function(){return t.js=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Hs(e,t).next((function(e){e?n.Ws.delete(t.toString()):n.Ws.add(t.toString())}))}},{key:"Ls",value:function(e){return 0}},{key:"Hs",value:function(e,t){var n=this;return ig.or([function(){return ig.resolve(n.Qs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Gs(e,t)}])}}],[{key:"zs",value:function(t){return new e(t)}}]),e}(),vE=function(){function e(t){_(this,e),this.serializer=t}return T(e,[{key:"O",value:function(e,t,n,r){var i=this,a=new ag("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Eg,{unique:!0}),e.createObjectStore("documentMutations")}(e),mE(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=ig.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),mE(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Uy.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").j().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Eg,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return ig.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Ys(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Xs(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Zs(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.ti(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.ei(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Ug});t.createIndex("collectionPathOverlayIndex",Vg,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",zg,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Cg});t.createIndex("documentKeyIndex",Ng),t.createIndex("collectionGroupIndex",Ag)}(e)})).next((function(){return i.ni(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.si(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Lg}).createIndex("sequenceNumberIndex",Mg,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Fg}).createIndex("documentKeyIndex",jg,{unique:!1})}(e)}))),o}},{key:"Xs",value:function(e){var t=0;return e.store("remoteDocuments").X((function(e,n){t+=N_(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Ys",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.j().next((function(n){return ig.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",i).next((function(r){return ig.forEach(r,(function(r){by(r.userId===n.userId);var i=Ux(t.serializer,r);return C_(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Zs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.X((function(n,i){var a=new zy(n),o=function(e){return[0,bg(e)]}(a);r.push(t.get(o).next((function(n){return n?ig.resolve():function(n){return t.put({targetId:0,path:bg(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return ig.waitFor(r)}))}))}},{key:"ti",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Og});var n=t.store("collectionParents"),r=new g_,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:bg(i)})}};return t.store("remoteDocuments").X({Y:!0},(function(e,t){var n=new zy(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").X({Y:!0},(function(e,t){var n=c(e,3),r=(n[0],n[1]),a=(n[2],_g(r));return i(a.popLast())}))}))}},{key:"ei",value:function(e){var t=this,n=e.store("targets");return n.X((function(e,r){var i=Vx(r),a=zx(t.serializer,i);return n.put(a)}))}},{key:"ni",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.X((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Ky(zy.fromString(i.document.name).popFirst(5)):i.noDocument?Ky.fromSegments(i.noDocument.path):i.unknownDocument?Ky.fromSegments(i.unknownDocument.path):ky()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return ig.waitFor(r)}))}},{key:"si",value:function(e,t){var n=this,r=t.store("mutations"),i=Y_(this.serializer),a=new hE(pE.zs,this.serializer.fe);return r.j().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Wb();Ux(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),ig.forEach(r,(function(e,r){var o=new fy(r),u=Yx.de(n.serializer,o),s=a.getIndexManager(o),c=A_.de(o,n.serializer,s,a.referenceDelegate);return new rE(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new Wg(t,mg.ct),e).next()}))}))}}]),e}();function mE(e){e.createObjectStore("targetDocuments",{keyPath:Dg}).createIndex("documentTargetsIndex",Pg,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Rg,{unique:!0}),e.createObjectStore("targetGlobal")}var yE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",gE=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(_(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.ii=a,this.window=o,this.document=u,this.ri=c,this.oi=l,this.ui=f,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=function(e){return Promise.resolve()},!e.D())throw new _y(xy.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new G_(this,i),this.di=n+"main",this.serializer=new Ox(s),this.wi=new og(this.di,this.ui,new vE(this.serializer)),this.Bs=new M_(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Y_(this.serializer),this.qs=new Hx,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===l&&my("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return T(e,[{key:"start",value:function(){var e=this;return this.mi().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new _y(xy.FAILED_PRECONDITION,yE);return e.gi(),e.yi(),e.pi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Bs.getHighestSequenceNumber(t)}))})).then((function(t){e.Os=new mg(t,e.ri)})).then((function(){e.Fs=!0})).catch((function(t){return e.wi&&e.wi.close(),Promise.reject(t)}))}},{key:"Ii",value:function(e){var t=this;return this.fi=function(){var n=dt(ft().mark((function n(r){return ft().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.wi.B(function(){var t=dt(ft().mark((function t(n){return ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget(dt(ft().mark((function e(){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.mi();case 4:case"end":return e.stop()}}),e)})))))}},{key:"mi",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return bE(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Ti(t).next((function(t){t||(e.isPrimary=!1,e.ii.enqueueRetryable((function(){return e.fi(!1)})))}))})).next((function(){return e.Ei(t)})).next((function(n){return e.isPrimary&&!n?e.Ai(t).next((function(){return!1})):!!n&&e.vi(t).next((function(){return!0}))}))})).catch((function(t){if(cg(t))return vy("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return vy("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.ii.enqueueRetryable((function(){return e.fi(t)})),e.isPrimary=t}))}},{key:"Ti",value:function(e){var t=this;return kE(e).get("owner").next((function(e){return ig.resolve(t.Ri(e))}))}},{key:"Pi",value:function(e){return bE(e).delete(this.clientId)}},{key:"bi",value:function(){var e=dt(ft().mark((function e(){var t,n,r,i,a=this;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Vi(this.li,18e5)){e.next=6;break}return this.li=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Qg(e,"clientMetadata");return t.j().next((function(e){var n=a.Si(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return ig.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this._i){n=F(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this._i.removeItem(this.Di(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pi",value:function(){var e=this;this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.mi().then((function(){return e.bi()})).then((function(){return e.pi()}))}))}},{key:"Ri",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"Ei",value:function(e){var t=this;return this.oi?ig.resolve(!0):kE(e).get("owner").next((function(n){if(null!==n&&t.Vi(n.leaseTimestampMs,5e3)&&!t.Ci(n.ownerId)){if(t.Ri(n)&&t.networkEnabled)return!0;if(!t.Ri(n)){if(!n.allowTabSynchronization)throw new _y(xy.FAILED_PRECONDITION,yE);return!1}}return!(!t.networkEnabled||!t.inForeground)||bE(e).j().next((function(e){return void 0===t.Si(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&vy("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=dt(ft().mark((function e(){var t=this;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fs=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Ni(),this.ki(),e.next=7,this.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Wg(e,mg.ct);return t.Ai(n).next((function(){return t.Pi(n)}))}));case 7:this.wi.close(),this.Mi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Si",value:function(e,t){var n=this;return e.filter((function(e){return n.Vi(e.updateTimeMs,t)&&!n.Ci(e.clientId)}))}},{key:"$i",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return bE(t).j().next((function(t){return e.Si(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Fs}},{key:"getMutationQueue",value:function(e,t){return A_.de(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Bs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new b_(e,this.serializer.fe.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Yx.de(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.qs}},{key:"runTransaction",value:function(e,t,n){var r=this;vy("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.ui)?Hg:14===i?Gg:13===i?Kg:12===i?qg:11===i?Bg:void ky();return this.wi.runTransaction(e,o,u,(function(i){return a=new Wg(i,r.Os?r.Os.next():mg.ct),"readwrite-primary"===t?r.Ti(a).next((function(e){return!!e||r.Ei(a)})).next((function(t){if(!t)throw my("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.ii.enqueueRetryable((function(){return r.fi(!1)})),new _y(xy.FAILED_PRECONDITION,eg);return n(a)})).next((function(e){return r.vi(a).next((function(){return e}))})):r.Oi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Oi",value:function(e){var t=this;return kE(e).get("owner").next((function(e){if(null!==e&&t.Vi(e.leaseTimestampMs,5e3)&&!t.Ci(e.ownerId)&&!t.Ri(e)&&!(t.oi||t.allowTabSynchronization&&e.allowTabSynchronization))throw new _y(xy.FAILED_PRECONDITION,yE)}))}},{key:"vi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return kE(e).put("owner",t)}},{key:"Ai",value:function(e){var t=this,n=kE(e);return n.get("owner").next((function(e){return t.Ri(e)?(vy("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):ig.resolve()}))}},{key:"Vi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(my("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"gi",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=function(){e.ii.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.mi()}))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ni",value:function(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}},{key:"yi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=function(){t.xi();var e=/(?:Version|Mobile)\/1[456]/;!yr()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.ii.enterRestrictedMode(!0),t.ii.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ci))}},{key:"ki",value:function(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}},{key:"Ci",value:function(e){var t;try{var n=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return vy("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return my("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"xi",value:function(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){my("Failed to set zombie client id.",e)}}},{key:"Mi",value:function(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch(e){}}},{key:"Di",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"D",value:function(){return og.D()}}]),e}();function kE(e){return Qg(e,"owner")}function bE(e){return Qg(e,"clientMetadata")}function wE(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var xE=function(){function e(t,n,r,i){_(this,e),this.targetId=t,this.fromCache=n,this.Fi=r,this.Bi=i}return T(e,null,[{key:"Li",value:function(t,n){var r,i=Wb(),a=Wb(),o=F(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),_E=function(){function e(){_(this,e),this.qi=!1}return T(e,[{key:"initialize",value:function(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ki(e,t).next((function(a){return a||i.Gi(e,t,r,n)})).next((function(n){return n||i.Qi(e,t)}))}},{key:"Ki",value:function(e,t){var n=this;if(wb(t))return ig.resolve(null);var r=Sb(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=Cb(t,null,"F"),r=Sb(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=Wb.apply(void 0,x(i));return n.Ui.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.ji(t,i);return n.zi(t,o,a,r.readTime)?n.Ki(e,Cb(t,null,"F")):n.Wi(e,o,t,r)}))}))})))}))}},{key:"Gi",value:function(e,t,n,r){var i=this;return wb(t)||r.isEqual(Uy.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next((function(a){var o=i.ji(t,a);return i.zi(t,o,n,r)?i.Qi(e,t):(py()<=Vr.DEBUG&&vy("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Rb(t)),i.Wi(e,o,t,$y(r,-1)))}))}},{key:"ji",value:function(e,t){var n=new tk(Ob(e));return t.forEach((function(t,r){Db(e,r)&&(n=n.add(r))})),n}},{key:"zi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Qi",value:function(e,t){return py()<=Vr.DEBUG&&vy("QueryEngine","Using full collection scan to execute query:",Rb(t)),this.Ui.getDocumentsMatchingQuery(e,t,Xy.min())}},{key:"Wi",value:function(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),EE=function(){function e(t,n,r,i){_(this,e),this.persistence=t,this.Hi=n,this.serializer=i,this.Ji=new Xg(Ly),this.Yi=new Mb((function(e){return hb(e)}),db),this.Xi=new Map,this.Zi=t.getRemoteDocumentCache(),this.Bs=t.getTargetCache(),this.qs=t.getBundleCache(),this.tr(r)}return T(e,[{key:"tr",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rE(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ji)}))}}]),e}();function IE(e,t,n,r){return new EE(e,t,n,r)}function SE(e,t){return TE.apply(this,arguments)}function TE(){return TE=dt(ft().mark((function e(t,n){var r;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wy(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.tr(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Wb(),s=F(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=F(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=F(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=F(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{er:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),TE.apply(this,arguments)}function CE(e,t){var n=wy(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=ig.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);by(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Wb(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function NE(e){var t=wy(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Bs.getLastRemoteSnapshotVersion(e)}))}function AE(e,t){var n=wy(e),r=t.snapshotVersion,i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Bs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Bs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(u)?c=c.withResumeToken(ok.EMPTY_BYTE_STRING,Uy.min()).withLastLimboFreeSnapshotVersion(Uy.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Bs.updateTargetData(e,c))}}));var u=jb(),s=Wb();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(RE(e,a,t.documentUpdates).next((function(e){u=e.nr,s=e.sr}))),!r.isEqual(Uy.min())){var c=n.Bs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return ig.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Ji=i,e}))}function RE(e,t,n){var r=Wb(),i=Wb();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=jb();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Uy.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):vy("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{nr:r,sr:i}}))}function DE(e,t){var n=wy(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function PE(e,t){var n=wy(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Bs.getTargetData(e,t).next((function(i){return i?(r=i,ig.resolve(r)):n.Bs.allocateTargetId(e).next((function(i){return r=new Px(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}function OE(e,t,n){return LE.apply(this,arguments)}function LE(){return LE=dt(ft().mark((function e(t,n,r){var i,a,o;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=wy(t),a=i.Ji.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),cg(e.t1)){e.next=12;break}throw e.t1;case 12:vy("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ji=i.Ji.remove(n),i.Yi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),LE.apply(this,arguments)}function ME(e,t,n){var r=wy(e),i=Uy.min(),a=Wb();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=wy(e),i=r.Yi.get(n);return void 0!==i?ig.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,Sb(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Hi.getDocumentsMatchingQuery(e,t,n?i:Uy.min(),n?a:Wb())})).next((function(e){return UE(r,Pb(t),e),{documents:e,ir:a}}))}))}function FE(e,t){var n=wy(e),r=wy(n.Bs),i=n.Ji.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.le(e,t).next((function(e){return e?e.target:null}))}))}function jE(e,t){var n=wy(e),r=n.Xi.get(t)||Uy.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Zi.getAllFromCollectionGroup(e,t,$y(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return UE(n,t,e),e}))}function UE(e,t,n){var r=e.Xi.get(t)||Uy.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Xi.set(t,r)}function VE(e,t,n,r){return zE.apply(this,arguments)}function zE(){return zE=dt(ft().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=wy(t),o=Wb(),u=jb(),s=F(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.rr(l.metadata.name),l.document&&(o=o.add(f)),(h=n.ur(l)).setReadTime(n.cr(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.Zi.newChangeBuffer({trackRemovals:!0}),e.next=7,PE(a,function(e){return Sb(bb(zy.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return RE(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Bs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Bs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.nr,t.sr)})).next((function(){return t.nr}))}))})));case 9:case"end":return e.stop()}}),e)}))),zE.apply(this,arguments)}function BE(e,t){return qE.apply(this,arguments)}function qE(){return qE=dt(ft().mark((function e(t,n){var r,i,a,o=arguments;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Wb(),e.next=3,PE(t,Sb(Bx(n.bundledQuery)));case 3:return i=e.sent,a=wy(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=ux(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.qs.saveNamedQuery(e,n);var o=i.withResumeToken(ok.EMPTY_BYTE_STRING,t);return a.Ji=a.Ji.insert(o.targetId,o),a.Bs.updateTargetData(e,o).next((function(){return a.Bs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Bs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.qs.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),qE.apply(this,arguments)}function KE(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function GE(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function HE(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var WE=function(){function e(t,n,r,i){_(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return T(e,[{key:"hr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"ar",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new _y(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(my("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),QE=function(){function e(t,n,r){_(this,e),this.targetId=t,this.state=n,this.error=r}return T(e,[{key:"hr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"ar",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new _y(i.error.code,i.error.message))),a?new e(t,i.state,r):(my("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),YE=function(){function e(t,n){_(this,e),this.clientId=t,this.activeTargetIds=n}return T(e,null,[{key:"ar",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Yb(),o=0;i&&o<r.activeTargetIds.length;++o)i=kg(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(my("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),$E=function(){function e(t,n){_(this,e),this.clientId=t,this.onlineState=n}return T(e,null,[{key:"ar",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(my("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),JE=function(){function e(){_(this,e),this.activeTargetIds=Yb()}return T(e,[{key:"lr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"dr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"hr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),XE=function(){function e(t,n,r,i,a){_(this,e),this.window=t,this.ii=n,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Xg(Ly),this.started=!1,this.yr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.pr=KE(this.persistenceKey,this.wr),this.Ir=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.gr=this.gr.insert(this.wr,new JE),this.Tr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Er=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Ar=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.vr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Rr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this._r)}return T(e,[{key:"start",value:function(){var e=dt(ft().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.$i();case 2:t=e.sent,n=F(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.wr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(KE(this.persistenceKey,i)))&&(o=YE.ar(i,a))&&(this.gr=this.gr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.Pr(),(u=this.storage.getItem(this.vr))&&(s=this.br(u))&&this.Vr(s),c=F(this.yr);try{for(c.s();!(l=c.n()).done;)f=l.value,this.mr(f)}catch(d){c.e(d)}finally{c.f()}this.yr=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Ir,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Sr(this.gr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.gr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Dr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Dr(e,t,n),this.Cr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(HE(this.persistenceKey,e));if(n){var r=QE.ar(e,n);r&&(t=r.state)}}return this.Nr.lr(e),this.Pr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Nr.dr(e),this.Pr()}},{key:"isLocalQueryTarget",value:function(e){return this.Nr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(HE(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.kr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Cr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Mr(e)}},{key:"notifyBundleLoaded",value:function(e){this.$r(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return vy("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){vy("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){vy("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"mr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(vy("SharedClientState","EVENT",n.key,n.newValue),n.key===this.pr)return void my("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable(dt(ft().mark((function e(){var r,i,a,o,u,s,c;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.Tr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Or(n.key),e.abrupt("return",t.Fr(r,null));case 6:if(!(i=t.Br(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Fr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.Er.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Lr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.qr(a));case 16:e.next=41;break;case 18:if(!t.Ar.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Ur(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Kr(o));case 23:e.next=41;break;case 25:if(n.key!==t.vr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.br(n.newValue))){e.next=30;break}return e.abrupt("return",t.Vr(u));case 30:e.next=41;break;case 32:if(n.key!==t.Ir){e.next=37;break}s=function(e){var t=mg.ct;if(null!=e)try{var n=JSON.parse(e);by("number"==typeof n),t=n}catch(e){my("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==mg.ct&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.Rr){e.next=41;break}return c=t.Gr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Qr(e)})));case 41:e.next=44;break;case 43:t.yr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Nr",get:function(){return this.gr.get(this.wr)}},{key:"Pr",value:function(){this.setItem(this.pr,this.Nr.hr())}},{key:"Dr",value:function(e,t,n){var r=new WE(this.currentUser,e,t,n),i=GE(this.persistenceKey,this.currentUser,e);this.setItem(i,r.hr())}},{key:"Cr",value:function(e){var t=GE(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Mr",value:function(e){var t={clientId:this.wr,onlineState:e};this.storage.setItem(this.vr,JSON.stringify(t))}},{key:"kr",value:function(e,t,n){var r=HE(this.persistenceKey,e),i=new QE(e,t,n);this.setItem(r,i.hr())}},{key:"$r",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}},{key:"Or",value:function(e){var t=this.Tr.exec(e);return t?t[1]:null}},{key:"Br",value:function(e,t){var n=this.Or(e);return YE.ar(n,t)}},{key:"Lr",value:function(e,t){var n=this.Er.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return WE.ar(new fy(i),r,t)}},{key:"Ur",value:function(e,t){var n=this.Ar.exec(e),r=Number(n[1]);return QE.ar(r,t)}},{key:"br",value:function(e){return $E.ar(e)}},{key:"Gr",value:function(e){return JSON.parse(e)}},{key:"qr",value:function(){var e=dt(ft().mark((function e(t){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.jr(t.batchId,t.state,t.error));case 2:vy("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Kr",value:function(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}},{key:"Fr",value:function(e,t){var n=this,r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),a=this.Sr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Wr(o,u).then((function(){n.gr=r}))}},{key:"Vr",value:function(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Sr",value:function(e){var t=Yb();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"D",value:function(e){return!(!e||!e.localStorage)}}]),e}(),ZE=function(){function e(){_(this,e),this.Hr=new JE,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return T(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Jr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Hr.dr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Hr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Jr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Hr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Hr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Hr=new JE,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),eI=function(){function e(){_(this,e)}return T(e,[{key:"Yr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),tI=function(){function e(){var t=this;_(this,e),this.Xr=function(){return t.Zr()},this.eo=function(){return t.no()},this.so=[],this.io()}return T(e,[{key:"Yr",value:function(e){this.so.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}},{key:"io",value:function(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}},{key:"Zr",value:function(){vy("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=F(this.so);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"no",value:function(){vy("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=F(this.so);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),nI=null;function rI(){return null===nI?nI=268435456+Math.round(2147483648*Math.random()):nI++,"0x"+nI.toString(16)}var iI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},aI=function(){function e(t){_(this,e),this.ro=t.ro,this.oo=t.oo}return T(e,[{key:"uo",value:function(e){this.co=e}},{key:"ao",value:function(e){this.ho=e}},{key:"onMessage",value:function(e){this.lo=e}},{key:"close",value:function(){this.oo()}},{key:"send",value:function(e){this.ro(e)}},{key:"fo",value:function(){this.co()}},{key:"wo",value:function(e){this.ho(e)}},{key:"_o",value:function(e){this.lo(e)}}]),e}(),oI="WebChannelConnection",uI=function(e){N(n,e);var t=P(n);function n(e){var r;return _(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r.longPollingOptions=e.longPollingOptions,r}return T(n,[{key:"Ao",value:function(e,t,n,r){var i=rI();return new Promise((function(a,o){var u=new uy;u.setWithCredentials(!0),u.listenOnce(ny.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case ty.NO_ERROR:var t=u.getResponseJson();vy(oI,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case ty.TIMEOUT:vy(oI,"RPC '".concat(e,"' ").concat(i," timed out")),o(new _y(xy.DEADLINE_EXCEEDED,"Request time out"));break;case ty.HTTP_ERROR:var n=u.getStatus();if(vy(oI,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(xy).indexOf(t)>=0?t:xy.UNKNOWN}(s.status);o(new _y(c,s.message))}else o(new _y(xy.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new _y(xy.UNAVAILABLE,"Connection failed."));break;default:ky()}}finally{vy(oI,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);vy(oI,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"Ro",value:function(e,t,n){var r=rI(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Zm(),o=ey(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},s=this.longPollingOptions.timeoutSeconds;void 0!==s&&(u.longPollingTimeout=Math.round(1e3*s)),this.useFetchStreams&&(u.xmlHttpFactory=new ay({})),this.Eo(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var c=i.join("");vy(oI,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),u);var l=a.createWebChannel(c,u),f=!1,h=!1,d=new aI({ro:function(t){h?vy(oI,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(f||(vy(oI,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),f=!0),vy(oI,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},oo:function(){return l.close()}}),p=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(l,oy.EventType.OPEN,(function(){h||vy(oI,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(l,oy.EventType.CLOSE,(function(){h||(h=!0,vy(oI,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.wo())})),p(l,oy.EventType.ERROR,(function(t){h||(h=!0,yy(oI,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.wo(new _y(xy.UNAVAILABLE,"The operation could not be completed")))})),p(l,oy.EventType.MESSAGE,(function(t){var n;if(!h){var i=t.data[0];by(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){vy(oI,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=Sw[e];if(void 0!==t)return Lw(t)}(u),c=o.message;void 0===s&&(s=xy.INTERNAL,c="Unknown error status: "+u+" with message "+o.message),h=!0,d.wo(new _y(s,c)),l.close()}else vy(oI,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d._o(i)}})),p(o,ry.STAT_EVENT,(function(t){t.stat===iy.PROXY?vy(oI,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===iy.NOPROXY&&vy(oI,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.fo()}),0),d}}]),n}(function(){function e(t){_(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.mo=n+"://"+t.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return T(e,[{key:"po",get:function(){return!1}},{key:"Io",value:function(e,t,n,r,i){var a=rI(),o=this.To(e,t);vy("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={};return this.Eo(u,r,i),this.Ao(e,o,u,n).then((function(t){return vy("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw yy("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"vo",value:function(e,t,n,r,i,a){return this.Io(e,t,n,r,i)}},{key:"Eo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+hy,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"To",value:function(e,t){var n=iI[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}]),e}());function sI(){return"undefined"!=typeof window?window:null}function cI(){return"undefined"!=typeof document?document:null}function lI(e){return new nx(e,!0)}var fI=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;_(this,e),this.ii=t,this.timerId=n,this.Po=r,this.bo=i,this.Vo=a,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}return T(e,[{key:"reset",value:function(){this.So=0}},{key:"xo",value:function(){this.So=this.Vo}},{key:"No",value:function(e){var t=this;this.cancel();var n=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,n-r);i>0&&vy("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.So," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,(function(){return t.Co=Date.now(),e()})),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}},{key:"Mo",value:function(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}},{key:"cancel",value:function(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"ko",value:function(){return(Math.random()-.5)*this.So}}]),e}(),hI=function(){function e(t,n,r,i,a,o,u,s){_(this,e),this.ii=t,this.$o=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new fI(t,n)}return T(e,[{key:"Uo",value:function(){return 1===this.state||5===this.state||this.Ko()}},{key:"Ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Go()}},{key:"stop",value:function(){var e=dt(ft().mark((function e(){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Uo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Qo",value:function(){this.state=0,this.qo.reset()}},{key:"jo",value:function(){var e=this;this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(function(){return e.zo()})))}},{key:"Wo",value:function(e){this.Ho(),this.stream.send(e)}},{key:"zo",value:function(){var e=dt(ft().mark((function e(){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ho",value:function(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}},{key:"Jo",value:function(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}},{key:"close",value:function(){var e=dt(ft().mark((function e(t,n){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==t?this.qo.reset():n&&n.code===xy.RESOURCE_EXHAUSTED?(my(n.toString()),my("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):n&&n.code===xy.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.ao(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Yo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=c(t,2),i=r[0],a=r[1];e.Fo===n&&e.Zo(i,a)}),(function(n){t((function(){var t=new _y(xy.UNKNOWN,"Fetching auth token failed: "+n.message);return e.tu(t)}))}))}},{key:"Zo",value:function(e,t){var n=this,r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo((function(){r((function(){return n.state=2,n.Lo=n.ii.enqueueAfterDelay(n.Oo,1e4,(function(){return n.Ko()&&(n.state=3),Promise.resolve()})),n.listener.uo()}))})),this.stream.ao((function(e){r((function(){return n.tu(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Go",value:function(){var e=this;this.state=5,this.qo.No(dt(ft().mark((function t(){return ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"tu",value:function(e){return vy("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Xo",value:function(e){var t=this;return function(n){t.ii.enqueueAndForget((function(){return t.Fo===e?n():(vy("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),dI=function(e){N(n,e);var t=P(n);function n(e,r,i,a,o,u){var s;return _(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s}return T(n,[{key:"eu",value:function(e,t){return this.connection.Ro("Listen",e,t)}},{key:"onMessage",value:function(e){this.qo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:ky()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(by(void 0===t||"string"==typeof t),ok.fromBase64String(t||"")):(by(void 0===t||t instanceof Uint8Array),ok.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?xy.UNKNOWN:Lw(e.code);return new _y(t,e.message||"")}(o);n=new Qw(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=fx(e,s.document.name),l=ux(s.document.updateTime),f=s.document.createTime?ux(s.document.createTime):Uy.min(),h=new Fk({mapValue:{fields:s.document.fields}}),d=Uk.newFoundDocument(c,l,f,h),p=s.targetIds||[],v=s.removedTargetIds||[];n=new Hw(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var y=fx(e,m.document),g=m.readTime?ux(m.readTime):Uy.min(),k=Uk.newNoDocument(y,g),b=m.removedTargetIds||[];n=new Hw([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var x=fx(e,w.document),_=w.removedTargetIds||[];n=new Hw([],_,x,null)}else{if(!("filter"in t))return ky();t.filter;var E=t.filter;E.targetId;var I=E.count,S=void 0===I?0:I,T=E.unchangedNames,C=new Pw(S,T),N=E.targetId;n=new Ww(N,C)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Uy.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Uy.min():t.readTime?ux(t.readTime):Uy.min()}(e);return this.listener.nu(t,n)}},{key:"su",value:function(e){var t={};t.database=px(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=pb(r)?{documents:wx(e,r)}:{query:xx(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=ax(e,t.resumeToken);var i=rx(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(Uy.min())>0){n.readTime=ix(e,t.snapshotVersion.toTimestamp());var a=rx(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ky()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}},{key:"iu",value:function(e){var t={};t.database=px(this.serializer),t.removeTarget=e,this.Wo(t)}}]),n}(hI),pI=function(e){N(n,e);var t=P(n);function n(e,r,i,a,o,u){var s;return _(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s.ru=!1,s}return T(n,[{key:"ou",get:function(){return this.ru}},{key:"start",value:function(){this.ru=!1,this.lastStreamToken=void 0,fa(A(n.prototype),"start",this).call(this)}},{key:"Yo",value:function(){this.ru&&this.uu([])}},{key:"eu",value:function(e,t){return this.connection.Ro("Write",e,t)}},{key:"onMessage",value:function(e){if(by(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();var t=function(e,t){return e&&e.length>0?(by(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?ux(e.updateTime):ux(t);return n.isEqual(Uy.min())&&(n=ux(t)),new hw(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=ux(e.commitTime);return this.listener.cu(n,t)}return by(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}},{key:"hu",value:function(){var e={};e.database=px(this.serializer),this.Wo(e)}},{key:"uu",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return kx(t.serializer,e)}))};this.Wo(n)}}]),n}(hI),vI=function(e){N(n,e);var t=P(n);function n(e,r,i,a){var o;return _(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.lu=!1,o}return T(n,[{key:"fu",value:function(){if(this.lu)throw new _y(xy.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Io",value:function(e,t,n){var r=this;return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=c(i,2),o=a[0],u=a[1];return r.connection.Io(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===xy.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new _y(xy.UNKNOWN,e.toString())}))}},{key:"vo",value:function(e,t,n,r){var i=this;return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=c(a,2),u=o[0],s=o[1];return i.connection.vo(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===xy.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new _y(xy.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.lu=!0}}]),n}(function(){return T((function e(){_(this,e)}))}());var mI=function(){function e(t,n){_(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}return T(e,[{key:"gu",value:function(){var e=this;0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e._u=null,e.pu("Backend didn't respond within 10 seconds."),e.yu("Offline"),Promise.resolve()})))}},{key:"Iu",value:function(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.yu("Offline")))}},{key:"set",value:function(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}},{key:"yu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"pu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.mu?(my(t),this.mu=!1):vy("OnlineStateTracker",t)}},{key:"Tu",value:function(){null!==this._u&&(this._u.cancel(),this._u=null)}}]),e}(),yI=T((function e(t,n,r,i,a){var o=this;_(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=a,this.Pu.Yr((function(e){r.enqueueAndForget(dt(ft().mark((function e(){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=CI(o),!e.t0){e.next=5;break}return vy("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=dt(ft().mark((function e(t){var n;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=wy(t)).vu.add(4),e.next=4,bI(n);case 4:return n.bu.set("Unknown"),n.vu.delete(4),e.next=8,gI(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.bu=new mI(r,i)}));function gI(e){return kI.apply(this,arguments)}function kI(){return(kI=dt(ft().mark((function e(t){var n,r,i;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!CI(t)){e.next=18;break}n=F(t.Ru),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}function bI(e){return wI.apply(this,arguments)}function wI(){return(wI=dt(ft().mark((function e(t){var n,r,i;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=F(t.Ru),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function xI(e,t){var n=wy(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),TI(n)?SI(n):rS(n).Ko()&&EI(n,t))}function _I(e,t){var n=wy(e),r=rS(n);n.Au.delete(t),r.Ko()&&II(n,t),0===n.Au.size&&(r.Ko()?r.jo():CI(n)&&n.bu.set("Unknown"))}function EI(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Uy.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}rS(e).su(t)}function II(e,t){e.Vu.qt(t),rS(e).iu(t)}function SI(e){e.Vu=new $w({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},le:function(t){return e.Au.get(t)||null},ue:function(){return e.datastore.serializer.databaseId}}),rS(e).start(),e.bu.gu()}function TI(e){return CI(e)&&!rS(e).Uo()&&e.Au.size>0}function CI(e){return 0===wy(e).vu.size}function NI(e){e.Vu=void 0}function AI(e){return RI.apply(this,arguments)}function RI(){return(RI=dt(ft().mark((function e(t){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.Au.forEach((function(e,n){EI(t,e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function DI(e,t){return PI.apply(this,arguments)}function PI(){return(PI=dt(ft().mark((function e(t,n){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:NI(t),TI(t)?(t.bu.Iu(n),SI(t)):t.bu.set("Unknown");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function OI(e,t,n){return LI.apply(this,arguments)}function LI(){return LI=dt(ft().mark((function e(t,n,r){var i;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.bu.set("Online"),!(n instanceof Qw&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=dt(ft().mark((function e(t,n){var r,i,a,o;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=F(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.Au.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.Au.delete(o),t.Vu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),vy("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,MI(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Hw?t.Vu.Ht(n):n instanceof Ww?t.Vu.ne(n):t.Vu.Xt(n),r.isEqual(Uy.min())){e.next=29;break}return e.prev=14,e.next=17,NE(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Vu.ce(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.Au.get(t);if(r){e.Au.set(t,r.withResumeToken(ok.EMPTY_BYTE_STRING,r.snapshotVersion)),II(e,t);var i=new Px(r.target,t,n,r.sequenceNumber);EI(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),vy("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,MI(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),LI.apply(this,arguments)}function MI(e,t,n){return FI.apply(this,arguments)}function FI(){return(FI=dt(ft().mark((function e(t,n,r){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(cg(n)){e.next=2;break}throw n;case 2:return t.vu.add(1),e.next=5,bI(t);case 5:t.bu.set("Offline"),r||(r=function(){return NE(t.localStore)}),t.asyncQueue.enqueueRetryable(dt(ft().mark((function e(){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vy("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.vu.delete(1),e.next=6,gI(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jI(e,t){return t().catch((function(n){return MI(e,n,t)}))}function UI(e){return VI.apply(this,arguments)}function VI(){return(VI=dt(ft().mark((function e(t){var n,r,i,a;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=wy(t),r=iS(n),i=n.Eu.length>0?n.Eu[n.Eu.length-1].batchId:-1;case 2:if(!zI(n)){e.next=19;break}return e.prev=3,e.next=6,DE(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.Eu.length&&r.jo(),e.abrupt("break",19);case 10:i=a.batchId,BI(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,MI(n,e.t0);case 17:e.next=2;break;case 19:qI(n)&&KI(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function zI(e){return CI(e)&&e.Eu.length<10}function BI(e,t){e.Eu.push(t);var n=iS(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function qI(e){return CI(e)&&!iS(e).Uo()&&e.Eu.length>0}function KI(e){iS(e).start()}function GI(e){return HI.apply(this,arguments)}function HI(){return(HI=dt(ft().mark((function e(t){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:iS(t).hu();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function WI(e){return QI.apply(this,arguments)}function QI(){return(QI=dt(ft().mark((function e(t){var n,r,i,a;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=iS(t),r=F(t.Eu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.uu(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function YI(e,t,n){return $I.apply(this,arguments)}function $I(){return($I=dt(ft().mark((function e(t,n,r){var i,a;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Eu.shift(),a=Rw.from(i,n,r),e.next=3,jI(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,UI(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function JI(e,t){return XI.apply(this,arguments)}function XI(){return XI=dt(ft().mark((function e(t,n){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&iS(t).ou,!e.t0){e.next=4;break}return e.next=4,function(){var e=dt(ft().mark((function e(t,n){var r,i;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ow(i=n.code)||i===xy.ABORTED){e.next=7;break}return r=t.Eu.shift(),iS(t).Qo(),e.next=5,jI(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,UI(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:qI(t)&&KI(t);case 5:case"end":return e.stop()}}),e)}))),XI.apply(this,arguments)}function ZI(e,t){return eS.apply(this,arguments)}function eS(){return(eS=dt(ft().mark((function e(t,n){var r,i;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=wy(t)).asyncQueue.verifyOperationInProgress(),vy("RemoteStore","RemoteStore received new credentials"),i=CI(r),r.vu.add(3),e.next=6,bI(r);case 6:return i&&r.bu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.vu.delete(3),e.next=12,gI(r);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tS(e,t){return nS.apply(this,arguments)}function nS(){return(nS=dt(ft().mark((function e(t,n){var r;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=wy(t),!n){e.next=7;break}return r.vu.delete(2),e.next=5,gI(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.vu.add(2),e.next=12,bI(r);case 12:r.bu.set("Unknown");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rS(e){return e.Su||(e.Su=function(e,t,n){var r=wy(e);return r.fu(),new dI(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:AI.bind(null,e),ao:DI.bind(null,e),nu:OI.bind(null,e)}),e.Ru.push(function(){var t=dt(ft().mark((function t(n){return ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Su.Qo(),TI(e)?SI(e):e.bu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Su.stop();case 6:NI(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Su}function iS(e){return e.Du||(e.Du=function(e,t,n){var r=wy(e);return r.fu(),new pI(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:GI.bind(null,e),ao:JI.bind(null,e),au:WI.bind(null,e),cu:YI.bind(null,e)}),e.Ru.push(function(){var t=dt(ft().mark((function t(n){return ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Du.Qo(),t.next=4,UI(e);case 4:t.next=9;break;case 6:return t.next=8,e.Du.stop();case 8:e.Eu.length>0&&(vy("RemoteStore","Stopping write stream with ".concat(e.Eu.length," pending writes")),e.Eu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Du}var aS=function(){function e(t,n,r,i,a){_(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Ey,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return T(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new _y(xy.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function oS(e,t){if(my("AsyncQueue","".concat(t,": ").concat(e)),cg(e))return new _y(xy.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var uS=function(){function e(t){_(this,e),this.comparator=t?function(e,n){return t(e,n)||Ky.comparator(e.key,n.key)}:function(e,t){return Ky.comparator(e.key,t.key)},this.keyedMap=Vb(),this.sortedSet=new Xg(this.comparator)}return T(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),sS=function(){function e(){_(this,e),this.Cu=new Xg(Ky.comparator)}return T(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):ky():this.Cu=this.Cu.insert(t,e)}},{key:"xu",value:function(){var e=[];return this.Cu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),cS=function(){function e(t,n,r,i,a,o,u,s,c){_(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return T(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nb(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,uS.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),lS=T((function e(){_(this,e),this.Nu=void 0,this.listeners=[]})),fS=T((function e(){_(this,e),this.queries=new Mb((function(e){return Ab(e)}),Nb),this.onlineState="Unknown",this.ku=new Set}));function hS(e,t){return dS.apply(this,arguments)}function dS(){return dS=dt(ft().mark((function e(t,n){var r,i,a,o,u;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=wy(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new lS),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Nu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=oS(e.t0,"Initialization of query '".concat(Rb(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Mu(r.onlineState),o.Nu&&n.$u(o.Nu)&&gS(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),dS.apply(this,arguments)}function pS(e,t){return vS.apply(this,arguments)}function vS(){return vS=dt(ft().mark((function e(t,n){var r,i,a,o,u;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=wy(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),vS.apply(this,arguments)}function mS(e,t){var n,r=wy(e),i=!1,a=F(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=F(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.$u(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Nu=o}}}catch(f){a.e(f)}finally{a.f()}i&&gS(r)}function yS(e,t,n){var r=wy(e),i=r.queries.get(t);if(i){var a,o=F(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function gS(e){e.ku.forEach((function(e){e.next()}))}var kS=function(){function e(t,n,r){_(this,e),this.query=t,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}return T(e,[{key:"$u",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=F(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new cS(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),a=!0):this.qu(e,this.onlineState)&&(this.Uu(e),a=!0),this.Bu=e,a}},{key:"onError",value:function(e){this.Ou.error(e)}},{key:"Mu",value:function(e){this.onlineState=e;var t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}},{key:"qu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Lu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Uu",value:function(e){e=cS.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}]),e}(),bS=function(){function e(t,n){_(this,e),this.Gu=t,this.byteLength=n}return T(e,[{key:"Qu",value:function(){return"metadata"in this.Gu}}]),e}(),wS=function(){function e(t){_(this,e),this.serializer=t}return T(e,[{key:"rr",value:function(e){return fx(this.serializer,e)}},{key:"ur",value:function(e){return e.metadata.exists?yx(this.serializer,e.document,!1):Uk.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}},{key:"cr",value:function(e){return ux(e)}}]),e}(),xS=function(){function e(t,n,r){_(this,e),this.ju=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=_S(t)}return T(e,[{key:"zu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;var n=zy.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Wu",value:function(e){var t,n=new Map,r=new wS(this.serializer),i=F(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.rr(a.metadata.name),s=F(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Wb()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=dt(ft().mark((function e(){var t,n,r,i,a;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,VE(this.localStore,new wS(this.serializer),this.documents,this.ju.id);case 2:t=e.sent,n=this.Wu(this.documents),r=F(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,BE(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Hu:this.collectionGroups,Ju:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function _S(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var ES=T((function e(t){_(this,e),this.key=t})),IS=T((function e(t){_(this,e),this.key=t})),SS=function(){function e(t,n){_(this,e),this.query=t,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Wb(),this.mutatedKeys=Wb(),this.tc=Ob(t),this.ec=new uS(this.tc)}return T(e,[{key:"nc",get:function(){return this.Yu}},{key:"sc",value:function(e,t){var n=this,r=t?t.ic:new sS,i=t?t.ec:this.ec,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Db(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.rc(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.tc(f,s)>0||c&&n.tc(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{ec:o,ic:r,zi:u,mutatedKeys:a}}},{key:"rc",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;var a=e.ic.xu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ky()}};return n(e)-n(t)}(e.type,t.type)||r.tc(e.doc,t.doc)})),this.oc(n);var o=t?this.uc():[],u=0===this.Zu.size&&this.current?1:0,s=u!==this.Xu;return this.Xu=u,0!==a.length||s?{snapshot:new cS(this.query,e.ec,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}},{key:"Mu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new sS,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}},{key:"ac",value:function(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}},{key:"oc",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Yu=t.Yu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Yu=t.Yu.delete(e)})),this.current=e.current)}},{key:"uc",value:function(){var e=this;if(!this.current)return[];var t=this.Zu;this.Zu=Wb(),this.ec.forEach((function(t){e.ac(t.key)&&(e.Zu=e.Zu.add(t.key))}));var n=[];return t.forEach((function(t){e.Zu.has(t)||n.push(new IS(t))})),this.Zu.forEach((function(e){t.has(e)||n.push(new ES(e))})),n}},{key:"hc",value:function(e){this.Yu=e.ir,this.Zu=Wb();var t=this.sc(e.documents);return this.applyChanges(t,!0)}},{key:"lc",value:function(){return cS.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}]),e}(),TS=T((function e(t,n,r){_(this,e),this.query=t,this.targetId=n,this.view=r})),CS=T((function e(t){_(this,e),this.key=t,this.fc=!1})),NS=function(){function e(t,n,r,i,a,o){_(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new Mb((function(e){return Ab(e)}),Nb),this._c=new Map,this.mc=new Set,this.gc=new Xg(Ky.comparator),this.yc=new Map,this.Ic=new oE,this.Tc={},this.Ec=new Map,this.Ac=L_.Mn(),this.onlineState="Unknown",this.vc=void 0}return T(e,[{key:"isPrimaryClient",get:function(){return!0===this.vc}}]),e}();function AS(e,t){return RS.apply(this,arguments)}function RS(){return RS=dt(ft().mark((function e(t,n){var r,i,a,o,u,s;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=_T(t),!(o=r.wc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.lc(),e.next=15;break;case 6:return e.next=8,PE(r.localStore,Sb(n));case 8:return u=e.sent,s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=13,DS(r,n,i,"current"===s,u.resumeToken);case 13:a=e.sent,r.isPrimaryClient&&xI(r.remoteStore,u);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),RS.apply(this,arguments)}function DS(e,t,n,r,i){return PS.apply(this,arguments)}function PS(){return PS=dt(ft().mark((function e(t,n,r,i,a){var o,u,s,c,l,f;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Rc=function(e,n,r){return function(){var e=dt(ft().mark((function e(t,n,r,i){var a,o,u;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.sc(r),e.t0=a.zi,!e.t0){e.next=6;break}return e.next=5,ME(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.sc(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(ZS(t,n.targetId,u.cc),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,ME(t.localStore,n,!0);case 3:return o=e.sent,u=new SS(n,o.ir),s=u.sc(o.documents),c=Gw.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),ZS(t,r,l.cc),f=new TS(n,r,u),e.abrupt("return",(t.wc.set(n,f),t._c.has(r)?t._c.get(r).push(n):t._c.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),PS.apply(this,arguments)}function OS(e,t){return LS.apply(this,arguments)}function LS(){return(LS=dt(ft().mark((function e(t,n){var r,i,a;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=wy(t),i=r.wc.get(n),!((a=r._c.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r._c.set(i.targetId,a.filter((function(e){return!Nb(e,n)}))),void r.wc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,OE(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),_I(r.remoteStore,i.targetId),JS(r,i.targetId)})).catch(ng);case 9:e.next=14;break;case 11:return JS(r,i.targetId),e.next=14,OE(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function MS(e,t,n){return FS.apply(this,arguments)}function FS(){return FS=dt(ft().mark((function e(t,n,r){var i,a,o;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ET(t),e.prev=1,e.next=4,function(e,t){var n,r,i=wy(e),a=jy.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Wb());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=jb(),s=Wb();return i.Zi.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=F(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=kw(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new xw(c.key,l,jk(l.value.mapValue),dw.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:zb(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Tc[e.currentUser.toKey()];r||(r=new Xg(Ly)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,nT(i,a.changes);case 9:return e.next=11,UI(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=oS(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),FS.apply(this,arguments)}function jS(e,t){return US.apply(this,arguments)}function US(){return(US=dt(ft().mark((function e(t,n){var r,i;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wy(t),e.prev=1,e.next=4,AE(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.yc.get(t);n&&(by(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.fc=!0:e.modifiedDocuments.size>0?by(n.fc):e.removedDocuments.size>0&&(by(n.fc),n.fc=!1))})),e.next=8,nT(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,ng(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function VS(e,t,n){var r=wy(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.wc.forEach((function(e,n){var r=n.view.Mu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=wy(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=F(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Mu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&gS(n)}(r.eventManager,t),i.length&&r.dc.nu(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function zS(e,t,n){return BS.apply(this,arguments)}function BS(){return BS=dt(ft().mark((function e(t,n,r){var i,a,o,u,s,c;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=wy(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.yc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Xg(Ky.comparator)).insert(o,Uk.newNoDocument(o,Uy.min())),s=Wb().add(o),c=new Kw(Uy.min(),new Map,new Xg(Ly),u,s),e.next=9,jS(i,c);case 9:i.gc=i.gc.remove(o),i.yc.delete(n),tT(i),e.next=16;break;case 14:return e.next=16,OE(i.localStore,n,!1).then((function(){return JS(i,n,r)})).catch(ng);case 16:case"end":return e.stop()}}),e)}))),BS.apply(this,arguments)}function qS(e,t){return KS.apply(this,arguments)}function KS(){return(KS=dt(ft().mark((function e(t,n){var r,i,a;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wy(t),i=n.batch.batchId,e.prev=1,e.next=4,CE(r.localStore,n);case 4:return a=e.sent,$S(r,i,null),YS(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,nT(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,ng(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function GS(e,t,n){return HS.apply(this,arguments)}function HS(){return(HS=dt(ft().mark((function e(t,n,r){var i,a;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=wy(t),e.prev=1,e.next=4,function(e,t){var n=wy(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return by(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,$S(i,n,r),YS(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,nT(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,ng(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function WS(e,t){return QS.apply(this,arguments)}function QS(){return(QS=dt(ft().mark((function e(t,n){var r,i,a,o;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return CI((r=wy(t)).remoteStore)||vy("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=wy(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.Ec.get(i)||[]).push(n),r.Ec.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=oS(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}function YS(e,t){(e.Ec.get(t)||[]).forEach((function(e){e.resolve()})),e.Ec.delete(t)}function $S(e,t,n){var r=wy(e),i=r.Tc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function JS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=F(e._c.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.wc.delete(a),n&&e.dc.Pc(a,n)}}catch(o){i.e(o)}finally{i.f()}e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach((function(t){e.Ic.containsKey(t)||XS(e,t)}))}function XS(e,t){e.mc.delete(t.path.canonicalString());var n=e.gc.get(t);null!==n&&(_I(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),tT(e))}function ZS(e,t,n){var r,i=F(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof ES?(e.Ic.addReference(a.key,t),eT(e,a)):a instanceof IS?(vy("SyncEngine","Document no longer in limbo: "+a.key),e.Ic.removeReference(a.key,t),e.Ic.containsKey(a.key)||XS(e,a.key)):ky()}}catch(o){i.e(o)}finally{i.f()}}function eT(e,t){var n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(vy("SyncEngine","New document in limbo: "+n),e.mc.add(r),tT(e))}function tT(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){var t=e.mc.values().next().value;e.mc.delete(t);var n=new Ky(zy.fromString(t)),r=e.Ac.next();e.yc.set(r,new CS(n)),e.gc=e.gc.insert(n,r),xI(e.remoteStore,new Px(Sb(bb(n.path)),r,"TargetPurposeLimboResolution",mg.ct))}}function nT(e,t,n){return rT.apply(this,arguments)}function rT(){return rT=dt(ft().mark((function e(t,n,r){var i,a,o,u;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=wy(t),a=[],o=[],u=[],e.t0=i.wc.isEmpty(),e.t0){e.next=9;break}return i.wc.forEach((function(e,t){u.push(i.Rc(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=xE.Li(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.dc.nu(a),e.next=9,function(){var e=dt(ft().mark((function e(t,n){var r,i,a,o,u,s,c,l;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wy(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return ig.forEach(n,(function(t){return ig.forEach(t.Fi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return ig.forEach(t.Bi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),cg(e.t0)){e.next=10;break}throw e.t0;case 10:vy("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=F(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.Ji.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.Ji=r.Ji.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),rT.apply(this,arguments)}function iT(e,t){return aT.apply(this,arguments)}function aT(){return(aT=dt(ft().mark((function e(t,n){var r,i;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=wy(t)).currentUser.isEqual(n)){e.next=11;break}return vy("SyncEngine","User change. New user:",n.toKey()),e.next=5,SE(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.Ec.forEach((function(e){e.forEach((function(e){e.reject(new _y(xy.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Ec.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,nT(r,i.er);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oT(e,t){var n=wy(e),r=n.yc.get(t);if(r&&r.fc)return Wb().add(r.key);var i=Wb(),a=n._c.get(t);if(!a)return i;var o,u=F(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.wc.get(s);i=i.unionWith(c.view.nc)}}catch(l){u.e(l)}finally{u.f()}return i}function uT(e,t){return sT.apply(this,arguments)}function sT(){return(sT=dt(ft().mark((function e(t,n){var r,i,a;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wy(t),e.next=3,ME(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.hc(i),e.abrupt("return",(r.isPrimaryClient&&ZS(r,n.targetId,a.cc),a));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cT(e,t){return lT.apply(this,arguments)}function lT(){return(lT=dt(ft().mark((function e(t,n){var r;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wy(t),e.abrupt("return",jE(r.localStore,n).then((function(e){return nT(r,e)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fT(e,t,n,r){return hT.apply(this,arguments)}function hT(){return hT=dt(ft().mark((function e(t,n,r,i){var a,o;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=wy(t),e.next=3,function(e,t){var n=wy(e),r=wy(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Sn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):ig.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,UI(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?($S(a,n,i||null),YS(a,n),function(e,t){wy(wy(e).mutationQueue).Cn(t)}(a.localStore,n)):ky();case 11:return e.next=13,nT(a,o);case 13:e.next=16;break;case 15:vy("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),hT.apply(this,arguments)}function dT(e,t){return pT.apply(this,arguments)}function pT(){return(pT=dt(ft().mark((function e(t,n){var r,i,a,o,u,s,c,l;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_T(r=wy(t)),ET(r),!0!==n||!0===r.vc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,vT(r,i.toArray());case 5:return a=e.sent,r.vc=!0,e.next=9,tS(r.remoteStore,!0);case 9:o=F(a);try{for(o.s();!(u=o.n()).done;)s=u.value,xI(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.vc){e.next=25;break}return c=[],l=Promise.resolve(),r._c.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return JS(r,t),OE(r.localStore,t,!0)})),_I(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,vT(r,c);case 21:return function(e){var t=wy(e);t.yc.forEach((function(e,n){_I(t.remoteStore,n)})),t.Ic.Ts(),t.yc=new Map,t.gc=new Xg(Ky.comparator)}(r),r.vc=!1,e.next=25,tS(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vT(e,t,n){return mT.apply(this,arguments)}function mT(){return mT=dt(ft().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,m,y;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=wy(t),a=[],o=[],u=F(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i._c.get(c))||0===f.length){e.next=34;break}return e.next=11,PE(i.localStore,Sb(f[0]));case 11:l=e.sent,h=F(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.wc.get(p),e.next=20,uT(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,FE(i.localStore,c);case 36:return y=e.sent,e.next=39,PE(i.localStore,y);case 39:return l=e.sent,e.next=42,DS(i,yT(y),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.dc.nu(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),mT.apply(this,arguments)}function yT(e){return kb(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function gT(e){var t=wy(e);return wy(wy(t.localStore).persistence).$i()}function kT(e,t,n,r){return bT.apply(this,arguments)}function bT(){return bT=dt(ft().mark((function e(t,n,r,i){var a,o,u,s;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=wy(t)).vc){e.next=3;break}return e.abrupt("return",void vy("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a._c.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,jE(a.localStore,Pb(o[0]));case 10:return u=e.sent,s=Kw.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,ok.EMPTY_BYTE_STRING),e.next=14,nT(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,OE(a.localStore,n,!0);case 17:return JS(a,n,i),e.abrupt("break",20);case 19:ky();case 20:case"end":return e.stop()}}),e)}))),bT.apply(this,arguments)}function wT(e,t,n){return xT.apply(this,arguments)}function xT(){return(xT=dt(ft().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=_T(t)).vc){e.next=45;break}a=F(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i._c.has(u)){e.next=10;break}return vy("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,FE(i.localStore,u);case 12:return s=e.sent,e.next=15,PE(i.localStore,s);case 15:return c=e.sent,e.next=18,DS(i,yT(s),c.targetId,!1,c.resumeToken);case 18:xI(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=F(r),e.prev=30,h=ft().mark((function e(){var t;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i._c.has(t),!e.t0){e.next=5;break}return e.next=5,OE(i.localStore,t,!1).then((function(){_I(i.remoteStore,t),JS(i,t)})).catch(ng);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])})))).apply(this,arguments)}function _T(e){var t=wy(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=jS.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=oT.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=zS.bind(null,t),t.dc.nu=mS.bind(null,t.eventManager),t.dc.Pc=yS.bind(null,t.eventManager),t}function ET(e){var t=wy(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=qS.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=GS.bind(null,t),t}function IT(e,t,n){var r=wy(e);(function(){var e=dt(ft().mark((function e(t,n,r){var i,a,o,u,s;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=wy(e),r=ux(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.qs.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(_S(i)),a=new xS(i,t.localStore,n.serializer),e.next=15,n.bc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.zu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.bc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,nT(t,s.Ju,void 0);case 31:return e.next=33,function(e,t){var n=wy(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.qs.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Hu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(yy("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var ST=function(){function e(){_(this,e),this.synchronizeTabs=!1}return T(e,[{key:"initialize",value:function(){var e=dt(ft().mark((function e(t){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=lI(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return IE(this.persistence,new _E,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new hE(pE.zs,this.serializer)}},{key:"createSharedClientState",value:function(e){return new ZE}},{key:"terminate",value:function(){var e=dt(ft().mark((function e(){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),TT=function(e){N(n,e);var t=P(n);function n(e,r,i){var a;return _(this,n),(a=t.call(this)).Vc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return T(n,[{key:"initialize",value:function(){var e=dt(ft().mark((function e(t){var r=this;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fa(A(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Vc.initialize(this,t);case 4:return e.next=6,ET(this.Vc.syncEngine);case 6:return e.next=8,UI(this.Vc.remoteStore);case 8:return e.next=10,this.persistence.Ii((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return IE(this.persistence,new _E,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new B_(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new vg(t,this.persistence);return new pg(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=wE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?T_.withCacheSize(this.cacheSizeBytes):T_.DEFAULT;return new gE(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,sI(),cI(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new ZE}}]),n}(ST),CT=function(e){N(n,e);var t=P(n);function n(e,r){var i;return _(this,n),(i=t.call(this,e,r,!1)).Vc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return T(n,[{key:"initialize",value:function(){var e=dt(ft().mark((function e(t){var r,i=this;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fa(A(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Vc.syncEngine,e.t0=this.sharedClientState instanceof XE,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={jr:fT.bind(null,r),zr:kT.bind(null,r),Wr:wT.bind(null,r),$i:gT.bind(null,r),Qr:cT.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Ii(function(){var e=dt(ft().mark((function e(t){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dT(i.Vc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=sI();if(!XE.D(t))throw new _y(xy.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=wE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new XE(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(TT),NT=function(){function e(){_(this,e)}return T(e,[{key:"initialize",value:function(){var e=dt(ft().mark((function e(t,n){var r=this;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return VS(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=iT.bind(null,this.syncEngine),e.next=12,tS(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new fS}},{key:"createDatastore",value:function(e){var t,n=lI(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new uI(t));return function(e,t,n,r){return new vI(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return VS(o.syncEngine,e,0)},a=tI.D()?new tI:new eI,new yI(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new NS(e,t,n,r,i,a);return o&&(u.vc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=dt(ft().mark((function e(t){var n;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=wy(t),vy("RemoteStore","RemoteStore shutting down."),n.vu.add(5),e.next=5,bI(n);case 5:n.Pu.shutdown(),n.bu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function AT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return dt(ft().mark((function r(){var i;return ft().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return dt(ft().mark((function e(){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var RT=function(){function e(t){_(this,e),this.observer=t,this.muted=!1}return T(e,[{key:"next",value:function(e){this.observer.next&&this.Sc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Sc(this.observer.error,e):my("Uncaught Error in snapshot listener:",e.toString())}},{key:"Dc",value:function(){this.muted=!0}},{key:"Sc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),DT=function(){function e(t,n){var r=this;_(this,e),this.Cc=t,this.serializer=n,this.metadata=new Ey,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then((function(e){e&&e.Qu()?r.metadata.resolve(e.Gu.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Gu))))}),(function(e){return r.metadata.reject(e)}))}return T(e,[{key:"close",value:function(){return this.Cc.cancel()}},{key:"getMetadata",value:function(){var e=dt(ft().mark((function e(){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bc",value:function(){var e=dt(ft().mark((function e(){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Nc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Nc",value:function(){var e=dt(ft().mark((function e(){var t,n,r,i;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.kc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.xc.decode(t),r=Number(n),isNaN(r)&&this.Mc("length string (".concat(n,") is not valid number")),e.next=9,this.$c(r);case 9:return i=e.sent,e.abrupt("return",new bS(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"kc",value:function(){var e=dt(ft().mark((function e(){var t,n;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Oc()<0)){e.next=7;break}return e.next=3,this.Fc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Oc())<0&&this.Mc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"$c",value:function(){var e=dt(ft().mark((function e(t){var n;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Fc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Mc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.xc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Mc",value:function(e){throw this.Cc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Fc",value:function(){var e=dt(ft().mark((function e(){var t,n;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Cc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),PT=function(){function e(t){_(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return T(e,[{key:"lookup",value:function(){var e=dt(ft().mark((function e(t){var n,r=this;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new _y(xy.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=dt(ft().mark((function e(t,n){var r,i,a,o,u,s;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wy(t),i=px(r.serializer)+"/documents",a={documents:n.map((function(e){return lx(r.serializer,e)}))},e.next=5,r.vo("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=gx(r.serializer,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());by(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Cw(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=dt(ft().mark((function e(){var t,n=this;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Ky.fromPath(t);n.mutations.push(new Nw(r,n.precondition(r)))})),e.next=7,function(){var e=dt(ft().mark((function e(t,n){var r,i,a;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wy(t),i=px(r.serializer)+"/documents",a={writes:n.map((function(e){return kx(r.serializer,e)}))},e.next=3,r.Io("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ky();t=Uy.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new _y(xy.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Uy.min())?dw.exists(!1):dw.updateTime(t):dw.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Uy.min()))throw new _y(xy.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return dw.updateTime(t)}return dw.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),OT=function(){function e(t,n,r,i,a){_(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Bc=r.maxAttempts,this.qo=new fI(this.asyncQueue,"transaction_retry")}return T(e,[{key:"run",value:function(){this.Bc-=1,this.Lc()}},{key:"Lc",value:function(){var e=this;this.qo.No(dt(ft().mark((function t(){var n,r;return ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new PT(e.datastore),(r=e.qc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Uc(t)}))}))})).catch((function(t){e.Uc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"qc",value:function(e){try{var t=this.updateFunction(e);return!yg(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Uc",value:function(e){var t=this;this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Lc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Kc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Ow(t)}return!1}}]),e}(),LT=function(){function e(t,n,r,i){var a=this;_(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=fy.UNAUTHENTICATED,this.clientId=Oy.A(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=dt(ft().mark((function e(t){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vy("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return vy("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return T(e,[{key:"getConfiguration",value:function(){var e=dt(ft().mark((function e(){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new _y(xy.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Ey;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(dt(ft().mark((function n(){var r;return ft().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=oS(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function MT(e,t){return FT.apply(this,arguments)}function FT(){return FT=dt(ft().mark((function e(t,n){var r,i;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),vy("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=dt(ft().mark((function e(t){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,SE(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),FT.apply(this,arguments)}function jT(e,t){return UT.apply(this,arguments)}function UT(){return(UT=dt(ft().mark((function e(t,n){var r,i;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,zT(t);case 3:return r=e.sent,vy("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return ZI(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return ZI(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function VT(e){return"FirebaseError"===e.name?e.code===xy.FAILED_PRECONDITION||e.code===xy.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function zT(e){return BT.apply(this,arguments)}function BT(){return(BT=dt(ft().mark((function e(t){var n;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return vy("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,MT(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),VT(n=e.t0)){e.next=13;break}throw n;case 13:return yy("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,MT(t,new ST);case 16:e.next=21;break;case 18:return vy("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,MT(t,new ST);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}function qT(e){return KT.apply(this,arguments)}function KT(){return(KT=dt(ft().mark((function e(t){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return vy("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,jT(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return vy("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,jT(t,new NT);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function GT(e){return zT(e).then((function(e){return e.persistence}))}function HT(e){return zT(e).then((function(e){return e.localStore}))}function WT(e){return qT(e).then((function(e){return e.remoteStore}))}function QT(e){return qT(e).then((function(e){return e.syncEngine}))}function YT(e){return qT(e).then((function(e){return e.datastore}))}function $T(e){return JT.apply(this,arguments)}function JT(){return(JT=dt(ft().mark((function e(t){var n,r;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qT(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=AS.bind(null,n.syncEngine),r.onUnlisten=OS.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function XT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Ey;return e.asyncQueue.enqueueAndForget(dt(ft().mark((function i(){return ft().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new RT({next:function(a){t.enqueueAndForget((function(){return pS(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new _y(xy.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new _y(xy.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new kS(bb(n.path),a,{includeMetadataChanges:!0,Ku:!0});return hS(e,o)},i.next=3,$T(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function ZT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Ey;return e.asyncQueue.enqueueAndForget(dt(ft().mark((function i(){return ft().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new RT({next:function(n){t.enqueueAndForget((function(){return pS(e,o)})),n.fromCache&&"server"===r.source?i.reject(new _y(xy.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new kS(n,a,{includeMetadataChanges:!0,Ku:!0});return hS(e,o)},i.next=3,$T(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function eC(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}var tC=new Map;function nC(e,t,n){if(!n)throw new _y(xy.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function rC(e,t,n,r){if(!0===t&&!0===r)throw new _y(xy.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function iC(e){if(!Ky.isDocumentKey(e))throw new _y(xy.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function aC(e){if(Ky.isDocumentKey(e))throw new _y(xy.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function oC(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":ky()}function uC(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new _y(xy.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=oC(e);throw new _y(xy.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function sC(e,t){if(t<=0)throw new _y(xy.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var cC=function(){function e(t){var n,r;if(_(this,e),void 0===t.host){if(void 0!==t.ssl)throw new _y(xy.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new _y(xy.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}rC("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eC(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new _y(xy.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new _y(xy.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new _y(xy.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}return T(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}]),e}(),lC=function(){function e(t,n,r,i){_(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cC({}),this._settingsFrozen=!1}return T(e,[{key:"app",get:function(){if(!this._app)throw new _y(xy.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new _y(xy.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cC(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Sy;switch(e.type){case"firstParty":return new Ay(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new _y(xy.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=tC.get(e);t&&(vy("ComponentProvider","Removing Datastore"),tC.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function fC(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=uC(e,lC))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==a.host&&a.host!==o&&yy("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),i.mockUserToken){var u,s;if("string"==typeof i.mockUserToken)u=i.mockUserToken,s=fy.MOCK_USER;else{u=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[cr(JSON.stringify({alg:"none",type:"JWT"})),cr(JSON.stringify(a)),""].join(".")}(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new _y(xy.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new fy(c)}e._authCredentials=new Ty(new Iy(u,s))}}var hC=function(){function e(t,n,r){_(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return T(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new pC(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),dC=function(){function e(t,n,r){_(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return T(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),pC=function(e){N(n,e);var t=P(n);function n(e,r,i){var a;return _(this,n),(a=t.call(this,e,r,bb(i)))._path=i,a.type="collection",a}return T(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new hC(this.firestore,null,new Ky(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(dC);function vC(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Lr(e),nC("collection","path",t),e instanceof lC){var a=zy.fromString.apply(zy,[t].concat(r));return aC(a),new pC(e,null,a)}if(!(e instanceof hC||e instanceof pC))throw new _y(xy.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(zy.fromString.apply(zy,[t].concat(r)));return aC(o),new pC(e.firestore,null,o)}function mC(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Lr(e),1===arguments.length&&(t=Oy.A()),nC("doc","path",t),e instanceof lC){var a=zy.fromString.apply(zy,[t].concat(r));return iC(a),new hC(e,null,new Ky(a))}if(!(e instanceof hC||e instanceof pC))throw new _y(xy.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(zy.fromString.apply(zy,[t].concat(r)));return iC(o),new hC(e.firestore,e instanceof pC?e.converter:null,new Ky(o))}function yC(e,t){return e=Lr(e),t=Lr(t),(e instanceof hC||e instanceof pC)&&(t instanceof hC||t instanceof pC)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function gC(e,t){return e=Lr(e),t=Lr(t),e instanceof dC&&t instanceof dC&&e.firestore===t.firestore&&Nb(e._query,t._query)&&e.converter===t.converter}var kC=function(){function e(){var t=this;_(this,e),this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new fI(this,"async_queue_retry"),this.Xc=function(){var e=cI();e&&vy("AsyncQueue","Visibility state changed to "+e.visibilityState),t.qo.Mo()};var n=cI();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Xc)}return T(e,[{key:"isShuttingDown",get:function(){return this.jc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Zc(),this.ta(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;var t=cI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Zc(),this.jc)return new Promise((function(){}));var n=new Ey;return this.ta((function(){return t.jc&&t.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Qc.push(e),t.ea()}))}},{key:"ea",value:function(){var e=dt(ft().mark((function e(){var t=this;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Qc.length){e.next=14;break}return e.prev=1,e.next=4,this.Qc[0]();case 4:this.Qc.shift(),this.qo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),cg(e.t0)){e.next=12;break}throw e.t0;case 12:vy("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Qc.length>0&&this.qo.No((function(){return t.ea()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"ta",value:function(e){var t=this,n=this.Gc.then((function(){return t.Hc=!0,e().catch((function(e){t.Wc=e,t.Hc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw my("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Hc=!1,e}))}));return this.Gc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);var i=aS.createAndSchedule(this,e,t,n,(function(e){return r.na(e)}));return this.zc.push(i),i}},{key:"Zc",value:function(){this.Wc&&ky()}},{key:"verifyOperationInProgress",value:function(){}},{key:"sa",value:function(){var e=dt(ft().mark((function e(){var t;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Gc,e.next=3,t;case 3:if(t!==this.Gc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ia",value:function(e){var t,n=F(this.zc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ra",value:function(e){var t=this;return this.sa().then((function(){t.zc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=F(t.zc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.sa()}))}},{key:"oa",value:function(e){this.Yc.push(e)}},{key:"na",value:function(e){var t=this.zc.indexOf(e);this.zc.splice(t,1)}}]),e}();function bC(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=F(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var wC=function(){function e(){_(this,e),this._progressObserver={},this._taskCompletionResolver=new Ey,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return T(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),xC=function(e){N(n,e);var t=P(n);function n(e,r,i,a){var o;return _(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new kC,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return T(n,[{key:"_terminate",value:function(){return this._firestoreClient||EC(this),this._firestoreClient.terminate()}}]),n}(lC);function _C(e){return e._firestoreClient||EC(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function EC(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new pk(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,eC(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new LT(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function IC(e,t,n){var r=new Ey;return e.asyncQueue.enqueue(dt(ft().mark((function i(){var a;return ft().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,MT(e,n);case 3:return i.next=5,jT(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),VT(a=i.t0)){i.next=13;break}throw a;case 13:yy("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function SC(e){return function(e){return e.asyncQueue.enqueue(dt(ft().mark((function t(){var n,r;return ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,GT(e);case 2:return n=t.sent,t.next=5,WT(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=wy(e);return t.vu.delete(0),gI(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(_C(e=uC(e,xC)))}function TC(e){return function(e){return e.asyncQueue.enqueue(dt(ft().mark((function t(){var n,r;return ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,GT(e);case 2:return n=t.sent,t.next=5,WT(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=dt(ft().mark((function e(t){var n;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=wy(t)).vu.add(0),e.next=4,bI(n);case 4:n.bu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(_C(e=uC(e,xC)))}function CC(e,t){var n=_C(e=uC(e,xC)),r=new wC;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new DT(e,t)}(function(e,t){if(e instanceof Uint8Array)return AT(e,t);if(e instanceof ArrayBuffer)return AT(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?jw().encode(e):e),t)}(n,lI(t));e.asyncQueue.enqueueAndForget(dt(ft().mark((function t(){return ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=IT,t.next=3,QT(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function NC(e,t){return function(e,t){return e.asyncQueue.enqueue(dt(ft().mark((function n(){return ft().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=wy(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.qs.getNamedQuery(e,t)}))},n.next=3,HT(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(_C(e=uC(e,xC)),t).then((function(t){return t?new dC(e,null,t.query):null}))}function AC(e){if(e._initialized||e._terminated)throw new _y(xy.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var RC=function(){function e(t){_(this,e),this._byteString=t}return T(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(ok.fromBase64String(t))}catch(t){throw new _y(xy.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(ok.fromUint8Array(t))}}]),e}(),DC=function(){function e(){_(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new _y(xy.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qy(n)}return T(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var PC=T((function e(t){_(this,e),this._methodName=t})),OC=function(){function e(t,n){if(_(this,e),!isFinite(t)||t<-90||t>90)throw new _y(xy.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new _y(xy.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return T(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Ly(this._lat,e._lat)||Ly(this._long,e._long)}}]),e}(),LC=/^__.*__$/,MC=function(){function e(t,n,r){_(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return T(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new xw(e,this.data,this.fieldMask,t,this.fieldTransforms):new ww(e,this.data,t,this.fieldTransforms)}}]),e}(),FC=function(){function e(t,n,r){_(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return T(e,[{key:"toMutation",value:function(e,t){return new xw(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function jC(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ky()}}var UC=function(){function e(t,n,r,i,a,o){_(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ua(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return T(e,[{key:"path",get:function(){return this.settings.path}},{key:"ca",get:function(){return this.settings.ca}},{key:"aa",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ha",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}},{key:"da",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}},{key:"wa",value:function(e){return this.aa({path:void 0,la:!0})}},{key:"_a",value:function(e){return aN(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"ua",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.fa(this.path.get(e))}},{key:"fa",value:function(e){if(0===e.length)throw this._a("Document fields must not be empty");if(jC(this.ca)&&LC.test(e))throw this._a('Document fields cannot begin and end with "__"')}}]),e}(),VC=function(){function e(t,n,r){_(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||lI(t)}return T(e,[{key:"ya",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new UC({ca:e,methodName:t,ga:n,path:qy.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function zC(e){var t=e._freezeSettings(),n=lI(e._databaseId);return new VC(e._databaseId,!!t.ignoreUndefinedProperties,n)}function BC(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ya(a.merge||a.mergeFields?2:0,t,n,i);tN("Data must be an object, but it was:",o,r);var u,s,c=ZC(r,o);if(a.merge)u=new ik(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=F(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=nN(t,l.value,n);if(!o.contains(d))throw new _y(xy.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));oN(f,d)||f.push(d)}}catch(p){h.e(p)}finally{h.f()}u=new ik(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new MC(new Fk(c),u,s)}var qC=function(e){N(n,e);var t=P(n);function n(){return _(this,n),t.apply(this,arguments)}return T(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ca)throw 1===e.ca?e._a("".concat(this._methodName,"() can only appear at the top level of your update data")):e._a("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(PC);function KC(e,t,n){return new UC({ca:3,ga:t.settings.ga,methodName:e._methodName,la:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var GC=function(e){N(n,e);var t=P(n);function n(){return _(this,n),t.apply(this,arguments)}return T(n,[{key:"_toFieldTransform",value:function(e){return new fw(e.path,new rw)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(PC),HC=function(e){N(n,e);var t=P(n);function n(e,r){var i;return _(this,n),(i=t.call(this,e)).pa=r,i}return T(n,[{key:"_toFieldTransform",value:function(e){var t=KC(this,e,!0),n=this.pa.map((function(e){return XC(e,t)})),r=new iw(n);return new fw(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(PC),WC=function(e){N(n,e);var t=P(n);function n(e,r){var i;return _(this,n),(i=t.call(this,e)).pa=r,i}return T(n,[{key:"_toFieldTransform",value:function(e){var t=KC(this,e,!0),n=this.pa.map((function(e){return XC(e,t)})),r=new ow(n);return new fw(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(PC),QC=function(e){N(n,e);var t=P(n);function n(e,r){var i;return _(this,n),(i=t.call(this,e)).Ia=r,i}return T(n,[{key:"_toFieldTransform",value:function(e){var t=new sw(e.serializer,Xb(e.serializer,this.Ia));return new fw(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(PC);function YC(e,t,n,r){var i=e.ya(1,t,n);tN("Data must be an object, but it was:",i,r);var a=[],o=Fk.empty();$g(r,(function(e,r){var u=iN(t,e,n);r=Lr(r);var s=i.da(u);if(r instanceof qC)a.push(u);else{var c=XC(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new ik(a);return new FC(o,u,i.fieldTransforms)}function $C(e,t,n,r,i,a){var o=e.ya(1,t,n),u=[nN(t,r,n)],s=[i];if(a.length%2!=0)throw new _y(xy.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(nN(t,a[c])),s.push(a[c+1]);for(var l=[],f=Fk.empty(),h=u.length-1;h>=0;--h)if(!oN(l,u[h])){var d=u[h],p=s[h];p=Lr(p);var v=o.da(d);if(p instanceof qC)l.push(d);else{var m=XC(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new ik(l);return new FC(f,y,o.fieldTransforms)}function JC(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return XC(n,e.ya(r?4:3,t))}function XC(e,t){if(eN(e=Lr(e)))return tN("Unsupported field value:",t,e),ZC(e,t);if(e instanceof PC)return function(e,t){if(!jC(t.ca))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=F(e);try{for(a.s();!(n=a.n()).done;){var o=XC(n.value,t.wa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Lr(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Xb(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=jy.fromDate(e);return{timestampValue:ix(t.serializer,n)}}if(e instanceof jy){var r=new jy(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:ix(t.serializer,r)}}if(e instanceof OC)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof RC)return{bytesValue:ax(t.serializer,e._byteString)};if(e instanceof hC){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t._a("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:sx(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(oC(e)))}(e,t)}function ZC(e,t){var n={};return Jg(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):$g(e,(function(e,r){var i=XC(r,t.ha(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function eN(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof jy||e instanceof OC||e instanceof RC||e instanceof hC||e instanceof PC)}function tN(e,t,n){if(!eN(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=oC(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function nN(e,t,n){if((t=Lr(t))instanceof DC)return t._internalPath;if("string"==typeof t)return iN(e,t);throw aN("Field path arguments must be of type string or ",e,!1,void 0,n)}var rN=new RegExp("[~\\*/\\[\\]]");function iN(e,t,n){if(t.search(rN)>=0)throw aN("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return O(DC,x(t.split(".")))._internalPath}catch(r){throw aN("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function aN(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new _y(xy.INVALID_ARGUMENT,u+e+s)}function oN(e,t){return e.some((function(e){return e.isEqual(t)}))}var uN=function(){function e(t,n,r,i,a){_(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return T(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new hC(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new sN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(cN("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),sN=function(e){N(n,e);var t=P(n);function n(){return _(this,n),t.apply(this,arguments)}return T(n,[{key:"data",value:function(){return fa(A(n.prototype),"data",this).call(this)}}]),n}(uN);function cN(e,t){return"string"==typeof t?iN(e,t):t instanceof DC?t._internalPath:t._delegate._internalPath}function lN(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new _y(xy.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var fN=T((function e(){_(this,e)})),hN=function(e){N(n,e);var t=P(n);function n(){return _(this,n),t.apply(this,arguments)}return T(n)}(fN);function dN(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof fN&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof vN})).length,n=e.filter((function(e){return e instanceof pN})).length;if(t>1||t>0&&n>0)throw new _y(xy.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=F(n);try{for(u.s();!(o=u.n()).done;){e=o.value._apply(e)}}catch(s){u.e(s)}finally{u.f()}return e}var pN=function(e){N(n,e);var t=P(n);function n(e,r,i){var a;return _(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return T(n,[{key:"_apply",value:function(e){var t=this._parse(e);return TN(e._query,t),new dC(e.firestore,e.converter,Tb(e._query,t))}},{key:"_parse",value:function(e){var t=zC(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new _y(xy.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){SN(o,a);var s,c=[],l=F(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(IN(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=IN(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||SN(o,a),u=JC(n,"where",o,"in"===a||"not-in"===a);return Hk.create(i,a,u)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(hN);var vN=function(e){N(n,e);var t=P(n);function n(e,r){var i;return _(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return T(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:Wk.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=F(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;TN(r,a),r=Tb(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new dC(e.firestore,e.converter,Tb(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(fN);var mN=function(e){N(n,e);var t=P(n);function n(e,r){var i;return _(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return T(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new _y(xy.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new _y(xy.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new qk(t,n);return function(e,t){if(null===xb(e)){var n=_b(e);null!==n&&CN(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new dC(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new gb(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(hN);var yN=function(e){N(n,e);var t=P(n);function n(e,r,i){var a;return _(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return T(n,[{key:"_apply",value:function(e){return new dC(e.firestore,e.converter,Cb(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(hN);var gN=function(e){N(n,e);var t=P(n);function n(e,r,i){var a;return _(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return T(n,[{key:"_apply",value:function(e){var t=EN(e,this.type,this._docOrFields,this._inclusive);return new dC(e.firestore,e.converter,function(e,t){return new gb(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(hN);function kN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return gN._create("startAt",t,!0)}function bN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return gN._create("startAfter",t,!1)}var wN=function(e){N(n,e);var t=P(n);function n(e,r,i){var a;return _(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return T(n,[{key:"_apply",value:function(e){var t=EN(e,this.type,this._docOrFields,this._inclusive);return new dC(e.firestore,e.converter,function(e,t){return new gb(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(hN);function xN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return wN._create("endBefore",t,!1)}function _N(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return wN._create("endAt",t,!0)}function EN(e,t,n,r){if(n[0]=Lr(n[0]),n[0]instanceof uN)return function(e,t,n,r,i){if(!r)throw new _y(xy.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=F(Ib(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(Ik(t,r.key));else{var c=r.data.field(s.field);if(fk(c))throw new _y(xy.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new _y(xy.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new Vk(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=zC(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new _y(xy.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new _y(xy.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Eb(e)&&-1!==c.indexOf("/"))throw new _y(xy.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(zy.fromString(c));if(!Ky.isDocumentKey(l))throw new _y(xy.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Ky(l);u.push(Ik(t,f))}else{var h=JC(n,r,c);u.push(h)}}return new Vk(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function IN(e,t,n){if("string"==typeof(n=Lr(n))){if(""===n)throw new _y(xy.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Eb(t)&&-1!==n.indexOf("/"))throw new _y(xy.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(zy.fromString(n));if(!Ky.isDocumentKey(r))throw new _y(xy.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Ik(e,new Ky(r))}if(n instanceof hC)return Ik(e,n._key);throw new _y(xy.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(oC(n),"."))}function SN(e,t){if(!Array.isArray(e)||0===e.length)throw new _y(xy.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function TN(e,t){if(t.isInequality()){var n=_b(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new _y(xy.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=xb(e);null!==i&&CN(e,r,i)}var a=function(e,t){var n,r=F(e);try{for(r.s();!(n=r.n()).done;){var i,a=F(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new _y(xy.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new _y(xy.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function CN(e,t,n){if(!n.isEqual(t))throw new _y(xy.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var NN=function(){function e(){_(this,e)}return T(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(gk(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ck(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(lk(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ky()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return $g(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new OC(ck(e.latitude),ck(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=hk(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(dk(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=sk(e);return new jy(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=zy.fromString(e);by(Dx(n));var r=new vk(n.get(1),n.get(3)),i=new Ky(n.popFirst(5));return r.isEqual(t)||my("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function AN(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var RN=function(e){N(n,e);var t=P(n);function n(e){var r;return _(this,n),(r=t.call(this)).firestore=e,r}return T(n,[{key:"convertBytes",value:function(e){return new RC(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new hC(this.firestore,null,t)}}]),n}(NN);var DN=function(){function e(t,n){_(this,e),this.hasPendingWrites=t,this.fromCache=n}return T(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),PN=function(e){N(n,e);var t=P(n);function n(e,r,i,a,o,u){var s;return _(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return T(n,[{key:"exists",value:function(){return fa(A(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new ON(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(cN("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(uN),ON=function(e){N(n,e);var t=P(n);function n(){return _(this,n),t.apply(this,arguments)}return T(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return fa(A(n.prototype),"data",this).call(this,e)}}]),n}(PN),LN=function(){function e(t,n,r,i){_(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new DN(i.hasPendingWrites,i.fromCache),this.query=r}return T(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new ON(n._firestore,n._userDataWriter,r.key,r,new DN(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new _y(xy.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new ON(e._firestore,e._userDataWriter,t.doc.key,t.doc,new DN(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new ON(e._firestore,e._userDataWriter,t.doc.key,t.doc,new DN(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:MN(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function MN(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ky()}}function FN(e,t){return e instanceof PN&&t instanceof PN?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof LN&&t instanceof LN&&e._firestore===t._firestore&&gC(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var jN=function(e){N(n,e);var t=P(n);function n(e){var r;return _(this,n),(r=t.call(this)).firestore=e,r}return T(n,[{key:"convertBytes",value:function(e){return new RC(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new hC(this.firestore,null,t)}}]),n}(NN);function UN(e){e=uC(e,hC);var t=uC(e.firestore,xC),n=_C(t),r=new jN(t);return function(e,t){var n=new Ey;return e.asyncQueue.enqueueAndForget(dt(ft().mark((function r(){return ft().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=dt(ft().mark((function e(t,n,r){var i,a;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=wy(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new _y(xy.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=oS(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,HT(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new PN(t,r,e._key,n,new DN(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function VN(e){e=uC(e,dC);var t=uC(e.firestore,xC),n=_C(t),r=new jN(t);return function(e,t){var n=new Ey;return e.asyncQueue.enqueueAndForget(dt(ft().mark((function r(){return ft().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=dt(ft().mark((function e(t,n,r){var i,a,o,u,s;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ME(t,n,!0);case 3:i=e.sent,a=new SS(n,i.ir),o=a.sc(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=oS(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,HT(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new LN(t,r,e,n)}))}function zN(e,t,n){e=uC(e,hC);var r=uC(e.firestore,xC),i=AN(e.converter,t,n);return GN(r,[BC(zC(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,dw.none())])}function BN(e,t,n){e=uC(e,hC);for(var r=uC(e.firestore,xC),i=zC(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return GN(r,[("string"==typeof(t=Lr(t))||t instanceof DC?$C(i,"updateDoc",e._key,t,n,o):YC(i,"updateDoc",e._key,t)).toMutation(e._key,dw.exists(!0))])}function qN(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Lr(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||bC(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(bC(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof hC)l=uC(e.firestore,xC),f=bb(e._key.path),c={next:function(t){n[s]&&n[s](HN(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=uC(e,dC);l=uC(p.firestore,xC),f=p._query;var v=new jN(l);c={next:function(e){n[s]&&n[s](new LN(l,v,p,e))},error:n[s+1],complete:n[s+2]},lN(e._query)}return function(e,t,n,r){var i=new RT(r),a=new kS(t,i,n);return e.asyncQueue.enqueueAndForget(dt(ft().mark((function t(){return ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=hS,t.next=3,$T(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Dc(),e.asyncQueue.enqueueAndForget(dt(ft().mark((function t(){return ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=pS,t.next=3,$T(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(_C(l),f,h,c)}function KN(e,t){return function(e,t){var n=new RT(t);return e.asyncQueue.enqueueAndForget(dt(ft().mark((function t(){return ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){wy(e).ku.add(t),t.next()},t.next=3,$T(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Dc(),e.asyncQueue.enqueueAndForget(dt(ft().mark((function t(){return ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){wy(e).ku.delete(t)},t.next=3,$T(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(_C(e=uC(e,xC)),bC(t)?t:{next:t})}function GN(e,t){return function(e,t){var n=new Ey;return e.asyncQueue.enqueueAndForget(dt(ft().mark((function r(){return ft().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=MS,r.next=3,QT(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(_C(e),t)}function HN(e,t,n){var r=n.docs.get(t._key),i=new jN(e);return new PN(e,i,t._key,r,new DN(n.hasPendingWrites,n.fromCache),t.converter)}var WN={maxAttempts:5},QN=function(){function e(t,n){_(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=zC(t)}return T(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=YN(e,this._firestore),i=AN(r.converter,t,n),a=BC(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,dw.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=YN(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Lr(t))||t instanceof DC?$C(this._dataReader,"WriteBatch.update",i._key,t,n,o):YC(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,dw.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=YN(e,this._firestore);return this._mutations=this._mutations.concat(new Cw(t._key,dw.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new _y(xy.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function YN(e,t){if((e=Lr(e)).firestore!==t)throw new _y(xy.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var $N=function(e){N(n,e);var t=P(n);function n(e,r){var i;return _(this,n),(i=t.call(this,e,r))._firestore=e,i}return T(n,[{key:"get",value:function(e){var t=this,r=YN(e,this._firestore),i=new jN(this._firestore);return fa(A(n.prototype),"get",this).call(this,e).then((function(e){return new PN(t._firestore,i,r._key,e._document,new DN(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){_(this,e),this._firestore=t,this._transaction=n,this._dataReader=zC(t)}return T(e,[{key:"get",value:function(e){var t=this,n=YN(e,this._firestore),r=new RN(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return ky();var i=e[0];if(i.isFoundDocument())return new uN(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new uN(t._firestore,r,n._key,null,n.converter);throw ky()}))}},{key:"set",value:function(e,t,n){var r=YN(e,this._firestore),i=AN(r.converter,t,n),a=BC(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=YN(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Lr(t))||t instanceof DC?$C(this._dataReader,"Transaction.update",i._key,t,n,o):YC(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=YN(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function JN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new HC("arrayUnion",t)}function XN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new WC("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){hy=e}(Di),Ii(new Mr("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new xC(new Cy(e.getProvider("auth-internal")),new Dy(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new _y(xy.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vk(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),ji(ly,"3.13.0",e),ji(ly,"3.13.0","esm2017")}();function ZN(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new _y("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function eA(){if("undefined"===typeof Uint8Array)throw new _y("unimplemented","Uint8Arrays are not available in this environment.")}function tA(){if("undefined"==typeof atob)throw new _y("unimplemented","Blobs are unavailable in Firestore in this environment.")}var nA=function(){function e(t){_(this,e),this._delegate=t}return T(e,[{key:"toBase64",value:function(){return tA(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return eA(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return tA(),new e(RC.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return eA(),new e(RC.fromUint8Array(t))}}]),e}();function rA(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=F(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var iA=function(){function e(){_(this,e)}return T(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){AC(e=uC(e,xC));var n=_C(e);if(n._uninitializedComponentsProvider)throw new _y(xy.FAILED_PRECONDITION,"SDK cache is already specified.");yy("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new NT;return IC(n,i,new TT(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){AC(e=uC(e,xC));var t=_C(e);if(t._uninitializedComponentsProvider)throw new _y(xy.FAILED_PRECONDITION,"SDK cache is already specified.");yy("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new NT;return IC(t,r,new CT(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new _y(xy.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Ey;return e._queue.enqueueAndForgetEvenWhileRestricted(dt(ft().mark((function n(){return ft().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=dt(ft().mark((function e(t){var n;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(og.D()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,og.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(wE(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),aA=function(){function e(t,n,r){var i=this;_(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof vk||(this._appCompat=t)}return T(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||yy("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};fC(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return SC(this._delegate)}},{key:"disableNetwork",value:function(){return TC(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&rC("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){var t=new Ey;return e.asyncQueue.enqueueAndForget(dt(ft().mark((function n(){return ft().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=WS,n.next=3,QT(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(_C(uC(this._delegate,xC)))}},{key:"onSnapshotsInSync",value:function(e){return KN(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new _y("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new kA(this,vC(this._delegate,e))}catch(t){throw fA(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new lA(this,mC(this._delegate,e))}catch(t){throw fA(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new mA(this,function(e,t){if(e=uC(e,lC),nC("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new _y(xy.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new dC(e,null,function(e){return new gb(zy.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw fA(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=uC(e,xC);var r=Object.assign(Object.assign({},WN),n);return function(e){if(e.maxAttempts<1)throw new _y(xy.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Ey;return e.asyncQueue.enqueueAndForget(dt(ft().mark((function i(){var a;return ft().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,YT(e);case 2:a=i.sent,new OT(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(_C(e),(function(n){return t(new $N(e,n))}),r)}(this._delegate,(function(n){return e(new uA(t,n))}))}},{key:"batch",value:function(){var e=this;return _C(this._delegate),new sA(new QN(this._delegate,(function(t){return GN(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return CC(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return NC(this._delegate,e).then((function(e){return e?new mA(t,e):null}))}}]),e}(),oA=function(e){N(n,e);var t=P(n);function n(e){var r;return _(this,n),(r=t.call(this)).firestore=e,r}return T(n,[{key:"convertBytes",value:function(e){return new nA(new RC(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return lA.forKey(t,this.firestore,null)}}]),n}(NN);var uA=function(){function e(t,n){_(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new oA(t)}return T(e,[{key:"get",value:function(e){var t=this,n=bA(e);return this._delegate.get(n).then((function(e){return new pA(t._firestore,new PN(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=bA(e);return n?(ZN("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=bA(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=bA(e);return this._delegate.delete(t),this}}]),e}(),sA=function(){function e(t){_(this,e),this._delegate=t}return T(e,[{key:"set",value:function(e,t,n){var r=bA(e);return n?(ZN("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=bA(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=bA(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),cA=function(){function e(t,n,r){_(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return T(e,[{key:"fromFirestore",value:function(e,t){var n=new ON(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new vA(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new oA(t),n),i.set(n,a)),a}}]),e}();cA.INSTANCES=new WeakMap;var lA=function(){function e(t,n){_(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new oA(t)}return T(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new kA(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new kA(this.firestore,vC(this._delegate,e))}catch(t){throw fA(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Lr(e))instanceof hC&&yC(this._delegate,e)}},{key:"set",value:function(e,t){t=ZN("DocumentReference.set",t);try{return t?zN(this._delegate,e,t):zN(this._delegate,e)}catch(n){throw fA(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?BN(this._delegate,e):BN.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw fA(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return GN(uC((e=this._delegate).firestore,xC),[new Cw(e._key,dw.none())]);var e}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=hA(n),a=dA(n,(function(t){return new pA(e.firestore,new PN(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return qN(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?UN(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=uC(e,hC);var t=uC(e.firestore,xC);return XT(_C(t),e._key,{source:"server"}).then((function(n){return HN(t,e,n)}))}(this._delegate):function(e){e=uC(e,hC);var t=uC(e.firestore,xC);return XT(_C(t),e._key).then((function(n){return HN(t,e,n)}))}(this._delegate)).then((function(e){return new pA(t.firestore,new PN(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(cA.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new _y("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new hC(n._delegate,r,new Ky(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new hC(n._delegate,r,t))}}]),e}();function fA(e,t,n){return e.message=e.message.replace(t,n),e}function hA(e){var t,n=F(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!rA(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function dA(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=rA(e[0])?e[0]:rA(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var pA=function(){function e(t,n){_(this,e),this._firestore=t,this._delegate=n}return T(e,[{key:"ref",get:function(){return new lA(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return FN(this._delegate,e._delegate)}}]),e}(),vA=function(e){N(n,e);var t=P(n);function n(){return _(this,n),t.apply(this,arguments)}return T(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return void 0!==t||ky(),t}}]),n}(pA),mA=function(){function e(t,n){_(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new oA(t)}return T(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,dN(this._delegate,function(e,t,n){var r=t,i=cN("where",e);return pN._create(i,r,n)}(t,n,r)))}catch(i){throw fA(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,dN(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=cN("orderBy",e);return mN._create(n,t)}(t,n)))}catch(r){throw fA(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,dN(this._delegate,(sC("limit",n=t),yN._create("limit",n,"F"))))}catch(r){throw fA(r,"limit()","Query.limit()")}var n}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,dN(this._delegate,(sC("limitToLast",n=t),yN._create("limitToLast",n,"L"))))}catch(r){throw fA(r,"limitToLast()","Query.limitToLast()")}var n}},{key:"startAt",value:function(){try{return new e(this.firestore,dN(this._delegate,kN.apply(void 0,arguments)))}catch(t){throw fA(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,dN(this._delegate,bN.apply(void 0,arguments)))}catch(t){throw fA(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,dN(this._delegate,xN.apply(void 0,arguments)))}catch(t){throw fA(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,dN(this._delegate,_N.apply(void 0,arguments)))}catch(t){throw fA(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return gC(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?VN(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=uC(e,dC);var t=uC(e.firestore,xC),n=_C(t),r=new jN(t);return ZT(n,e._query,{source:"server"}).then((function(n){return new LN(t,r,e,n)}))}(this._delegate):function(e){e=uC(e,dC);var t=uC(e.firestore,xC),n=_C(t),r=new jN(t);return lN(e._query),ZT(n,e._query).then((function(n){return new LN(t,r,e,n)}))}(this._delegate)).then((function(e){return new gA(t.firestore,new LN(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=hA(n),a=dA(n,(function(t){return new gA(e.firestore,new LN(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return qN(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(cA.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),yA=function(){function e(t,n){_(this,e),this._firestore=t,this._delegate=n}return T(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new vA(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),gA=function(){function e(t,n){_(this,e),this._firestore=t,this._delegate=n}return T(e,[{key:"query",get:function(){return new mA(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new vA(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new yA(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new vA(n._firestore,r))}))}},{key:"isEqual",value:function(e){return FN(this._delegate,e._delegate)}}]),e}(),kA=function(e){N(n,e);var t=P(n);function n(e,r){var i;return _(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return T(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new lA(this.firestore,e):null}},{key:"doc",value:function(e){try{return new lA(this.firestore,void 0===e?mC(this._delegate):mC(this._delegate,e))}catch(t){throw fA(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=uC(e.firestore,xC),r=mC(e),i=AN(e.converter,t);return GN(n,[BC(zC(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,dw.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new lA(t.firestore,e)}))}},{key:"isEqual",value:function(e){return yC(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(cA.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(mA);function bA(e){return uC(e,hC)}var wA=function(){function e(){_(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=O(DC,n)}return T(e,[{key:"isEqual",value:function(e){return(e=Lr(e))instanceof DC&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(qy.keyField().canonicalString())}}]),e}(),xA=function(){function e(t){_(this,e),this._delegate=t}return T(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new GC("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new qC("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=JN.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=XN.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=new QC("increment",t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),_A={Firestore:aA,GeoPoint:OC,Timestamp:jy,Blob:nA,Transaction:uA,WriteBatch:sA,DocumentReference:lA,DocumentSnapshot:pA,Query:mA,QueryDocumentSnapshot:vA,QuerySnapshot:gA,CollectionReference:kA,FieldPath:wA,FieldValue:xA,setLogLevel:function(e){var t;t=e,dy.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Mr("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},_A)))}(e,(function(e,t){return new aA(e,t,new iA)})),e.registerVersion("@firebase/firestore-compat","0.3.12")}(la);la.initializeApp({apiKey:"AIzaSyDBPIW7i43_Z2CrmrK6z6vCM2sLLDbV_os",authDomain:"e-clone-app-aab05.firebaseapp.com",databaseURL:"https://e-clone-app-aab05.firebaseio.com",projectId:"e-clone-app-aab05",storageBucket:"e-clone-app-aab05.appspot.com",messagingSenderId:"536939729614",appId:"1:536939729614:web:324d5ffe18da2ca0afb69f",measurementId:"G-82DL2NFGZM"}).firestore();var EA=la.auth(),IA=function(){var e=Re(),n=c((0,t.useState)(),2),r=n[0],i=n[1],a=c((0,t.useState)(),2),o=a[0],u=a[1];return(0,ot.jsx)("div",{children:(0,ot.jsxs)("div",{className:"Sign-in",children:[(0,ot.jsx)("div",{className:"sign-in_logo",children:(0,ot.jsx)(rt,{to:"/",children:(0,ot.jsx)("img",{className:"header_logo",src:"https://zeevector.com/wp-content/uploads/LOGO/Amazon-India-Logo-PNG-HD.png"})})}),(0,ot.jsxs)("div",{className:"sign_container",children:[(0,ot.jsx)("h1",{children:"Sign-in"}),(0,ot.jsxs)("form",{children:[(0,ot.jsx)("h5",{children:"E-mail"}),(0,ot.jsx)("input",{type:"text",placeholder:"Email",value:r,onChange:function(e){return i(e.target.value)}}),(0,ot.jsx)("h5",{children:"Password"}),(0,ot.jsx)("input",{type:"password",placeholder:"password",value:o,onChange:function(e){return u(e.target.value)}}),(0,ot.jsx)("button",{type:"submit",onClick:function(t){t.preventDefault(),EA.signInWithEmailAndPassword(r,o).then((function(t){e("/")})).catch((function(e){return alert(e.message)}))},children:"Sign In "})]}),(0,ot.jsx)("p",{children:"By signing-in you agree to theAmazone Fake clonke Conditions of Use & Sale.Please see our Privacy Notice,our cookies Notice And our Interest-Based Ads  Notice."}),(0,ot.jsx)("button",{type:"submit",onClick:function(t){t.preventDefault(),EA.createUserWithEmailAndPassword(r,o).then((function(t){console.log(t),t&&e("/")})).catch((function(e){return alert(e.massage)}))},children:"Create your Amazone Account"})]})]})})},SA=function(){return(0,ot.jsx)("div",{children:(0,ot.jsxs)("footer",{className:"footer",children:[(0,ot.jsxs)("div",{className:"footer-container",children:[(0,ot.jsxs)("div",{className:"footer-section",children:[(0,ot.jsx)("h4",{className:"footer-heading",children:"Get to Know Us"}),(0,ot.jsxs)("ul",{className:"footer-list",children:[(0,ot.jsx)("li",{children:(0,ot.jsx)("a",{href:"#",children:"About Us"})}),(0,ot.jsx)("li",{children:(0,ot.jsx)("a",{href:"#",children:"Careers"})}),(0,ot.jsx)("li",{children:(0,ot.jsx)("a",{href:"#",children:"Press Releases"})}),(0,ot.jsx)("li",{children:(0,ot.jsx)("a",{href:"#",children:"Amazon Cares"})}),(0,ot.jsx)("li",{children:(0,ot.jsx)("a",{href:"#",children:"Gift a Smile"})})]})]}),(0,ot.jsxs)("div",{className:"footer-section",children:[(0,ot.jsx)("h4",{className:"footer-heading",children:"Connect with Us"}),(0,ot.jsxs)("ul",{className:"footer-list",children:[(0,ot.jsx)("li",{children:(0,ot.jsx)("a",{href:"#",children:"Facebook"})}),(0,ot.jsx)("li",{children:(0,ot.jsx)("a",{href:"#",children:"Twitter"})}),(0,ot.jsx)("li",{children:(0,ot.jsx)("a",{href:"#",children:"Instagram"})})]})]}),(0,ot.jsxs)("div",{className:"footer-section",children:[(0,ot.jsx)("h4",{className:"footer-heading",children:"Make Money with Us"}),(0,ot.jsxs)("ul",{className:"footer-list",children:[(0,ot.jsx)("li",{children:(0,ot.jsx)("a",{href:"#",children:"Sell on Amazon"})}),(0,ot.jsx)("li",{children:(0,ot.jsx)("a",{href:"#",children:"Sell under Amazon Accelerator"})}),(0,ot.jsx)("li",{children:(0,ot.jsx)("a",{href:"#",children:"Amazon Global Selling"})}),(0,ot.jsx)("li",{children:(0,ot.jsx)("a",{href:"#",children:"Become an Affiliate"})}),(0,ot.jsx)("li",{children:(0,ot.jsx)("a",{href:"#",children:"Fulfillment by Amazon"})}),(0,ot.jsx)("li",{children:(0,ot.jsx)("a",{href:"#",children:"Advertise Your Products"})}),(0,ot.jsx)("li",{children:(0,ot.jsx)("a",{href:"#",children:"Amazon Pay on Merchants"})})]})]}),(0,ot.jsxs)("div",{className:"footer-section",children:[(0,ot.jsx)("h4",{className:"footer-heading",children:"Let Us Help You"}),(0,ot.jsxs)("ul",{className:"footer-list",children:[(0,ot.jsx)("li",{children:(0,ot.jsx)("a",{href:"#",children:"COVID-19 and Amazon"})}),(0,ot.jsx)("li",{children:(0,ot.jsx)("a",{href:"#",children:"Your Account"})}),(0,ot.jsx)("li",{children:(0,ot.jsx)("a",{href:"#",children:"Returns Centre"})}),(0,ot.jsx)("li",{children:(0,ot.jsx)("a",{href:"#",children:"100% Purchase Protection"})}),(0,ot.jsx)("li",{children:(0,ot.jsx)("a",{href:"#",children:"Amazon App Download"})}),(0,ot.jsx)("li",{children:(0,ot.jsx)("a",{href:"#",children:"Amazon Assistant Download"})}),(0,ot.jsx)("li",{children:(0,ot.jsx)("a",{href:"#",children:"Help"})})]})]})]}),(0,ot.jsx)("div",{className:"footer-bottom",children:(0,ot.jsxs)("div",{className:"footer-container",children:[(0,ot.jsx)("p",{className:"footer-text",children:"\xa9 2023 Amazon.in. All rights reserved."}),(0,ot.jsx)("a",{href:"#top",className:"back-to-top",children:"Navigate to Top"})]})})]})})};var TA=function(){return(0,t.useEffect)((function(){})),(0,ot.jsx)(ot.Fragment,{children:(0,ot.jsx)(et,{basename:"/amazon-clon-app",children:(0,ot.jsxs)("div",{className:"app",children:[(0,ot.jsx)(lt,{}),(0,ot.jsxs)(We,{children:[(0,ot.jsx)(Ge,{path:"/",element:(0,ot.jsx)(tr,{})}),(0,ot.jsx)(Ge,{path:"/checkout",element:(0,ot.jsx)(ir,{})}),(0,ot.jsx)(Ge,{path:"/signIn",element:(0,ot.jsx)(IA,{})})]}),(0,ot.jsx)(SA,{})]})})})},CA=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))},NA=function(e,t){switch(t.type){case"ADD_TO_BASKET":return Yr(Yr({},e),{},{basket:[].concat(x(e.basket),[t.item])});case"Remove_From_Basket":console.log("item id",t.id);var n=e.basket.findIndex((function(e){return e.id===t.id})),r=x(e.basket);return r.splice(n,1),Yr(Yr({},e),{},{basket:r});default:return e}};i.createRoot(document.getElementById("root")).render((0,ot.jsx)(t.StrictMode,{children:(0,ot.jsx)(st,{initialState:{basket:[]},reducer:NA,children:(0,ot.jsx)(TA,{})})})),CA()}()}();
//# sourceMappingURL=main.01e2fe70.js.map